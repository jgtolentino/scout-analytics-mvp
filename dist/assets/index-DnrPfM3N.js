var Fs=r=>{throw TypeError(r)};var Mr=(r,e,t)=>e.has(r)||Fs("Cannot "+t);var g=(r,e,t)=>(Mr(r,e,"read from private field"),t?t.call(r):e.get(r)),T=(r,e,t)=>e.has(r)?Fs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),S=(r,e,t,s)=>(Mr(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),D=(r,e,t)=>(Mr(r,e,"access private method"),t);var nr=(r,e,t,s)=>({set _(n){S(r,e,n,t)},get _(){return g(r,e,s)}});import{j as o,S as qi}from"./ui-vendor-CC45oOfv.js";import{a as Bi,r as L,u as Wi,L as qs,O as zi,g as Hi,R as Un,b as Gi,c as ce,B as Vi,d as Ki,e as Rt}from"./react-vendor-clnEbvOI.js";import{c as Ln,R as Ss,L as Qi,C as Fn,X as Jr,Y as Yr,T as ks,a as Ji,B as Yi,b as Xi,P as Zi,d as ea,e as ta,f as ra}from"./chart-vendor-CkrnA8jU.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Xr={},Bs=Bi;Xr.createRoot=Bs.createRoot,Xr.hydrateRoot=Bs.hydrateRoot;var Xt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tt=typeof window>"u"||"Deno"in globalThis;function ne(){}function sa(r,e){return typeof r=="function"?r(e):r}function Zr(r){return typeof r=="number"&&r>=0&&r!==1/0}function qn(r,e){return Math.max(r+(e||0)-Date.now(),0)}function qe(r,e){return typeof r=="function"?r(e):r}function me(r,e){return typeof r=="function"?r(e):r}function Ws(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:l}=r;if(a){if(s){if(e.queryHash!==Ts(a,e.options))return!1}else if(!zt(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function zs(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Wt(e.options.mutationKey)!==Wt(i))return!1}else if(!zt(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Ts(r,e){return((e==null?void 0:e.queryKeyHashFn)||Wt)(r)}function Wt(r){return JSON.stringify(r,(e,t)=>ts(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function zt(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>zt(r[t],e[t])):!1}function Bn(r,e){if(r===e)return r;const t=Hs(r)&&Hs(e);if(t||ts(r)&&ts(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),a=i.length,l=t?[]:{},c=new Set(s);let u=0;for(let d=0;d<a;d++){const h=t?d:i[d];(!t&&c.has(h)||t)&&r[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=Bn(r[h],e[h]),l[h]===r[h]&&r[h]!==void 0&&u++)}return n===a&&u===n?r:l}return e}function es(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Hs(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function ts(r){if(!Gs(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Gs(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Gs(r){return Object.prototype.toString.call(r)==="[object Object]"}function na(r){return new Promise(e=>{setTimeout(e,r)})}function rs(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Bn(r,e):e}function ia(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function aa(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Cs=Symbol();function Wn(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Cs?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function oa(r,e){return typeof r=="function"?r(...e):!!r}var Ve,Ae,ht,On,la=(On=class extends Xt{constructor(){super();T(this,Ve);T(this,Ae);T(this,ht);S(this,ht,e=>{if(!tt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){g(this,Ae)||this.setEventListener(g(this,ht))}onUnsubscribe(){var e;this.hasListeners()||((e=g(this,Ae))==null||e.call(this),S(this,Ae,void 0))}setEventListener(e){var t;S(this,ht,e),(t=g(this,Ae))==null||t.call(this),S(this,Ae,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){g(this,Ve)!==e&&(S(this,Ve,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof g(this,Ve)=="boolean"?g(this,Ve):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ve=new WeakMap,Ae=new WeakMap,ht=new WeakMap,On),Ps=new la,ft,De,mt,En,ca=(En=class extends Xt{constructor(){super();T(this,ft,!0);T(this,De);T(this,mt);S(this,mt,e=>{if(!tt&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){g(this,De)||this.setEventListener(g(this,mt))}onUnsubscribe(){var e;this.hasListeners()||((e=g(this,De))==null||e.call(this),S(this,De,void 0))}setEventListener(e){var t;S(this,mt,e),(t=g(this,De))==null||t.call(this),S(this,De,e(this.setOnline.bind(this)))}setOnline(e){g(this,ft)!==e&&(S(this,ft,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return g(this,ft)}},ft=new WeakMap,De=new WeakMap,mt=new WeakMap,En),mr=new ca;function ss(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function ua(r){return Math.min(1e3*2**r,3e4)}function zn(r){return(r??"online")==="online"?mr.isOnline():!0}var Hn=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Ur(r){return r instanceof Hn}function Gn(r){let e=!1,t=0,s=!1,n;const i=ss(),a=v=>{var p;s||(m(new Hn(v)),(p=r.abort)==null||p.call(r))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Ps.isFocused()&&(r.networkMode==="always"||mr.isOnline())&&r.canRun(),d=()=>zn(r.networkMode)&&r.canRun(),h=v=>{var p;s||(s=!0,(p=r.onSuccess)==null||p.call(r,v),n==null||n(),i.resolve(v))},m=v=>{var p;s||(s=!0,(p=r.onError)==null||p.call(r,v),n==null||n(),i.reject(v))},f=()=>new Promise(v=>{var p;n=w=>{(s||u())&&v(w)},(p=r.onPause)==null||p.call(r)}).then(()=>{var v;n=void 0,s||(v=r.onContinue)==null||v.call(r)}),y=()=>{if(s)return;let v;const p=t===0?r.initialPromise:void 0;try{v=p??r.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(h).catch(w=>{var j;if(s)return;const _=r.retry??(tt?0:3),b=r.retryDelay??ua,x=typeof b=="function"?b(t,w):b,k=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,w);if(e||!k){m(w);return}t++,(j=r.onFail)==null||j.call(r,t,w),na(x).then(()=>u()?void 0:f()).then(()=>{e?m(w):y()})})};return{promise:i,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():f().then(y),i)}}var da=r=>setTimeout(r,0);function ha(){let r=[],e=0,t=l=>{l()},s=l=>{l()},n=da;const i=l=>{e?r.push(l):n(()=>{t(l)})},a=()=>{const l=r;r=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var J=ha(),Ke,Nn,Vn=(Nn=class{constructor(){T(this,Ke)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zr(this.gcTime)&&S(this,Ke,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(tt?1/0:5*60*1e3))}clearGcTimeout(){g(this,Ke)&&(clearTimeout(g(this,Ke)),S(this,Ke,void 0))}},Ke=new WeakMap,Nn),gt,pt,le,Qe,Y,Kt,Je,de,_e,Rn,fa=(Rn=class extends Vn{constructor(e){super();T(this,de);T(this,gt);T(this,pt);T(this,le);T(this,Qe);T(this,Y);T(this,Kt);T(this,Je);S(this,Je,!1),S(this,Kt,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,Qe,e.client),S(this,le,g(this,Qe).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,gt,ma(this.options)),this.state=e.state??g(this,gt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=g(this,Y))==null?void 0:e.promise}setOptions(e){this.options={...g(this,Kt),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&g(this,le).remove(this)}setData(e,t){const s=rs(this.state.data,e,this.options);return D(this,de,_e).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){D(this,de,_e).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=g(this,Y))==null?void 0:s.promise;return(n=g(this,Y))==null||n.cancel(e),t?t.then(ne).catch(ne):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(g(this,gt))}isActive(){return this.observers.some(e=>me(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qe(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!qn(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=g(this,Y))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=g(this,Y))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),g(this,le).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(g(this,Y)&&(g(this,Je)?g(this,Y).cancel({revert:!0}):g(this,Y).cancelRetry()),this.scheduleGc()),g(this,le).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,de,_e).call(this,{type:"invalidate"})}fetch(e,t){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(g(this,Y))return g(this,Y).continueRetry(),g(this,Y).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,n=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(S(this,Je,!0),s.signal)})},i=()=>{const m=Wn(this.options,t),y=(()=>{const v={client:g(this,Qe),queryKey:this.queryKey,meta:this.meta};return n(v),v})();return S(this,Je,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:g(this,Qe),state:this.state,fetchFn:i};return n(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),S(this,pt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&D(this,de,_e).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var f,y,v,p;Ur(m)&&m.silent||D(this,de,_e).call(this,{type:"error",error:m}),Ur(m)||((y=(f=g(this,le).config).onError)==null||y.call(f,m,this),(p=(v=g(this,le).config).onSettled)==null||p.call(v,this.state.data,m,this)),this.scheduleGc()};return S(this,Y,Gn({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var f,y,v,p;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){c(w);return}(y=(f=g(this,le).config).onSuccess)==null||y.call(f,m,this),(p=(v=g(this,le).config).onSettled)==null||p.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,f)=>{D(this,de,_e).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{D(this,de,_e).call(this,{type:"pause"})},onContinue:()=>{D(this,de,_e).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),g(this,Y).start()}},gt=new WeakMap,pt=new WeakMap,le=new WeakMap,Qe=new WeakMap,Y=new WeakMap,Kt=new WeakMap,Je=new WeakMap,de=new WeakSet,_e=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Kn(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Ur(n)&&n.revert&&g(this,pt)?{...g(this,pt),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),J.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),g(this,le).notify({query:this,type:"updated",action:e})})},Rn);function Kn(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zn(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function ma(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ge,An,ga=(An=class extends Xt{constructor(e={}){super();T(this,ge);this.config=e,S(this,ge,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??Ts(n,t);let a=this.get(i);return a||(a=new fa({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){g(this,ge).has(e.queryHash)||(g(this,ge).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=g(this,ge).get(e.queryHash);t&&(e.destroy(),t===e&&g(this,ge).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){J.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return g(this,ge).get(e)}getAll(){return[...g(this,ge).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Ws(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Ws(e,s)):t}notify(e){J.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){J.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){J.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ge=new WeakMap,An),pe,Z,Ye,ve,Oe,Dn,pa=(Dn=class extends Vn{constructor(e){super();T(this,ve);T(this,pe);T(this,Z);T(this,Ye);this.mutationId=e.mutationId,S(this,Z,e.mutationCache),S(this,pe,[]),this.state=e.state||va(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){g(this,pe).includes(e)||(g(this,pe).push(e),this.clearGcTimeout(),g(this,Z).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,pe,g(this,pe).filter(t=>t!==e)),this.scheduleGc(),g(this,Z).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){g(this,pe).length||(this.state.status==="pending"?this.scheduleGc():g(this,Z).remove(this))}continue(){var e;return((e=g(this,Ye))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,c,u,d,h,m,f,y,v,p,w,_,b,x,k,j,P,G;const t=()=>{D(this,ve,Oe).call(this,{type:"continue"})};S(this,Ye,Gn({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,B)=>{D(this,ve,Oe).call(this,{type:"failed",failureCount:M,error:B})},onPause:()=>{D(this,ve,Oe).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>g(this,Z).canRun(this)}));const s=this.state.status==="pending",n=!g(this,Ye).canStart();try{if(s)t();else{D(this,ve,Oe).call(this,{type:"pending",variables:e,isPaused:n}),await((a=(i=g(this,Z).config).onMutate)==null?void 0:a.call(i,e,this));const B=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));B!==this.state.context&&D(this,ve,Oe).call(this,{type:"pending",context:B,variables:e,isPaused:n})}const M=await g(this,Ye).start();return await((d=(u=g(this,Z).config).onSuccess)==null?void 0:d.call(u,M,e,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,M,e,this.state.context)),await((y=(f=g(this,Z).config).onSettled)==null?void 0:y.call(f,M,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,M,null,e,this.state.context)),D(this,ve,Oe).call(this,{type:"success",data:M}),M}catch(M){try{throw await((_=(w=g(this,Z).config).onError)==null?void 0:_.call(w,M,e,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,M,e,this.state.context)),await((j=(k=g(this,Z).config).onSettled)==null?void 0:j.call(k,void 0,M,this.state.variables,this.state.context,this)),await((G=(P=this.options).onSettled)==null?void 0:G.call(P,void 0,M,e,this.state.context)),M}finally{D(this,ve,Oe).call(this,{type:"error",error:M})}}finally{g(this,Z).runNext(this)}}},pe=new WeakMap,Z=new WeakMap,Ye=new WeakMap,ve=new WeakSet,Oe=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),J.batch(()=>{g(this,pe).forEach(s=>{s.onMutationUpdate(e)}),g(this,Z).notify({mutation:this,type:"updated",action:e})})},Dn);function va(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ke,he,Qt,In,ya=(In=class extends Xt{constructor(e={}){super();T(this,ke);T(this,he);T(this,Qt);this.config=e,S(this,ke,new Set),S(this,he,new Map),S(this,Qt,0)}build(e,t,s){const n=new pa({mutationCache:this,mutationId:++nr(this,Qt)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){g(this,ke).add(e);const t=ir(e);if(typeof t=="string"){const s=g(this,he).get(t);s?s.push(e):g(this,he).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(g(this,ke).delete(e)){const t=ir(e);if(typeof t=="string"){const s=g(this,he).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&g(this,he).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ir(e);if(typeof t=="string"){const s=g(this,he).get(t),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=ir(e);if(typeof t=="string"){const n=(s=g(this,he).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){J.batch(()=>{g(this,ke).forEach(e=>{this.notify({type:"removed",mutation:e})}),g(this,ke).clear(),g(this,he).clear()})}getAll(){return Array.from(g(this,ke))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>zs(t,s))}findAll(e={}){return this.getAll().filter(t=>zs(e,t))}notify(e){J.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return J.batch(()=>Promise.all(e.map(t=>t.continue().catch(ne))))}},ke=new WeakMap,he=new WeakMap,Qt=new WeakMap,In);function ir(r){var e;return(e=r.options.scope)==null?void 0:e.id}function Vs(r){return{onFetch:(e,t)=>{var d,h,m,f,y;const s=e.options,n=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},w=Wn(e.options,e.fetchOptions),_=async(b,x,k)=>{if(v)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const P=(()=>{const z={client:e.client,queryKey:e.queryKey,pageParam:x,direction:k?"backward":"forward",meta:e.options.meta};return p(z),z})(),G=await w(P),{maxPages:M}=e.options,B=k?aa:ia;return{pages:B(b.pages,G,M),pageParams:B(b.pageParams,x,M)}};if(n&&i.length){const b=n==="backward",x=b?ba:Ks,k={pages:i,pageParams:a},j=x(s,k);l=await _(k,j,b)}else{const b=r??i.length;do{const x=c===0?a[0]??s.initialPageParam:Ks(s,l);if(c>0&&x==null)break;l=await _(l,x),c++}while(c<b)}return l};e.options.persister?e.fetchFn=()=>{var v,p;return(p=(v=e.options).persister)==null?void 0:p.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function Ks(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function ba(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var V,Ie,$e,vt,yt,Me,bt,wt,$n,wa=($n=class{constructor(r={}){T(this,V);T(this,Ie);T(this,$e);T(this,vt);T(this,yt);T(this,Me);T(this,bt);T(this,wt);S(this,V,r.queryCache||new ga),S(this,Ie,r.mutationCache||new ya),S(this,$e,r.defaultOptions||{}),S(this,vt,new Map),S(this,yt,new Map),S(this,Me,0)}mount(){nr(this,Me)._++,g(this,Me)===1&&(S(this,bt,Ps.subscribe(async r=>{r&&(await this.resumePausedMutations(),g(this,V).onFocus())})),S(this,wt,mr.subscribe(async r=>{r&&(await this.resumePausedMutations(),g(this,V).onOnline())})))}unmount(){var r,e;nr(this,Me)._--,g(this,Me)===0&&((r=g(this,bt))==null||r.call(this),S(this,bt,void 0),(e=g(this,wt))==null||e.call(this),S(this,wt,void 0))}isFetching(r){return g(this,V).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return g(this,Ie).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=g(this,V).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=g(this,V).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(qe(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return g(this,V).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=g(this,V).get(s.queryHash),i=n==null?void 0:n.state.data,a=sa(e,i);if(a!==void 0)return g(this,V).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return J.batch(()=>g(this,V).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=g(this,V).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=g(this,V);J.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=g(this,V);return J.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=J.batch(()=>g(this,V).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(ne).catch(ne)}invalidateQueries(r,e={}){return J.batch(()=>(g(this,V).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=J.batch(()=>g(this,V).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(ne)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ne)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=g(this,V).build(this,e);return t.isStaleByTime(qe(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(ne).catch(ne)}fetchInfiniteQuery(r){return r.behavior=Vs(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(ne).catch(ne)}ensureInfiniteQueryData(r){return r.behavior=Vs(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return mr.isOnline()?g(this,Ie).resumePausedMutations():Promise.resolve()}getQueryCache(){return g(this,V)}getMutationCache(){return g(this,Ie)}getDefaultOptions(){return g(this,$e)}setDefaultOptions(r){S(this,$e,r)}setQueryDefaults(r,e){g(this,vt).set(Wt(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...g(this,vt).values()],t={};return e.forEach(s=>{zt(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){g(this,yt).set(Wt(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...g(this,yt).values()],t={};return e.forEach(s=>{zt(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...g(this,$e).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Ts(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cs&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...g(this,$e).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){g(this,V).clear(),g(this,Ie).clear()}},V=new WeakMap,Ie=new WeakMap,$e=new WeakMap,vt=new WeakMap,yt=new WeakMap,Me=new WeakMap,bt=new WeakMap,wt=new WeakMap,$n),se,I,Jt,ee,Xe,xt,Ue,Le,Yt,_t,jt,Ze,et,Fe,St,$,Ut,ns,is,as,os,ls,cs,us,Qn,Mn,xa=(Mn=class extends Xt{constructor(e,t){super();T(this,$);T(this,se);T(this,I);T(this,Jt);T(this,ee);T(this,Xe);T(this,xt);T(this,Ue);T(this,Le);T(this,Yt);T(this,_t);T(this,jt);T(this,Ze);T(this,et);T(this,Fe);T(this,St,new Set);this.options=t,S(this,se,e),S(this,Le,null),S(this,Ue,ss()),this.options.experimental_prefetchInRender||g(this,Ue).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(g(this,I).addObserver(this),Qs(g(this,I),this.options)?D(this,$,Ut).call(this):this.updateResult(),D(this,$,os).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ds(g(this,I),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ds(g(this,I),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,D(this,$,ls).call(this),D(this,$,cs).call(this),g(this,I).removeObserver(this)}setOptions(e){const t=this.options,s=g(this,I);if(this.options=g(this,se).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof me(this.options.enabled,g(this,I))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");D(this,$,us).call(this),g(this,I).setOptions(this.options),t._defaulted&&!es(this.options,t)&&g(this,se).getQueryCache().notify({type:"observerOptionsUpdated",query:g(this,I),observer:this});const n=this.hasListeners();n&&Js(g(this,I),s,this.options,t)&&D(this,$,Ut).call(this),this.updateResult(),n&&(g(this,I)!==s||me(this.options.enabled,g(this,I))!==me(t.enabled,g(this,I))||qe(this.options.staleTime,g(this,I))!==qe(t.staleTime,g(this,I)))&&D(this,$,ns).call(this);const i=D(this,$,is).call(this);n&&(g(this,I)!==s||me(this.options.enabled,g(this,I))!==me(t.enabled,g(this,I))||i!==g(this,Fe))&&D(this,$,as).call(this,i)}getOptimisticResult(e){const t=g(this,se).getQueryCache().build(g(this,se),e),s=this.createResult(t,e);return ja(this,s)&&(S(this,ee,s),S(this,xt,this.options),S(this,Xe,g(this,I).state)),s}getCurrentResult(){return g(this,ee)}trackResult(e,t){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),t==null||t(n),Reflect.get(s,n))})}trackProp(e){g(this,St).add(e)}getCurrentQuery(){return g(this,I)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=g(this,se).defaultQueryOptions(e),s=g(this,se).getQueryCache().build(g(this,se),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return D(this,$,Ut).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),g(this,ee)))}createResult(e,t){var M;const s=g(this,I),n=this.options,i=g(this,ee),a=g(this,Xe),l=g(this,xt),u=e!==s?e.state:g(this,Jt),{state:d}=e;let h={...d},m=!1,f;if(t._optimisticResults){const B=this.hasListeners(),z=!B&&Qs(e,t),E=B&&Js(e,s,t,n);(z||E)&&(h={...h,...Kn(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:p}=h;f=h.data;let w=!1;if(t.placeholderData!==void 0&&f===void 0&&p==="pending"){let B;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(B=i.data,w=!0):B=typeof t.placeholderData=="function"?t.placeholderData((M=g(this,jt))==null?void 0:M.state.data,g(this,jt)):t.placeholderData,B!==void 0&&(p="success",f=rs(i==null?void 0:i.data,B,t),m=!0)}if(t.select&&f!==void 0&&!w)if(i&&f===(a==null?void 0:a.data)&&t.select===g(this,Yt))f=g(this,_t);else try{S(this,Yt,t.select),f=t.select(f),f=rs(i==null?void 0:i.data,f,t),S(this,_t,f),S(this,Le,null)}catch(B){S(this,Le,B)}g(this,Le)&&(y=g(this,Le),f=g(this,_t),v=Date.now(),p="error");const _=h.fetchStatus==="fetching",b=p==="pending",x=p==="error",k=b&&_,j=f!==void 0,G={status:p,fetchStatus:h.fetchStatus,isPending:b,isSuccess:p==="success",isError:x,isInitialLoading:k,isLoading:k,data:f,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:_,isRefetching:_&&!b,isLoadingError:x&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:x&&j,isStale:Os(e,t),refetch:this.refetch,promise:g(this,Ue)};if(this.options.experimental_prefetchInRender){const B=oe=>{G.status==="error"?oe.reject(G.error):G.data!==void 0&&oe.resolve(G.data)},z=()=>{const oe=S(this,Ue,G.promise=ss());B(oe)},E=g(this,Ue);switch(E.status){case"pending":e.queryHash===s.queryHash&&B(E);break;case"fulfilled":(G.status==="error"||G.data!==E.value)&&z();break;case"rejected":(G.status!=="error"||G.error!==E.reason)&&z();break}}return G}updateResult(){const e=g(this,ee),t=this.createResult(g(this,I),this.options);if(S(this,Xe,g(this,I).state),S(this,xt,this.options),g(this,Xe).data!==void 0&&S(this,jt,g(this,I)),es(t,e))return;S(this,ee,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!g(this,St).size)return!0;const a=new Set(i??g(this,St));return this.options.throwOnError&&a.add("error"),Object.keys(g(this,ee)).some(l=>{const c=l;return g(this,ee)[c]!==e[c]&&a.has(c)})};D(this,$,Qn).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&D(this,$,os).call(this)}},se=new WeakMap,I=new WeakMap,Jt=new WeakMap,ee=new WeakMap,Xe=new WeakMap,xt=new WeakMap,Ue=new WeakMap,Le=new WeakMap,Yt=new WeakMap,_t=new WeakMap,jt=new WeakMap,Ze=new WeakMap,et=new WeakMap,Fe=new WeakMap,St=new WeakMap,$=new WeakSet,Ut=function(e){D(this,$,us).call(this);let t=g(this,I).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ne)),t},ns=function(){D(this,$,ls).call(this);const e=qe(this.options.staleTime,g(this,I));if(tt||g(this,ee).isStale||!Zr(e))return;const s=qn(g(this,ee).dataUpdatedAt,e)+1;S(this,Ze,setTimeout(()=>{g(this,ee).isStale||this.updateResult()},s))},is=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(g(this,I)):this.options.refetchInterval)??!1},as=function(e){D(this,$,cs).call(this),S(this,Fe,e),!(tt||me(this.options.enabled,g(this,I))===!1||!Zr(g(this,Fe))||g(this,Fe)===0)&&S(this,et,setInterval(()=>{(this.options.refetchIntervalInBackground||Ps.isFocused())&&D(this,$,Ut).call(this)},g(this,Fe)))},os=function(){D(this,$,ns).call(this),D(this,$,as).call(this,D(this,$,is).call(this))},ls=function(){g(this,Ze)&&(clearTimeout(g(this,Ze)),S(this,Ze,void 0))},cs=function(){g(this,et)&&(clearInterval(g(this,et)),S(this,et,void 0))},us=function(){const e=g(this,se).getQueryCache().build(g(this,se),this.options);if(e===g(this,I))return;const t=g(this,I);S(this,I,e),S(this,Jt,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Qn=function(e){J.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(g(this,ee))}),g(this,se).getQueryCache().notify({query:g(this,I),type:"observerResultsUpdated"})})},Mn);function _a(r,e){return me(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Qs(r,e){return _a(r,e)||r.state.data!==void 0&&ds(r,e,e.refetchOnMount)}function ds(r,e,t){if(me(e.enabled,r)!==!1&&qe(e.staleTime,r)!=="static"){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Os(r,e)}return!1}function Js(r,e,t,s){return(r!==e||me(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Os(r,t)}function Os(r,e){return me(e.enabled,r)!==!1&&r.isStaleByTime(qe(e.staleTime,r))}function ja(r,e){return!es(r.getCurrentResult(),e)}var Jn=L.createContext(void 0),Sa=r=>{const e=L.useContext(Jn);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ka=({client:r,children:e})=>(L.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),o.jsx(Jn.Provider,{value:r,children:e})),Yn=L.createContext(!1),Ta=()=>L.useContext(Yn);Yn.Provider;function Ca(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var Pa=L.createContext(Ca()),Oa=()=>L.useContext(Pa),Ea=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},Na=r=>{L.useEffect(()=>{r.clearReset()},[r])},Ra=({result:r,errorResetBoundary:e,throwOnError:t,query:s,suspense:n})=>r.isError&&!e.isReset()&&!r.isFetching&&s&&(n&&r.data===void 0||oa(t,[r.error,s])),Aa=r=>{if(r.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=r.staleTime;r.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},Da=(r,e)=>r.isLoading&&r.isFetching&&!e,Ia=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,Ys=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function $a(r,e,t){var h,m,f,y,v;const s=Ta(),n=Oa(),i=Sa(),a=i.defaultQueryOptions(r);(m=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",Aa(a),Ea(a,n),Na(n);const l=!i.getQueryCache().get(a.queryHash),[c]=L.useState(()=>new e(i,a)),u=c.getOptimisticResult(a),d=!s&&r.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(p=>{const w=d?c.subscribe(J.batchCalls(p)):ne;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),L.useEffect(()=>{c.setOptions(a)},[a,c]),Ia(a,u))throw Ys(a,c,n);if(Ra({result:u,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((y=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||y.call(f,a,u),a.experimental_prefetchInRender&&!tt&&Da(u,s)){const p=l?Ys(a,c,n):(v=i.getQueryCache().get(a.queryHash))==null?void 0:v.promise;p==null||p.catch(ne).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function wr(r,e){return $a(r,xa)}const Es="-",Ma=r=>{const e=La(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:a=>{const l=a.split(Es);return l[0]===""&&l.length!==1&&l.shift(),Xn(l,e)||Ua(a)},getConflictingClassGroupIds:(a,l)=>{const c=t[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},Xn=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?Xn(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(Es);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Xs=/^\[(.+)\]$/,Ua=r=>{if(Xs.test(r)){const e=Xs.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},La=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return qa(Object.entries(r.classGroups),t).forEach(([i,a])=>{hs(a,s,i,e)}),s},hs=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:Zs(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(Fa(n)){hs(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,a])=>{hs(a,Zs(e,i),t,s)})})},Zs=(r,e)=>{let t=r;return e.split(Es).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},Fa=r=>r.isThemeGetter,qa=(r,e)=>e?r.map(([t,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,n]}):r,Ba=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){t.has(i)?t.set(i,a):n(i,a)}}},Zn="!",Wa=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,h;for(let p=0;p<l.length;p++){let w=l[p];if(u===0){if(w===n&&(s||l.slice(p,p+i)===e)){c.push(l.slice(d,p)),d=p+i;continue}if(w==="/"){h=p;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(Zn),y=f?m.substring(1):m,v=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:v}};return t?l=>t({className:l,parseClassName:a}):a},za=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},Ha=r=>({cache:Ba(r.cacheSize),parseClassName:Wa(r),...Ma(r)}),Ga=/\s+/,Va=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=r.trim().split(Ga);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=t(u);let y=!!f,v=s(y?m.substring(0,f):m);if(!v){if(!y){l=u+(l.length>0?" "+l:l);continue}if(v=s(m),!v){l=u+(l.length>0?" "+l:l);continue}y=!1}const p=za(d).join(":"),w=h?p+Zn:p,_=w+v;if(i.includes(_))continue;i.push(_);const b=n(v,y);for(let x=0;x<b.length;++x){const k=b[x];i.push(w+k)}l=u+(l.length>0?" "+l:l)}return l};function Ka(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=ei(e))&&(s&&(s+=" "),s+=t);return s}const ei=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=ei(r[s]))&&(t&&(t+=" "),t+=e);return t};function Qa(r,...e){let t,s,n,i=a;function a(c){const u=e.reduce((d,h)=>h(d),r());return t=Ha(u),s=t.cache.get,n=t.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=Va(c,t);return n(c,d),d}return function(){return i(Ka.apply(null,arguments))}}const H=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},ti=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ja=/^\d+\/\d+$/,Ya=new Set(["px","full","screen"]),Xa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Za=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eo=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,to=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ro=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xe=r=>ut(r)||Ya.has(r)||Ja.test(r),Te=r=>Ct(r,"length",uo),ut=r=>!!r&&!Number.isNaN(Number(r)),Lr=r=>Ct(r,"number",ut),At=r=>!!r&&Number.isInteger(Number(r)),so=r=>r.endsWith("%")&&ut(r.slice(0,-1)),O=r=>ti.test(r),Ce=r=>Xa.test(r),no=new Set(["length","size","percentage"]),io=r=>Ct(r,no,ri),ao=r=>Ct(r,"position",ri),oo=new Set(["image","url"]),lo=r=>Ct(r,oo,fo),co=r=>Ct(r,"",ho),Dt=()=>!0,Ct=(r,e,t)=>{const s=ti.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},uo=r=>Za.test(r)&&!eo.test(r),ri=()=>!1,ho=r=>to.test(r),fo=r=>ro.test(r),mo=()=>{const r=H("colors"),e=H("spacing"),t=H("blur"),s=H("brightness"),n=H("borderColor"),i=H("borderRadius"),a=H("borderSpacing"),l=H("borderWidth"),c=H("contrast"),u=H("grayscale"),d=H("hueRotate"),h=H("invert"),m=H("gap"),f=H("gradientColorStops"),y=H("gradientColorStopPositions"),v=H("inset"),p=H("margin"),w=H("opacity"),_=H("padding"),b=H("saturate"),x=H("scale"),k=H("sepia"),j=H("skew"),P=H("space"),G=H("translate"),M=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",O,e],E=()=>[O,e],oe=()=>["",xe,Te],rr=()=>["auto",ut,O],Ms=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],sr=()=>["solid","dashed","dotted","double","none"],Us=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$r=()=>["start","end","center","between","around","evenly","stretch"],Nt=()=>["","0",O],Ls=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[ut,O];return{cacheSize:500,separator:":",theme:{colors:[Dt],spacing:[xe,Te],blur:["none","",Ce,O],brightness:we(),borderColor:[r],borderRadius:["none","","full",Ce,O],borderSpacing:E(),borderWidth:oe(),contrast:we(),grayscale:Nt(),hueRotate:we(),invert:Nt(),gap:E(),gradientColorStops:[r],gradientColorStopPositions:[so,Te],inset:z(),margin:z(),opacity:we(),padding:E(),saturate:we(),scale:we(),sepia:Nt(),skew:we(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",O]}],container:["container"],columns:[{columns:[Ce]}],"break-after":[{"break-after":Ls()}],"break-before":[{"break-before":Ls()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ms(),O]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",At,O]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",O]}],grow:[{grow:Nt()}],shrink:[{shrink:Nt()}],order:[{order:["first","last","none",At,O]}],"grid-cols":[{"grid-cols":[Dt]}],"col-start-end":[{col:["auto",{span:["full",At,O]},O]}],"col-start":[{"col-start":rr()}],"col-end":[{"col-end":rr()}],"grid-rows":[{"grid-rows":[Dt]}],"row-start-end":[{row:["auto",{span:[At,O]},O]}],"row-start":[{"row-start":rr()}],"row-end":[{"row-end":rr()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",O]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",O]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...$r()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$r(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$r(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",O,e]}],"min-w":[{"min-w":[O,e,"min","max","fit"]}],"max-w":[{"max-w":[O,e,"none","full","min","max","fit","prose",{screen:[Ce]},Ce]}],h:[{h:[O,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[O,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[O,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[O,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ce,Te]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lr]}],"font-family":[{font:[Dt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",O]}],"line-clamp":[{"line-clamp":["none",ut,Lr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xe,O]}],"list-image":[{"list-image":["none",O]}],"list-style-type":[{list:["none","disc","decimal",O]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...sr(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xe,Te]}],"underline-offset":[{"underline-offset":["auto",xe,O]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ms(),ao]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",io]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lo]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...sr(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:sr()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...sr()]}],"outline-offset":[{"outline-offset":[xe,O]}],"outline-w":[{outline:[xe,Te]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[xe,Te]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Ce,co]}],"shadow-color":[{shadow:[Dt]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Us(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Us()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ce,O]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",O]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",O]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",O]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[At,O]}],"translate-x":[{"translate-x":[G]}],"translate-y":[{"translate-y":[G]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",O]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[xe,Te,Lr]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},go=Qa(mo);function ae(...r){return go(Ln(r))}function xr(r){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(r)}function _r(r){return new Intl.NumberFormat("en-PH").format(r)}function si(r){return`${(r*100).toFixed(1)}%`}function po(r){return r>0?"text-green-600":r<0?"text-red-600":"text-gray-600"}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(r,e)=>{const t=L.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>L.createElement("svg",{ref:d,...vo,width:n,height:n,stroke:s,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${yo(r)}`,l].join(" "),...u},[...e.map(([h,m])=>L.createElement(h,m)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=K("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=K("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=K("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=K("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tn=[{name:"Overview",href:"/",icon:jo},{name:"Transaction Trends",href:"/trends",icon:Sr},{name:"Product Mix",href:"/products",icon:ii},{name:"Consumer Insights",href:"/insights",icon:ai}];function No(){const r=Wi(),[e,t]=L.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:border-r lg:border-gray-200 lg:bg-white lg:pt-5 lg:pb-4",children:[o.jsxs("div",{className:"flex items-center flex-shrink-0 px-6",children:[o.jsx(en,{className:"h-8 w-8 text-blue-600"}),o.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Scout Analytics"})]}),o.jsx("div",{className:"mt-6 flex flex-col flex-1 overflow-y-auto",children:o.jsx("nav",{className:"flex-1 px-3 space-y-1",children:tn.map(s=>{const n=r.pathname===s.href;return o.jsxs(qs,{to:s.href,className:ae("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),children:[o.jsx(s.icon,{className:ae("mr-3 h-5 w-5 flex-shrink-0",n?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),s.name]},s.name)})})})]}),o.jsxs("div",{className:"lg:hidden",children:[o.jsxs("div",{className:"flex items-center justify-between bg-white border-b border-gray-200 px-4 py-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(en,{className:"h-6 w-6 text-blue-600"}),o.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:"Scout Analytics"})]}),o.jsx("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",onClick:()=>t(!e),children:e?o.jsx(oi,{className:"h-6 w-6"}):o.jsx(So,{className:"h-6 w-6"})})]}),e&&o.jsx("div",{className:"bg-white border-b border-gray-200",children:o.jsx("div",{className:"pt-2 pb-3 space-y-1",children:tn.map(s=>{const n=r.pathname===s.href;return o.jsxs(qs,{to:s.href,className:ae("flex items-center px-4 py-2 text-base font-medium",n?"bg-blue-50 text-blue-700 border-r-4 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>t(!1),children:[o.jsx(s.icon,{className:ae("mr-3 h-5 w-5 flex-shrink-0",n?"text-blue-500":"text-gray-400")}),s.name]},s.name)})})})]})]})}function Ro(){return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(No,{}),o.jsx("div",{className:"lg:pl-64",children:o.jsx("main",{className:"p-4 lg:p-8",children:o.jsx(zi,{})})})]})}const Ao={},rn=r=>{let e;const t=new Set,s=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const f=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(y=>y(e,f))}},n=()=>e,c={setState:s,getState:n,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Ao?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=r(s,n,c);return c},Do=r=>r?rn(r):rn;var li={exports:{}},ci={},ui={exports:{}},di={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=L;function Io(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var $o=typeof Object.is=="function"?Object.is:Io,Mo=kt.useState,Uo=kt.useEffect,Lo=kt.useLayoutEffect,Fo=kt.useDebugValue;function qo(r,e){var t=e(),s=Mo({inst:{value:t,getSnapshot:e}}),n=s[0].inst,i=s[1];return Lo(function(){n.value=t,n.getSnapshot=e,Fr(n)&&i({inst:n})},[r,t,e]),Uo(function(){return Fr(n)&&i({inst:n}),r(function(){Fr(n)&&i({inst:n})})},[r]),Fo(t),t}function Fr(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!$o(r,t)}catch{return!0}}function Bo(r,e){return e()}var Wo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bo:qo;di.useSyncExternalStore=kt.useSyncExternalStore!==void 0?kt.useSyncExternalStore:Wo;ui.exports=di;var zo=ui.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kr=L,Ho=zo;function Go(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Vo=typeof Object.is=="function"?Object.is:Go,Ko=Ho.useSyncExternalStore,Qo=kr.useRef,Jo=kr.useEffect,Yo=kr.useMemo,Xo=kr.useDebugValue;ci.useSyncExternalStoreWithSelector=function(r,e,t,s,n){var i=Qo(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Yo(function(){function c(f){if(!u){if(u=!0,d=f,f=s(f),n!==void 0&&a.hasValue){var y=a.value;if(n(y,f))return h=y}return h=f}if(y=h,Vo(d,f))return y;var v=s(f);return n!==void 0&&n(y,v)?(d=f,y):(d=f,h=v)}var u=!1,d,h,m=t===void 0?null:t;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,t,s,n]);var l=Ko(r,i[0],i[1]);return Jo(function(){a.hasValue=!0,a.value=l},[l]),Xo(l),l};li.exports=ci;var Zo=li.exports;const el=Hi(Zo),hi={},{useDebugValue:tl}=Un,{useSyncExternalStoreWithSelector:rl}=el;let sn=!1;const sl=r=>r;function nl(r,e=sl,t){(hi?"production":void 0)!=="production"&&t&&!sn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),sn=!0);const s=rl(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return tl(s),s}const il=r=>{(hi?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Do(r):r,t=(s,n)=>nl(e,s,n);return Object.assign(t,e),t},al=r=>il,fr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxjb3h0YW55Y2tqenl4eGNzanp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDUzMjcsImV4cCI6MjA2MzkyMTMyN30.W2JgvZdXubvWpKCNZ7TfjLiKANZO1Hlb164fBEKH2dA",VITE_SUPABASE_URL:"https://lcoxtanyckjzyxxcsjzz.supabase.co"},fs=new Map,ar=r=>{const e=fs.get(r);return e?Object.fromEntries(Object.entries(e.stores).map(([t,s])=>[t,s.getState()])):{}},ol=(r,e,t)=>{if(r===void 0)return{type:"untracked",connection:e.connect(t)};const s=fs.get(t.name);if(s)return{type:"tracked",store:r,...s};const n={connection:e.connect(t),stores:{}};return fs.set(t.name,n),{type:"tracked",store:r,...n}},ll=(r,e={})=>(t,s,n)=>{const{enabled:i,anonymousActionType:a,store:l,...c}=e;let u;try{u=(i??(fr?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(fr?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),r(t,s,n);const{connection:d,...h}=ol(l,u,c);let m=!0;n.setState=(v,p,w)=>{const _=t(v,p);if(!m)return _;const b=w===void 0?{type:a||"anonymous"}:typeof w=="string"?{type:w}:w;return l===void 0?(d==null||d.send(b,s()),_):(d==null||d.send({...b,type:`${l}/${b.type}`},{...ar(c.name),[l]:n.getState()}),_)};const f=(...v)=>{const p=m;m=!1,t(...v),m=p},y=r(n.setState,s,n);if(h.type==="untracked"?d==null||d.init(y):(h.stores[h.store]=n,d==null||d.init(Object.fromEntries(Object.entries(h.stores).map(([v,p])=>[v,v===h.store?y:p.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let v=!1;const p=n.dispatch;n.dispatch=(...w)=>{(fr?"production":void 0)!=="production"&&w[0].type==="__setState"&&!v&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),v=!0),p(...w)}}return d.subscribe(v=>{var p;switch(v.type){case"ACTION":if(typeof v.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return qr(v.payload,w=>{if(w.type==="__setState"){if(l===void 0){f(w.state);return}Object.keys(w.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const _=w.state[l];if(_==null)return;JSON.stringify(n.getState())!==JSON.stringify(_)&&f(_);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(w)});case"DISPATCH":switch(v.payload.type){case"RESET":return f(y),l===void 0?d==null?void 0:d.init(n.getState()):d==null?void 0:d.init(ar(c.name));case"COMMIT":if(l===void 0){d==null||d.init(n.getState());return}return d==null?void 0:d.init(ar(c.name));case"ROLLBACK":return qr(v.state,w=>{if(l===void 0){f(w),d==null||d.init(n.getState());return}f(w[l]),d==null||d.init(ar(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return qr(v.state,w=>{if(l===void 0){f(w);return}JSON.stringify(n.getState())!==JSON.stringify(w[l])&&f(w[l])});case"IMPORT_STATE":{const{nextLiftedState:w}=v.payload,_=(p=w.computedStates.slice(-1)[0])==null?void 0:p.state;if(!_)return;f(l===void 0?_:_[l]),d==null||d.send(null,w);return}case"PAUSE_RECORDING":return m=!m}return}}),y},cl=ll,qr=(r,e)=>{let t;try{t=JSON.parse(r)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}t!==void 0&&e(t)};function ul(r,e){let t;try{t=r()}catch{return}return{getItem:n=>{var i;const a=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(n))!=null?i:null;return l instanceof Promise?l.then(a):a(l)},setItem:(n,i)=>t.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>t.removeItem(n)}}const Ht=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Ht(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Ht(s)(t)}}}},dl=(r,e)=>(t,s,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,w)=>({...w,...p}),...e},a=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return r((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...p)},s,n);const d=Ht(i.serialize),h=()=>{const p=i.partialize({...s()});let w;const _=d({state:p,version:i.version}).then(b=>u.setItem(i.name,b)).catch(b=>{w=b});if(w)throw w;return _},m=n.setState;n.setState=(p,w)=>{m(p,w),h()};const f=r((...p)=>{t(...p),h()},s,n);let y;const v=()=>{var p;if(!u)return;a=!1,l.forEach(_=>_(s()));const w=((p=i.onRehydrateStorage)==null?void 0:p.call(i,s()))||void 0;return Ht(u.getItem.bind(u))(i.name).then(_=>{if(_)return i.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return i.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var b;return y=i.merge(_,(b=s())!=null?b:f),t(y,!0),h()}).then(()=>{w==null||w(y,void 0),a=!0,c.forEach(_=>_(y))}).catch(_=>{w==null||w(void 0,_)})};return n.persist={setOptions:p=>{i={...i,...p},p.getStorage&&(u=p.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},v(),y||f},hl=(r,e)=>(t,s,n)=>{let i={storage:ul(()=>localStorage),partialize:v=>v,version:0,merge:(v,p)=>({...p,...v}),...e},a=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return r((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...v)},s,n);const d=()=>{const v=i.partialize({...s()});return u.setItem(i.name,{state:v,version:i.version})},h=n.setState;n.setState=(v,p)=>{h(v,p),d()};const m=r((...v)=>{t(...v),d()},s,n);n.getInitialState=()=>m;let f;const y=()=>{var v,p;if(!u)return;a=!1,l.forEach(_=>{var b;return _((b=s())!=null?b:m)});const w=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(v=s())!=null?v:m))||void 0;return Ht(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var b;const[x,k]=_;if(f=i.merge(k,(b=s())!=null?b:m),t(f,!0),x)return d()}).then(()=>{w==null||w(f,void 0),f=s(),a=!0,c.forEach(_=>_(f))}).catch(_=>{w==null||w(void 0,_)})};return n.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},i.skipHydration||y(),f||m},fl=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((fr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),dl(r,e)):hl(r,e),ml=fl,nn=()=>{const r=new Date,e=new Date;return e.setDate(e.getDate()-30),[e,r]},Pt=al()(cl(ml((r,e)=>({dateRange:nn(),brands:[],locations:[],categories:[],setDateRange:t=>{r({dateRange:t}),e().updateURL()},setBrands:t=>{r({brands:t}),e().updateURL()},setLocations:t=>{r({locations:t}),e().updateURL()},setCategories:t=>{r({categories:t}),e().updateURL()},resetFilters:()=>{r({dateRange:nn(),brands:[],locations:[],categories:[]}),e().updateURL()},syncWithURL:()=>{if(typeof window>"u")return;const t=new URLSearchParams(window.location.search),s={},n=t.get("startDate"),i=t.get("endDate");n&&i&&(s.dateRange=[new Date(n),new Date(i)]);const a=t.get("brands");a&&(s.brands=a.split(",").filter(Boolean));const l=t.get("locations");l&&(s.locations=l.split(",").filter(Boolean));const c=t.get("categories");c&&(s.categories=c.split(",").filter(Boolean)),Object.keys(s).length>0&&r(s)},updateURL:()=>{if(typeof window>"u")return;const t=e(),s=new URLSearchParams;s.set("startDate",t.dateRange[0].toISOString().split("T")[0]),s.set("endDate",t.dateRange[1].toISOString().split("T")[0]),t.brands.length>0&&s.set("brands",t.brands.join(",")),t.locations.length>0&&s.set("locations",t.locations.join(",")),t.categories.length>0&&s.set("categories",t.categories.join(","));const n=`${window.location.pathname}?${s.toString()}`;window.history.replaceState({},"",n)}}),{name:"filter-storage",partialize:r=>({dateRange:r.dateRange,brands:r.brands,locations:r.locations,categories:r.categories})}),{name:"filter-store"})),gl=()=>{const r=Pt(e=>e.syncWithURL);L.useEffect(()=>{r();const e=()=>{r()};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[r]),L.useEffect(()=>{const e=()=>{r()},t=window.history.pushState,s=window.history.replaceState;return window.history.pushState=function(...n){t.apply(this,n),e()},window.history.replaceState=function(...n){s.apply(this,n),e()},()=>{window.history.pushState=t,window.history.replaceState=s}},[r])};function gr(r){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(r)}function rt(r){if(r===null||r===!0||r===!1)return NaN;var e=Number(r);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function te(r,e){if(e.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+e.length+" present")}function be(r){te(1,arguments);var e=Object.prototype.toString.call(r);return r instanceof Date||gr(r)==="object"&&e==="[object Date]"?new Date(r.getTime()):typeof r=="number"||e==="[object Number]"?new Date(r):((typeof r=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function pl(r,e){te(2,arguments);var t=be(r).getTime(),s=rt(e);return new Date(t+s)}var vl={};function Tr(){return vl}function yl(r){var e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return e.setUTCFullYear(r.getFullYear()),r.getTime()-e.getTime()}function bl(r){return te(1,arguments),r instanceof Date||gr(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function wl(r){if(te(1,arguments),!bl(r)&&typeof r!="number")return!1;var e=be(r);return!isNaN(Number(e))}function xl(r,e){te(2,arguments);var t=rt(e);return pl(r,-t)}var _l=864e5;function jl(r){te(1,arguments);var e=be(r),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var s=e.getTime(),n=t-s;return Math.floor(n/_l)+1}function pr(r){te(1,arguments);var e=1,t=be(r),s=t.getUTCDay(),n=(s<e?7:0)+s-e;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function fi(r){te(1,arguments);var e=be(r),t=e.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(t+1,0,4),s.setUTCHours(0,0,0,0);var n=pr(s),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var a=pr(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Sl(r){te(1,arguments);var e=fi(r),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var s=pr(t);return s}var kl=6048e5;function Tl(r){te(1,arguments);var e=be(r),t=pr(e).getTime()-Sl(e).getTime();return Math.round(t/kl)+1}function vr(r,e){var t,s,n,i,a,l,c,u;te(1,arguments);var d=Tr(),h=rt((t=(s=(n=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=be(r),f=m.getUTCDay(),y=(f<h?7:0)+f-h;return m.setUTCDate(m.getUTCDate()-y),m.setUTCHours(0,0,0,0),m}function mi(r,e){var t,s,n,i,a,l,c,u;te(1,arguments);var d=be(r),h=d.getUTCFullYear(),m=Tr(),f=rt((t=(s=(n=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:m.firstWeekContainsDate)!==null&&s!==void 0?s:(c=m.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(h+1,0,f),y.setUTCHours(0,0,0,0);var v=vr(y,e),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var w=vr(p,e);return d.getTime()>=v.getTime()?h+1:d.getTime()>=w.getTime()?h:h-1}function Cl(r,e){var t,s,n,i,a,l,c,u;te(1,arguments);var d=Tr(),h=rt((t=(s=(n=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),m=mi(r,e),f=new Date(0);f.setUTCFullYear(m,0,h),f.setUTCHours(0,0,0,0);var y=vr(f,e);return y}var Pl=6048e5;function Ol(r,e){te(1,arguments);var t=be(r),s=vr(t,e).getTime()-Cl(t,e).getTime();return Math.round(s/Pl)+1}function U(r,e){for(var t=r<0?"-":"",s=Math.abs(r).toString();s.length<e;)s="0"+s;return t+s}var Pe={y:function(e,t){var s=e.getUTCFullYear(),n=s>0?s:1-s;return U(t==="yy"?n%100:n,t.length)},M:function(e,t){var s=e.getUTCMonth();return t==="M"?String(s+1):U(s+1,2)},d:function(e,t){return U(e.getUTCDate(),t.length)},a:function(e,t){var s=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(e,t){return U(e.getUTCHours()%12||12,t.length)},H:function(e,t){return U(e.getUTCHours(),t.length)},m:function(e,t){return U(e.getUTCMinutes(),t.length)},s:function(e,t){return U(e.getUTCSeconds(),t.length)},S:function(e,t){var s=t.length,n=e.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,s-3));return U(i,t.length)}},nt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},El={G:function(e,t,s){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){var n=e.getUTCFullYear(),i=n>0?n:1-n;return s.ordinalNumber(i,{unit:"year"})}return Pe.y(e,t)},Y:function(e,t,s,n){var i=mi(e,n),a=i>0?i:1-i;if(t==="YY"){var l=a%100;return U(l,2)}return t==="Yo"?s.ordinalNumber(a,{unit:"year"}):U(a,t.length)},R:function(e,t){var s=fi(e);return U(s,t.length)},u:function(e,t){var s=e.getUTCFullYear();return U(s,t.length)},Q:function(e,t,s){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return U(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return U(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){var n=e.getUTCMonth();switch(t){case"M":case"MM":return Pe.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return U(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){var i=Ol(e,n);return t==="wo"?s.ordinalNumber(i,{unit:"week"}):U(i,t.length)},I:function(e,t,s){var n=Tl(e);return t==="Io"?s.ordinalNumber(n,{unit:"week"}):U(n,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getUTCDate(),{unit:"date"}):Pe.d(e,t)},D:function(e,t,s){var n=jl(e);return t==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):U(n,t.length)},E:function(e,t,s){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){var i=e.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return U(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){var i=e.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return U(a,t.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,s){var n=e.getUTCDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return U(i,t.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){var n=e.getUTCHours(),i=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,s){var n=e.getUTCHours(),i;switch(n===12?i=nt.noon:n===0?i=nt.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,s){var n=e.getUTCHours(),i;switch(n>=17?i=nt.evening:n>=12?i=nt.afternoon:n>=4?i=nt.morning:i=nt.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){var n=e.getUTCHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return Pe.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Pe.H(e,t)},K:function(e,t,s){var n=e.getUTCHours()%12;return t==="Ko"?s.ordinalNumber(n,{unit:"hour"}):U(n,t.length)},k:function(e,t,s){var n=e.getUTCHours();return n===0&&(n=24),t==="ko"?s.ordinalNumber(n,{unit:"hour"}):U(n,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Pe.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Pe.s(e,t)},S:function(e,t){return Pe.S(e,t)},X:function(e,t,s,n){var i=n._originalDate||e,a=i.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return on(a);case"XXXX":case"XX":return ze(a);case"XXXXX":case"XXX":default:return ze(a,":")}},x:function(e,t,s,n){var i=n._originalDate||e,a=i.getTimezoneOffset();switch(t){case"x":return on(a);case"xxxx":case"xx":return ze(a);case"xxxxx":case"xxx":default:return ze(a,":")}},O:function(e,t,s,n){var i=n._originalDate||e,a=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+an(a,":");case"OOOO":default:return"GMT"+ze(a,":")}},z:function(e,t,s,n){var i=n._originalDate||e,a=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+an(a,":");case"zzzz":default:return"GMT"+ze(a,":")}},t:function(e,t,s,n){var i=n._originalDate||e,a=Math.floor(i.getTime()/1e3);return U(a,t.length)},T:function(e,t,s,n){var i=n._originalDate||e,a=i.getTime();return U(a,t.length)}};function an(r,e){var t=r>0?"-":"+",s=Math.abs(r),n=Math.floor(s/60),i=s%60;if(i===0)return t+String(n);var a=e;return t+String(n)+a+U(i,2)}function on(r,e){if(r%60===0){var t=r>0?"-":"+";return t+U(Math.abs(r)/60,2)}return ze(r,e)}function ze(r,e){var t=e||"",s=r>0?"-":"+",n=Math.abs(r),i=U(Math.floor(n/60),2),a=U(n%60,2);return s+i+t+a}var ln=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gi=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Nl=function(e,t){var s=e.match(/(P+)(p+)?/)||[],n=s[1],i=s[2];if(!i)return ln(e,t);var a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",ln(n,t)).replace("{{time}}",gi(i,t))},Rl={p:gi,P:Nl},Al=["D","DD"],Dl=["YY","YYYY"];function Il(r){return Al.indexOf(r)!==-1}function $l(r){return Dl.indexOf(r)!==-1}function cn(r,e,t){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ml={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ul=function(e,t,s){var n,i=Ml[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function Br(r){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):r.defaultWidth,s=r.formats[t]||r.formats[r.defaultWidth];return s}}var Ll={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fl={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ql={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bl={date:Br({formats:Ll,defaultWidth:"full"}),time:Br({formats:Fl,defaultWidth:"full"}),dateTime:Br({formats:ql,defaultWidth:"full"})},Wl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zl=function(e,t,s,n){return Wl[e]};function It(r){return function(e,t){var s=t!=null&&t.context?String(t.context):"standalone",n;if(s==="formatting"&&r.formattingValues){var i=r.defaultFormattingWidth||r.defaultWidth,a=t!=null&&t.width?String(t.width):i;n=r.formattingValues[a]||r.formattingValues[i]}else{var l=r.defaultWidth,c=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[c]||r.values[l]}var u=r.argumentCallback?r.argumentCallback(e):e;return n[u]}}var Hl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gl={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vl={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kl={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ql={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jl={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yl=function(e,t){var s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Xl={ordinalNumber:Yl,era:It({values:Hl,defaultWidth:"wide"}),quarter:It({values:Gl,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:It({values:Vl,defaultWidth:"wide"}),day:It({values:Kl,defaultWidth:"wide"}),dayPeriod:It({values:Ql,defaultWidth:"wide",formattingValues:Jl,defaultFormattingWidth:"wide"})};function $t(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;var a=i[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?ec(l,function(h){return h.test(a)}):Zl(l,function(h){return h.test(a)}),u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;var d=e.slice(a.length);return{value:u,rest:d}}}function Zl(r,e){for(var t in r)if(r.hasOwnProperty(t)&&e(r[t]))return t}function ec(r,e){for(var t=0;t<r.length;t++)if(e(r[t]))return t}function tc(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=e.match(r.matchPattern);if(!s)return null;var n=s[0],i=e.match(r.parsePattern);if(!i)return null;var a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;var l=e.slice(n.length);return{value:a,rest:l}}}var rc=/^(\d+)(th|st|nd|rd)?/i,sc=/\d+/i,nc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ic={any:[/^b/i,/^(a|c)/i]},ac={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oc={any:[/1/i,/2/i,/3/i,/4/i]},lc={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cc={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uc={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dc={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fc={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mc={ordinalNumber:tc({matchPattern:rc,parsePattern:sc,valueCallback:function(e){return parseInt(e,10)}}),era:$t({matchPatterns:nc,defaultMatchWidth:"wide",parsePatterns:ic,defaultParseWidth:"any"}),quarter:$t({matchPatterns:ac,defaultMatchWidth:"wide",parsePatterns:oc,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$t({matchPatterns:lc,defaultMatchWidth:"wide",parsePatterns:cc,defaultParseWidth:"any"}),day:$t({matchPatterns:uc,defaultMatchWidth:"wide",parsePatterns:dc,defaultParseWidth:"any"}),dayPeriod:$t({matchPatterns:hc,defaultMatchWidth:"any",parsePatterns:fc,defaultParseWidth:"any"})},gc={code:"en-US",formatDistance:Ul,formatLong:Bl,formatRelative:zl,localize:Xl,match:mc,options:{weekStartsOn:0,firstWeekContainsDate:1}},pc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yc=/^'([^]*?)'?$/,bc=/''/g,wc=/[a-zA-Z]/;function un(r,e,t){var s,n,i,a,l,c,u,d,h,m,f,y,v,p;te(2,arguments);var w=String(e),_=Tr(),b=(s=(n=void 0)!==null&&n!==void 0?n:_.locale)!==null&&s!==void 0?s:gc,x=rt((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:_.firstWeekContainsDate)!==null&&a!==void 0?a:(u=_.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=rt((h=(m=(f=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&f!==void 0?f:_.weekStartsOn)!==null&&m!==void 0?m:(v=_.locale)===null||v===void 0||(p=v.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&h!==void 0?h:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw new RangeError("locale must contain localize property");if(!b.formatLong)throw new RangeError("locale must contain formatLong property");var j=be(r);if(!wl(j))throw new RangeError("Invalid time value");var P=yl(j),G=xl(j,P),M={firstWeekContainsDate:x,weekStartsOn:k,locale:b,_originalDate:j},B=w.match(vc).map(function(z){var E=z[0];if(E==="p"||E==="P"){var oe=Rl[E];return oe(z,b.formatLong)}return z}).join("").match(pc).map(function(z){if(z==="''")return"'";var E=z[0];if(E==="'")return xc(z);var oe=El[E];if(oe)return $l(z)&&cn(z,e,String(r)),Il(z)&&cn(z,e,String(r)),oe(G,z,b.localize,M);if(E.match(wc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return z}).join("");return B}function xc(r){var e=r.match(yc);return e?e[1].replace(bc,"'"):r}function _c({value:r,onChange:e,className:t}){const[s,n]=r,i=l=>{const c=new Date(l.target.value);e([c,n])},a=l=>{const c=new Date(l.target.value);e([s,c])};return o.jsx("div",{className:ae("grid gap-2",t),children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"grid gap-1",children:[o.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),o.jsx("input",{type:"date",value:un(s,"yyyy-MM-dd"),onChange:i,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),o.jsxs("div",{className:"grid gap-1",children:[o.jsx("label",{className:"text-sm font-medium",children:"End Date"}),o.jsx("input",{type:"date",value:un(n,"yyyy-MM-dd"),onChange:a,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})})}const dn=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,hn=Ln,jc=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return hn(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,a=Object.keys(n).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const m=dn(d)||dn(h);return n[u][m]}),l=t&&Object.entries(t).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(y=>{let[v,p]=y;return Array.isArray(p)?p.includes({...i,...l}[v]):{...i,...l}[v]===p})?[...u,h,m]:u},[]);return hn(r,a,c,t==null?void 0:t.class,t==null?void 0:t.className)},Sc=jc("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ns=L.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const a=s?qi:"button";return o.jsx(a,{className:ae(Sc({variant:e,size:t,className:r})),ref:i,...n})});Ns.displayName="Button";function Wr({options:r,value:e,onChange:t,placeholder:s="Select items...",className:n}){const[i,a]=L.useState(!1),l=u=>{e.includes(u)?t(e.filter(d=>d!==u)):t([...e,u])},c=u=>{t(e.filter(d=>d!==u))};return o.jsxs("div",{className:"relative",children:[o.jsxs(Ns,{variant:"outline",role:"combobox","aria-expanded":i,className:ae("justify-between w-full",n),onClick:()=>a(!i),children:[o.jsxs("div",{className:"flex flex-wrap gap-1 max-w-full",children:[e.length===0&&o.jsx("span",{className:"text-muted-foreground",children:s}),e.slice(0,3).map(u=>{const d=r.find(h=>h.value===u);return o.jsxs("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 mr-1 mb-1 bg-secondary text-secondary-foreground",children:[d==null?void 0:d.label,o.jsx("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:h=>{h.key==="Enter"&&c(u)},onMouseDown:h=>{h.preventDefault(),h.stopPropagation()},onClick:()=>c(u),children:o.jsx(oi,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},u)}),e.length>3&&o.jsxs("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 mr-1 mb-1 bg-secondary text-secondary-foreground",children:["+",e.length-3," more"]})]}),o.jsx(wo,{className:"h-4 w-4 shrink-0 opacity-50"})]}),i&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 max-h-64 overflow-auto rounded-md border bg-popover p-0 text-popover-foreground shadow-md",children:[o.jsx("div",{className:"p-1",children:o.jsx("input",{placeholder:"Search...",className:"flex h-8 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 px-2"})}),o.jsxs("div",{className:"p-1",children:[r.length===0&&o.jsx("div",{className:"py-6 text-center text-sm",children:"No options found."}),r.map(u=>o.jsxs("div",{className:"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:()=>l(u.value),children:[o.jsx(bo,{className:ae("mr-2 h-4 w-4",e.includes(u.value)?"opacity-100":"opacity-0")}),u.label]},u.value))]})]})]})}const N=L.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ae("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));N.displayName="Card";const F=L.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ae("flex flex-col space-y-1.5 p-6",r),...e}));F.displayName="CardHeader";const q=L.forwardRef(({className:r,...e},t)=>o.jsx("h3",{ref:t,className:ae("text-2xl font-semibold leading-none tracking-tight",r),...e}));q.displayName="CardTitle";const kc=L.forwardRef(({className:r,...e},t)=>o.jsx("p",{ref:t,className:ae("text-sm text-muted-foreground",r),...e}));kc.displayName="CardDescription";const R=L.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ae("p-6 pt-0",r),...e}));R.displayName="CardContent";const Tc=L.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ae("flex items-center p-6 pt-0",r),...e}));Tc.displayName="CardFooter";const Cc=[{value:"nestle",label:"Nestle"},{value:"unilever",label:"Unilever"},{value:"pg",label:"Procter & Gamble"},{value:"coca-cola",label:"Coca-Cola"},{value:"pepsi",label:"PepsiCo"},{value:"jollibee",label:"Jollibee"},{value:"san-miguel",label:"San Miguel"},{value:"urc",label:"Universal Robina"}],Pc=[{value:"ncr",label:"National Capital Region"},{value:"region-1",label:"Region 1 (Ilocos)"},{value:"region-2",label:"Region 2 (Cagayan Valley)"},{value:"region-3",label:"Region 3 (Central Luzon)"},{value:"region-4a",label:"Region 4A (CALABARZON)"},{value:"region-4b",label:"Region 4B (MIMAROPA)"},{value:"region-5",label:"Region 5 (Bicol)"},{value:"region-6",label:"Region 6 (Western Visayas)"},{value:"region-7",label:"Region 7 (Central Visayas)"},{value:"region-8",label:"Region 8 (Eastern Visayas)"},{value:"region-9",label:"Region 9 (Zamboanga Peninsula)"},{value:"region-10",label:"Region 10 (Northern Mindanao)"},{value:"region-11",label:"Region 11 (Davao)"},{value:"region-12",label:"Region 12 (SOCCSKSARGEN)"}],Oc=[{value:"beverages",label:"Beverages"},{value:"snacks",label:"Snacks & Confectionery"},{value:"personal-care",label:"Personal Care"},{value:"household",label:"Household Products"},{value:"dairy",label:"Dairy Products"},{value:"frozen",label:"Frozen Foods"},{value:"bakery",label:"Bakery & Bread"},{value:"condiments",label:"Condiments & Sauces"},{value:"instant",label:"Instant Foods"},{value:"health",label:"Health & Wellness"}];function Cr(){const{dateRange:r,brands:e,locations:t,categories:s,setDateRange:n,setBrands:i,setLocations:a,setCategories:l,resetFilters:c}=Pt();return gl(),o.jsxs(N,{className:"p-4 mb-6 bg-white shadow-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date Range"}),o.jsx(_c,{value:r,onChange:n,className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Brands"}),o.jsx(Wr,{value:e,onChange:i,options:Cc,placeholder:"Select brands...",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Locations"}),o.jsx(Wr,{value:t,onChange:a,options:Pc,placeholder:"Select locations...",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Categories"}),o.jsx(Wr,{value:s,onChange:l,options:Oc,placeholder:"Select categories...",className:"w-full"})]})]}),o.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Active filters: ",[e.length>0&&`${e.length} brand${e.length>1?"s":""}`,t.length>0&&`${t.length} location${t.length>1?"s":""}`,s.length>0&&`${s.length} categor${s.length>1?"ies":"y"}`].filter(Boolean).join(", ")||"None"]}),o.jsxs(Ns,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-2",children:[o.jsx(To,{className:"h-4 w-4"}),"Reset Filters"]})]})]})}function or({title:r,value:e,format:t="number",trend:s,subtitle:n,className:i}){const a=c=>{if(typeof c=="string")return c;switch(t){case"currency":return xr(c);case"percentage":return si(c);default:return _r(c)}},l=()=>{if(s===void 0)return null;const c=s>0,u=s<0;return o.jsxs("div",{className:`flex items-center text-sm ${po(s)}`,children:[c&&o.jsx(Sr,{className:"h-4 w-4 mr-1"}),u&&o.jsx(Eo,{className:"h-4 w-4 mr-1"}),!c&&!u&&o.jsx(ko,{className:"h-4 w-4 mr-1"}),Math.abs(s).toFixed(1),"%"]})};return o.jsxs(N,{className:i,children:[o.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(q,{className:"text-sm font-medium text-muted-foreground",children:r}),l()]}),o.jsxs(R,{children:[o.jsx("div",{className:"text-2xl font-bold",children:a(e)}),n&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})]})}function pi({data:r,dataKey:e="value",color:t="#3b82f6",height:s=300,formatValue:n="number"}){const i=l=>typeof l!="number"?l:n==="currency"?xr(l):_r(l),a=l=>typeof l!="number"?l:n==="currency"?l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:`${l}`:l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toString();return o.jsx(Ss,{width:"100%",height:s,children:o.jsxs(Qi,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[o.jsx(Fn,{strokeDasharray:"3 3",className:"stroke-muted"}),o.jsx(Jr,{dataKey:"date",className:"text-xs",tickFormatter:l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),o.jsx(Yr,{className:"text-xs",tickFormatter:a}),o.jsx(ks,{labelFormatter:l=>new Date(l).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),formatter:l=>[i(l),e],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),o.jsx(Ji,{type:"monotone",dataKey:e,stroke:t,strokeWidth:2,dot:{fill:t,strokeWidth:2,r:4},activeDot:{r:6,stroke:t,strokeWidth:2}})]})})}function Gt({data:r,dataKey:e="value",color:t="#10b981",height:s=300,formatValue:n="number",layout:i="vertical"}){const a=c=>typeof c!="number"?c:n==="currency"?xr(c):_r(c),l=c=>typeof c!="number"?c:n==="currency"?c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(1)}K`:`${c}`:c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(1)}K`:c.toString();return o.jsx(Ss,{width:"100%",height:s,children:o.jsxs(Yi,{data:r,layout:i,margin:{top:5,right:30,left:20,bottom:5},children:[o.jsx(Fn,{strokeDasharray:"3 3",className:"stroke-muted"}),i==="vertical"?o.jsxs(o.Fragment,{children:[o.jsx(Jr,{type:"number",className:"text-xs",tickFormatter:l}),o.jsx(Yr,{type:"category",dataKey:"name",className:"text-xs",width:100})]}):o.jsxs(o.Fragment,{children:[o.jsx(Jr,{type:"category",dataKey:"name",className:"text-xs"}),o.jsx(Yr,{type:"number",className:"text-xs",tickFormatter:l})]}),o.jsx(ks,{formatter:c=>[a(c),e],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),o.jsx(Xi,{dataKey:e,fill:t,radius:i==="vertical"?[0,4,4,0]:[4,4,0,0]})]})})}const Ec="modulepreload",Nc=function(r){return"/"+r},fn={},Zt=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Nc(c),c in fn)return;fn[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Ec,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return n.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Rc=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Zt(async()=>{const{default:s}=await Promise.resolve().then(()=>Ot);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Rs extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ac extends Rs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dc extends Rs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ic extends Rs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ms;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ms||(ms={}));var $c=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Mc{constructor(e,{headers:t={},customFetch:s,region:n=ms.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Rc(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return $c(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(y=>{throw new Ac(y)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Dc(d);if(!d.ok)throw new Ic(d);let m=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield d.json():m==="application/octet-stream"?f=yield d.blob():m==="text/event-stream"?f=d:m==="multipart/form-data"?f=yield d.formData():f=yield d.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var ie={},As={},Pr={},er={},Or={},Er={},Uc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tt=Uc();const Lc=Tt.fetch,vi=Tt.fetch.bind(Tt),yi=Tt.Headers,Fc=Tt.Request,qc=Tt.Response,Ot=Object.freeze(Object.defineProperty({__proto__:null,Headers:yi,Request:Fc,Response:qc,default:vi,fetch:Lc},Symbol.toStringTag,{value:"Module"})),Bc=Gi(Ot);var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});let Wc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Nr.default=Wc;var bi=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Er,"__esModule",{value:!0});const zc=bi(Bc),Hc=bi(Nr);let Gc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=zc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=w:d=JSON.parse(w))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),p=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&p&&p.length>1&&(h=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,f="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,f="OK")}catch{i.status===404&&v===""?(m=204,f="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,f="OK"),u&&this.shouldThrowOnError)throw new Hc.default(u)}return{error:u,data:d,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Er.default=Gc;var Vc=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Or,"__esModule",{value:!0});const Kc=Vc(Er);let Qc=class extends Kc.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Or.default=Qc;var Jc=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});const Yc=Jc(Or);let Xc=class extends Yc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};er.default=Xc;var Zc=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pr,"__esModule",{value:!0});const Mt=Zc(er);let eu=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new Mt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Mt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Mt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Mt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Mt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Pr.default=eu;var Rr={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.version=void 0;Ar.version="0.0.0-automated";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.DEFAULT_HEADERS=void 0;const tu=Ar;Rr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tu.version}`};var wi=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(As,"__esModule",{value:!0});const ru=wi(Pr),su=wi(er),nu=Rr;let iu=class xi{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},nu.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new ru.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xi(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new su.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};As.default=iu;var Et=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ie,"__esModule",{value:!0});ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const _i=Et(As);ie.PostgrestClient=_i.default;const ji=Et(Pr);ie.PostgrestQueryBuilder=ji.default;const Si=Et(er);ie.PostgrestFilterBuilder=Si.default;const ki=Et(Or);ie.PostgrestTransformBuilder=ki.default;const Ti=Et(Er);ie.PostgrestBuilder=Ti.default;const Ci=Et(Nr);ie.PostgrestError=Ci.default;var au=ie.default={PostgrestClient:_i.default,PostgrestQueryBuilder:ji.default,PostgrestFilterBuilder:Si.default,PostgrestTransformBuilder:ki.default,PostgrestBuilder:Ti.default,PostgrestError:Ci.default};const{PostgrestClient:ou,PostgrestQueryBuilder:fh,PostgrestFilterBuilder:mh,PostgrestTransformBuilder:gh,PostgrestBuilder:ph,PostgrestError:vh}=au;let gs;typeof window>"u"?gs=require("ws"):gs=window.WebSocket;const lu="2.11.10",cu={"X-Client-Info":`realtime-js/${lu}`},uu="1.0.0",Pi=1e4,du=1e3;var dt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(dt||(dt={}));var X;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(X||(X={}));var fe;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fe||(fe={}));var ps;(function(r){r.websocket="websocket"})(ps||(ps={}));var Ge;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ge||(Ge={}));class hu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Oi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(W||(W={}));const mn=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=fu(a,r,e,n),i),{})},fu=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?Ei(i,a):vs(a)},Ei=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return vu(e,t)}switch(r){case W.bool:return mu(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return gu(e);case W.json:case W.jsonb:return pu(e);case W.timestamp:return yu(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return vs(e);default:return vs(e)}},vs=r=>r,mu=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},gu=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},pu=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},vu=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Ei(e,l))}return r},yu=r=>typeof r=="string"?r.replace(" ","T"):r,Ni=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class zr{constructor(e,t,s={},n=Pi){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gn;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(gn||(gn={}));class Ft{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ft.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=Ft.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ft.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const m=d.map(p=>p.presence_ref),f=h.map(p=>p.presence_ref),y=d.filter(p=>f.indexOf(p.presence_ref)<0),v=h.filter(p=>m.indexOf(p.presence_ref)<0);y.length>0&&(l[u]=y),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}s(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pn;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(pn||(pn={}));var vn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(vn||(vn={}));var Se;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Se||(Se={}));class Ds{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zr(this,fe.join,this.params,this.timeout),this.rejoinTimer=new Oi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fe.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ft(this),this.broadcastEndpointURL=Ni(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Se.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Se.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Se.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let v=0;v<f;v++){const p=m[v],{filter:{event:w,schema:_,table:b,filter:x}}=p,k=d&&d[v];if(k&&k.event===w&&k.schema===_&&k.table===b&&k.filter===x)y.push(Object.assign(Object.assign({},p),{id:k.id}));else{this.unsubscribe(),this.state=X.errored,e==null||e(Se.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Se.SUBSCRIBED);return}}).receive("error",d=>{this.state=X.errored,e==null||e(Se.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Se.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fe.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new zr(this,fe.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new zr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=fe;if(s&&[l,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let m=this._onMessage(a,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var y,v,p;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((p=(v=f.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(f=>f.callback(m,s)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var y,v,p,w,_,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const x=f.id,k=(y=f.filter)===null||y===void 0?void 0:y.event;return x&&((v=t.ids)===null||v===void 0?void 0:v.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const x=(_=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return x==="*"||x===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:v,table:p,commit_timestamp:w,type:_,errors:b}=y;m=Object.assign(Object.assign({},{schema:v,table:p,commit_timestamp:w,eventType:_,new:{},old:{},errors:b}),this._getPayloadRecords(y))}f.callback(m,s)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Ds.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fe.close,{},e)}_onError(e){this._on(fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mn(e.columns,e.old_record)),t}}const yn=()=>{},bu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wu{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=cu,this.params={},this.timeout=Pi,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yn,this.ref=0,this.logger=yn,this.conn=null,this.sendBuffer=[],this.serializer=new hu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Zt(async()=>{const{default:c}=await Promise.resolve().then(()=>Ot);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${ps.websocket}`,this.httpEndpoint=Ni(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=gs),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new xu(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uu}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case dt.connecting:return Ge.Connecting;case dt.open:return Ge.Open;case dt.closing:return Ge.Closing;default:return Ge.Closed}}isConnected(){return this.connectionState()===Ge.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Ds(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(fe.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(du,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([bu],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class xu{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=dt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Is extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class _u extends Is{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ys extends Is{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ju=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Ri=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Zt(async()=>{const{default:s}=await Promise.resolve().then(()=>Ot);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Su=()=>ju(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zt(()=>Promise.resolve().then(()=>Ot),void 0)).Response:Response}),bs=r=>{if(Array.isArray(r))return r.map(t=>bs(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=bs(s)}),e};var st=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Hr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ku=(r,e,t)=>st(void 0,void 0,void 0,function*(){const s=yield Su();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new _u(Hr(n),r.status||500))}).catch(n=>{e(new ys(Hr(n),n))}):e(new ys(Hr(r),r))}),Tu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function tr(r,e,t,s,n,i){return st(this,void 0,void 0,function*(){return new Promise((a,l)=>{r(t,Tu(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>ku(c,l,s))})})}function yr(r,e,t,s){return st(this,void 0,void 0,function*(){return tr(r,"GET",e,t,s)})}function Ne(r,e,t,s,n){return st(this,void 0,void 0,function*(){return tr(r,"POST",e,s,n,t)})}function Cu(r,e,t,s,n){return st(this,void 0,void 0,function*(){return tr(r,"PUT",e,s,n,t)})}function Pu(r,e,t,s){return st(this,void 0,void 0,function*(){return tr(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Ai(r,e,t,s,n){return st(this,void 0,void 0,function*(){return tr(r,"DELETE",e,s,n,t)})}var re=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Ou={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Eu{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ri(n)}uploadOrUpdate(e,t,s,n){return re(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},bn),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}upload(e,t,s){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:bn.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Q(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Ne(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Is("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}update(e,t,s){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return re(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}copy(e,t,s){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield Ne(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Ne(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return re(this,void 0,void 0,function*(){try{const n=yield Ne(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}download(e,t){return re(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield yr(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Q(l))return{data:null,error:l};throw l}})}info(e){return re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield yr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bs(s),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}exists(e){return re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Pu(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Q(s)&&s instanceof ys){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}list(e,t,s){return re(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ou),t),{prefix:e||""});return{data:yield Ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Nu="2.7.1",Ru={"X-Client-Info":`storage-js/${Nu}`};var it=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Au{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Ru),t),this.fetch=Ri(s)}listBuckets(){return it(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return it(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return it(this,void 0,void 0,function*(){try{return{data:yield Cu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}emptyBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}}class Du extends Au{constructor(e,t={},s){super(e,t,s)}from(e){return new Eu(this.url,this.headers,e,this.fetch)}}const Iu="2.50.0";let Lt="";typeof Deno<"u"?Lt="deno":typeof document<"u"?Lt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lt="react-native":Lt="node";const $u={"X-Client-Info":`supabase-js-${Lt}/${Iu}`},Mu={headers:$u},Uu={schema:"public"},Lu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fu={};var qu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Bu=r=>{let e;return r?e=r:typeof fetch>"u"?e=vi:e=fetch,(...t)=>e(...t)},Wu=()=>typeof Headers>"u"?yi:Headers,zu=(r,e,t)=>{const s=Bu(t),n=Wu();return(i,a)=>qu(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var Hu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};function Gu(r){return r.endsWith("/")?r:r+"/"}function Vu(r,e){var t,s;const{db:n,auth:i,realtime:a,global:l}=r,{db:c,auth:u,realtime:d,global:h}=e,m={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Hu(this,void 0,void 0,function*(){return""})};return r.accessToken?m.accessToken=r.accessToken:delete m.accessToken,m}const Di="2.70.0",ct=30*1e3,ws=3,Gr=ws*ct,Ku="http://localhost:9999",Qu="supabase.auth.token",Ju={"X-Client-Info":`gotrue-js/${Di}`},xs="X-Supabase-Api-Version",Ii={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xu=6e5;class $s extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function C(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Zu extends $s{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function ed(r){return C(r)&&r.name==="AuthApiError"}class $i extends $s{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends $s{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ee extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function td(r){return C(r)&&r.name==="AuthSessionMissingError"}class lr extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cr extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ur extends Be{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rd(r){return C(r)&&r.name==="AuthImplicitGrantRedirectError"}class wn extends Be{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _s extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Vr(r){return C(r)&&r.name==="AuthRetryableFetchError"}class xn extends Be{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class qt extends Be{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const br="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_n=` 	
\r=`.split(""),sd=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<_n.length;e+=1)r[_n[e].charCodeAt(0)]=-2;for(let e=0;e<br.length;e+=1)r[br[e].charCodeAt(0)]=e;return r})();function jn(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(br[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(br[s]),e.queuedBits-=6}}function Mi(r,e,t){const s=sd[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Sn(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{ad(a,s,t)};for(let a=0;a<r.length;a+=1)Mi(r.charCodeAt(a),n,i);return e.join("")}function nd(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function id(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}nd(s,e)}}function ad(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function od(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Mi(r.charCodeAt(n),t,s);return new Uint8Array(e)}function ld(r){const e=[];return id(r,t=>e.push(t)),new Uint8Array(e)}function cd(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>jn(n,t,s)),jn(null,t,s),e.join("")}function ud(r){return Math.round(Date.now()/1e3)+r}function dd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof window<"u"&&typeof document<"u",We={tested:!1,writable:!1},Bt=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(We.tested)return We.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),We.tested=!0,We.writable=!0}catch{We.tested=!0,We.writable=!1}return We.writable};function hd(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ui=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Zt(async()=>{const{default:s}=await Promise.resolve().then(()=>Ot);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},fd=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Li=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},dr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},hr=async(r,e)=>{await r.removeItem(e)};class Dr{constructor(){this.promise=new Dr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Dr.promiseConstructor=Promise;function Kr(r){const e=r.split(".");if(e.length!==3)throw new qt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Yu.test(e[s]))throw new qt("JWT not in base64url format");return{header:JSON.parse(Sn(e[0])),payload:JSON.parse(Sn(e[1])),signature:od(e[2]),raw:{header:e[0],payload:e[1]}}}async function md(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function gd(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function pd(r){return("0"+r.toString(16)).substr(-2)}function vd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,pd).join("")}async function yd(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function bd(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await yd(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function at(r,e,t=!1){const s=vd();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Li(r,`${e}-code-verifier`,n);const i=await bd(s);return[i,s===i?"plain":"s256"]}const wd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xd(r){const e=r.headers.get(xs);if(!e||!e.match(wd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _d(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function jd(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ot(r){if(!Sd.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var kd=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const He=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Td=[502,503,504];async function kn(r){var e;if(!fd(r))throw new _s(He(r),0);if(Td.includes(r.status))throw new _s(He(r),r.status);let t;try{t=await r.json()}catch(i){throw new $i(He(i),i)}let s;const n=xd(r);if(n&&n.getTime()>=Ii["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new xn(He(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ee}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new xn(He(t),r.status,t.weak_password.reasons);throw new Zu(He(t),r.status||500,s)}const Cd=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function A(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[xs]||(i[xs]=Ii["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Pd(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Pd(r,e,t,s,n,i){const a=Cd(e,s,n,i);let l;try{l=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new _s(He(c),0)}if(l.ok||await kn(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await kn(c)}}function je(r){var e;let t=null;Rd(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ud(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Tn(r){const e=je(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Re(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Od(r){return{data:r,error:null}}function Ed(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=kd(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Nd(r){return r}function Rd(r){return r.access_token&&r.refresh_token&&r.expires_in}const Qr=["global","local","others"];var Ad=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Dd{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ui(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Qr[0]){if(Qr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qr.join(", ")}`);try{return await A(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Re})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ad(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ed,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Re})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Nd});if(d.error)throw d.error;const h=await d.json(),m=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(y.split(";")[1].split("=")[1]);u[`${p}Page`]=v}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(C(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ot(e);try{return await A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Re})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ot(e);try{return await A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Re})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ot(e);try{return await A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Re})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ot(e.userId);try{const{data:t,error:s}=await A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ot(e.userId),ot(e.id);try{return{data:await A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}const Id={getItem:r=>Bt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Bt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Bt()&&globalThis.localStorage.removeItem(r)}};function Cn(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function $d(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lt={debug:!!(globalThis&&Bt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Md extends Fi{}async function Ud(r,e,t){lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),lt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw lt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Md(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(lt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}$d();const Ld={url:Ku,storageKey:Qu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ju,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pn(r,e,t){return await t()}class Vt{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vt.nextInstanceID,Vt.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ld),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Dd({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ui(n.fetch),this.lock=n.lock||Pn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ue()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ud:this.lock=Pn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Bt()?this.storage=Id:(this.memoryStorage={},this.storage=Cn(this.memoryStorage)):(this.memoryStorage={},this.storage=Cn(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Di}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=hd(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),ue()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rd(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new $i("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:je}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await at(this.storage,this.storageKey)),i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:y},xform:je})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:je})}else throw new cr("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Tn})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Tn})}else throw new cr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new lr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,a,l,c,u,d,h,m,f;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:p,wallet:w,statement:_,options:b}=e;let x;if(ue())if(typeof w=="object")x=w;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))x=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const k=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in x&&x.signIn){const j=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),_?{statement:_}:null));let P;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")P=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)P=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)y=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(n=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const j=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:p,error:w}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:cd(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:je});if(w)throw w;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new lr}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:w})}catch(p){if(C(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await dr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:je});if(await hr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new lr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,l=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:je}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new lr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await at(this.storage,this.storageKey));const{error:h}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new cr("You must provide either an email or phone number.")}catch(l){if(C(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:je});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(C(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await at(this.storage,this.storageKey)),await A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Od})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ee;const{error:n}=await A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await A(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:l}=await A(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new cr("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Gr:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Re}):await this._useSession(async t=>{var s,n,i;const{data:a,error:l}=t;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Re})})}catch(t){if(C(t))return td(t)&&(await this._removeSession(),await hr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ee;const a=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await at(this.storage,this.storageKey));const{data:u,error:d}=await A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Re});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ee;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:a}=Kr(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ee;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ue())throw new ur("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ur(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ur("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wn("No code detected.");const{data:_,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new ur("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=ct&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const y=m-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:v,error:p}=await this._getUser(i);if(p)throw p;const w={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:m,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(C(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await dr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(ed(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await hr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=dd(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await at(this.storage,this.storageKey,!0));try{return await A(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await A(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ue()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(C(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await A(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await gd(async n=>(n>0&&await md(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(n,i)=>{const a=200*Math.pow(2,n);return i&&Vr(i)&&Date.now()+a-s<ct})}catch(s){if(this._debug(t,"error",s),C(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ue()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await dr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Gr;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Gr}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Vr(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Dr;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ee;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),C(i)){const a={session:null,error:i};return Vr(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Li(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await hr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ct);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/ct);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ct}ms, refresh threshold is ${ws} ticks`),n<=ws&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Fi)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await at(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await A(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Kr(n.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s||(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+Xu>Date.now()))return s;const{data:n,error:i}=await A(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new qt("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(a=>a.kid===e),!s)throw new qt("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:f,error:y}=await this.getSession();if(y||!f.session)return{data:null,error:y};s=f.session.access_token}const{header:n,payload:i,signature:a,raw:{header:l,payload:c}}=Kr(s);if(_d(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:i,header:n,signature:a},error:null}}const u=jd(n.alg),d=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,ld(`${l}.${c}`)))throw new qt("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}}Vt.nextInstanceID=0;const Fd=Vt;class qd extends Fd{constructor(e){super(e)}}var Bd=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Wd{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Gu(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Uu,realtime:Fu,auth:Object.assign(Object.assign({},Lu),{storageKey:u}),global:Mu},h=Vu(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=zu(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ou(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Mc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Du(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Bd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qd({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new wu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zd=(r,e,t)=>new Wd(r,e,t),Hd="https://lcoxtanyckjzyxxcsjzz.supabase.co",Gd="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxjb3h0YW55Y2tqenl4eGNzanp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDUzMjcsImV4cCI6MjA2MzkyMTMyN30.W2JgvZdXubvWpKCNZ7TfjLiKANZO1Hlb164fBEKH2dA",Ir=zd(Hd,Gd),ye=r=>r.toISOString().split("T")[0],Vd=()=>{const r=Pt();return wr({queryKey:["metrics",r],queryFn:async()=>{var b,x,k;const{data:e,error:t}=await Ir.from("transactions").select(`
          id,
          total_amount,
          created_at,
          customer_age,
          customer_gender,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              name,
              category,
              brands!inner(name)
            )
          )
        `).gte("created_at",ye(r.dateRange[0])).lte("created_at",ye(r.dateRange[1]));if(t)throw t;let s=e||[];((b=r.brands)==null?void 0:b.length)>0&&(s=s.filter(j=>j.transaction_items.some(P=>r.brands.includes(P.products.brands.name)))),((x=r.locations)==null?void 0:x.length)>0&&(s=s.filter(j=>r.locations.includes(j.store_location))),((k=r.categories)==null?void 0:k.length)>0&&(s=s.filter(j=>j.transaction_items.some(P=>r.categories.includes(P.products.category))));const n=s.reduce((j,P)=>j+P.total_amount,0),i=s.length,a=s.length,l=i>0?n/i:0,c=new Map;s.forEach(j=>{const P=j.created_at.split("T")[0];c.set(P,(c.get(P)||0)+j.total_amount)});const u=[],d=new Date(r.dateRange[0]),h=new Date(r.dateRange[1]),m=new Date(d);for(;m<=h;){const j=ye(m);u.push({date:j,value:c.get(j)||0}),m.setDate(m.getDate()+1)}const f=new Map;s.forEach(j=>{j.transaction_items.forEach(P=>{const G=P.products.name,M=P.quantity*P.price;f.set(G,(f.get(G)||0)+M)})});const y=Array.from(f.entries()).map(([j,P])=>({name:j,value:P})).sort((j,P)=>P.value-j.value).slice(0,8);return{revenue:n,transactions:i,avgBasketSize:l,activeCustomers:a,revenueTrend:15.2,transactionsTrend:8.7,basketTrend:5.3,customersTrend:12.1,revenueTrendData:u,topProducts:y}},staleTime:5*60*1e3,refetchOnWindowFocus:!1})},Kd=()=>{const r=Pt();return wr({queryKey:["transaction-trends",r],queryFn:async()=>{var m,f,y;const{data:e,error:t}=await Ir.from("transactions").select(`
          id,
          created_at,
          total_amount,
          payment_method,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              category,
              brands!inner(name)
            )
          )
        `).gte("created_at",ye(r.dateRange[0])).lte("created_at",ye(r.dateRange[1])).order("created_at");if(t)throw t;let s=e||[];((m=r.brands)==null?void 0:m.length)>0&&(s=s.filter(v=>v.transaction_items.some(p=>r.brands.includes(p.products.brands.name)))),((f=r.locations)==null?void 0:f.length)>0&&(s=s.filter(v=>r.locations.includes(v.store_location))),((y=r.categories)==null?void 0:y.length)>0&&(s=s.filter(v=>v.transaction_items.some(p=>r.categories.includes(p.products.category))));const n=new Map;s.forEach(v=>{const p=v.created_at.split("T")[0];n.set(p,(n.get(p)||0)+1)});const i=[],a=new Date(r.dateRange[0]),l=new Date(r.dateRange[1]),c=new Date(a);for(;c<=l;){const v=ye(c);i.push({date:v,value:n.get(v)||0}),c.setDate(c.getDate()+1)}const d=[{min:0,max:500,label:"0-500"},{min:501,max:1e3,label:"501-1000"},{min:1001,max:2e3,label:"1001-2000"},{min:2001,max:5e3,label:"2001-5000"},{min:5001,max:1/0,label:"5000+"}].map(v=>({date:v.label,value:s.filter(p=>p.total_amount>=v.min&&p.total_amount<=v.max).length})),h=Array.from({length:7},(v,p)=>Array.from({length:24},(w,_)=>{const b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][p],x=s.filter(k=>{const j=new Date(k.created_at);return j.getDay()===p&&j.getHours()===_}).length;return{day:b,hour:_,value:x}})).flat();return{dailyVolume:i,valueDistribution:d,hourlyHeatmap:h}},staleTime:5*60*1e3})},Qd=()=>{const r=Pt();return wr({queryKey:["product-mix",r],queryFn:async()=>{var d,h,m;const{data:e,error:t}=await Ir.from("transactions").select(`
          id,
          created_at,
          total_amount,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              name,
              category,
              brands!inner(name)
            )
          )
        `).gte("created_at",ye(r.dateRange[0])).lte("created_at",ye(r.dateRange[1]));if(t)throw t;let s=e||[];((d=r.brands)==null?void 0:d.length)>0&&(s=s.filter(f=>f.transaction_items.some(y=>r.brands.includes(y.products.brands.name)))),((h=r.locations)==null?void 0:h.length)>0&&(s=s.filter(f=>r.locations.includes(f.store_location))),((m=r.categories)==null?void 0:m.length)>0&&(s=s.filter(f=>f.transaction_items.some(y=>r.categories.includes(y.products.category))));const n=new Map;s.forEach(f=>{f.transaction_items.forEach(y=>{const v=y.products.category,p=y.quantity*y.price,w=n.get(v)||{value:0};n.set(v,{value:w.value+p,growth:Math.random()*20-5})})});const i=Array.from(n.entries()).map(([f,y])=>({name:f,value:y.value,growth:y.growth})).sort((f,y)=>y.value-f.value),a=new Map,l=s.reduce((f,y)=>f+y.total_amount,0);s.forEach(f=>{f.transaction_items.forEach(y=>{const v=y.products.brands.name,p=y.quantity*y.price,w=a.get(v)||{value:0};a.set(v,{value:w.value+p,marketShare:0})})});const c=Array.from(a.entries()).map(([f,y])=>({name:f,value:y.value,marketShare:l>0?y.value/l*100:0})).sort((f,y)=>y.value-f.value),u=[{stage:"Growth",products:Math.floor(i.length*.2),revenue:i.slice(0,2).reduce((f,y)=>f+y.value,0)},{stage:"Maturity",products:Math.floor(i.length*.5),revenue:i.slice(2,5).reduce((f,y)=>f+y.value,0)},{stage:"Decline",products:Math.floor(i.length*.2),revenue:i.slice(-2).reduce((f,y)=>f+y.value,0)},{stage:"Introduction",products:Math.floor(i.length*.1),revenue:l*.05}];return{categoryPerformance:i,brandPerformance:c,productLifecycle:u}},staleTime:5*60*1e3})},Jd=()=>{const r=Pt();return wr({queryKey:["consumer-insights",r],queryFn:async()=>{var p,w,_;const{data:e,error:t}=await Ir.from("transactions").select(`
          id,
          created_at,
          total_amount,
          customer_age,
          customer_gender,
          payment_method,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              category,
              brands!inner(name)
            )
          )
        `).gte("created_at",ye(r.dateRange[0])).lte("created_at",ye(r.dateRange[1]));if(t)throw t;let s=e||[];((p=r.brands)==null?void 0:p.length)>0&&(s=s.filter(b=>b.transaction_items.some(x=>r.brands.includes(x.products.brands.name)))),((w=r.locations)==null?void 0:w.length)>0&&(s=s.filter(b=>r.locations.includes(b.store_location))),((_=r.categories)==null?void 0:_.length)>0&&(s=s.filter(b=>b.transaction_items.some(x=>r.categories.includes(x.products.category))));const n=new Map;s.forEach(b=>{if(b.customer_age){let x="55+";b.customer_age>=18&&b.customer_age<=24?x="18-24":b.customer_age>=25&&b.customer_age<=34?x="25-34":b.customer_age>=35&&b.customer_age<=44?x="35-44":b.customer_age>=45&&b.customer_age<=54&&(x="45-54");const k=n.get(x)||{count:0,value:0};n.set(x,{count:k.count+1,value:k.value+b.total_amount})}});const i=s.length,a=Array.from(n.entries()).map(([b,x])=>({name:b,value:i>0?Math.round(x.count/i*100):0,count:x.count})),l=new Map;s.forEach(b=>{if(b.customer_gender){const x=b.customer_gender==="M"?"Male":"Female",k=l.get(x)||{count:0,value:0};l.set(x,{count:k.count+1,value:k.value+b.total_amount})}});const c=Array.from(l.entries()).map(([b,x])=>({name:b,value:i>0?Math.round(x.count/i*100):0,count:x.count})),u=new Map;s.forEach(b=>{const x=new Date(b.created_at).getHours();let k="9-12 AM";x>=6&&x<9?k="6-9 AM":x>=9&&x<12?k="9-12 PM":x>=12&&x<15?k="12-3 PM":x>=15&&x<18?k="3-6 PM":x>=18&&x<21?k="6-9 PM":k="9-12 AM",u.set(k,(u.get(k)||0)+1)});const d=Array.from(u.entries()).map(([b,x])=>({hour:b,value:i>0?Math.round(x/i*100):0})),h=new Map;s.forEach(b=>{if(b.payment_method){const x=h.get(b.payment_method)||{count:0,amount:0};h.set(b.payment_method,{count:x.count+1,amount:x.amount+b.total_amount})}});const m=Array.from(h.entries()).map(([b,x])=>({name:b,value:i>0?Math.round(x.count/i*100):0,amount:x.amount})),f=s.reduce((b,x)=>b+x.total_amount,0),y=s.reduce((b,x)=>b+x.transaction_items.reduce((k,j)=>k+j.quantity,0),0),v={avgItemsPerBasket:i>0?+(y/i).toFixed(1):0,avgBasketValue:i>0?Math.round(f/i):0,repeatCustomerRate:67,customerLifetimeValue:12400};return{ageDistribution:a,genderDistribution:c,shoppingTimes:d,paymentMethods:m,basketAnalysis:v}},staleTime:5*60*1e3})};function Yd(){var s;const{data:r,isLoading:e,error:t}=Vd();return e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(jr,{className:"h-8 w-8 animate-spin"})}):t||!r?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-red-600",children:"Error loading data"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Overview Dashboard"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Real-time retail analytics"})]}),o.jsx(Cr,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(or,{title:"Total Revenue",value:r.revenue,format:"currency",trend:r.revenueTrend,subtitle:"Last 30 days"}),o.jsx(or,{title:"Total Transactions",value:r.transactions,format:"number",trend:r.transactionsTrend,subtitle:"Completed orders"}),o.jsx(or,{title:"Avg Basket Size",value:r.avgBasketSize,format:"currency",trend:r.basketTrend,subtitle:"Per transaction"}),o.jsx(or,{title:"Active Customers",value:r.activeCustomers,format:"number",trend:r.customersTrend,subtitle:"Unique buyers"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Revenue Trend"})}),o.jsx(R,{children:o.jsx(pi,{data:r.revenueTrendData,formatValue:"currency",color:"#3b82f6",height:300})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Top Products by Revenue"})}),o.jsx(R,{children:o.jsx(Gt,{data:r.topProducts,formatValue:"currency",color:"#10b981",height:300,layout:"vertical"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Performance Summary"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenue Growth"}),o.jsxs("span",{className:`text-sm font-medium ${r.revenueTrend>=0?"text-green-600":"text-red-600"}`,children:[r.revenueTrend>=0?"+":"",r.revenueTrend.toFixed(1),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Transaction Growth"}),o.jsxs("span",{className:`text-sm font-medium ${r.transactionsTrend>=0?"text-green-600":"text-red-600"}`,children:[r.transactionsTrend>=0?"+":"",r.transactionsTrend.toFixed(1),"%"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer Growth"}),o.jsxs("span",{className:`text-sm font-medium ${r.customersTrend>=0?"text-green-600":"text-red-600"}`,children:[r.customersTrend>=0?"+":"",r.customersTrend.toFixed(1),"%"]})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Key Metrics"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. Order Value"}),o.jsxs("span",{className:"text-sm font-medium",children:["",r.avgBasketSize.toFixed(0)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Orders per Customer"}),o.jsx("span",{className:"text-sm font-medium",children:(r.transactions/r.activeCustomers).toFixed(1)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Revenue per Customer"}),o.jsxs("span",{className:"text-sm font-medium",children:["",(r.revenue/r.activeCustomers).toFixed(0)]})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Today's Highlights"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-green-600",children:"Top Performing Product"}),o.jsx("div",{className:"text-muted-foreground",children:(s=r.topProducts[0])==null?void 0:s.name})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium",children:"Daily Revenue Target"}),o.jsxs("div",{className:"text-muted-foreground",children:[Math.round(r.revenue/r.revenueTrendData.length/(r.revenue/r.revenueTrendData.length)*100),"% achieved"]})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium",children:"Active Promotions"}),o.jsx("div",{className:"text-muted-foreground",children:"3 campaigns running"})]})]})]})]})]})}function Xd(){const{data:r,isLoading:e,error:t}=Kd();return e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(jr,{className:"h-8 w-8 animate-spin"})}):t||!r?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-red-600",children:"Error loading data"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transaction Trends"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed transaction analytics and patterns"})]}),o.jsx(Cr,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(Sr,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:r.dailyVolume.reduce((s,n)=>s+n.value,0).toLocaleString()}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Transactions"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(ni,{className:"h-8 w-8 text-green-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:Math.round(r.dailyVolume.reduce((s,n)=>s+n.value,0)/r.dailyVolume.length)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Daily Volume"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(_o,{className:"h-8 w-8 text-purple-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:"847"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Transaction Value"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Daily Transaction Volume"})}),o.jsx(R,{children:o.jsx(pi,{data:r.dailyVolume,dataKey:"value",color:"#3b82f6",height:300,formatValue:"number"})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Transaction Value Distribution"})}),o.jsx(R,{children:o.jsx(Gt,{data:r.valueDistribution.map(s=>({name:s.date,value:s.value})),dataKey:"value",color:"#10b981",height:300,formatValue:"number",layout:"vertical"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Peak Hours Analysis"})}),o.jsx(R,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:"Morning (6-12)"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:o.jsx("div",{className:"w-8 h-2 bg-blue-500 rounded-full"})}),o.jsx("span",{className:"text-sm font-medium",children:"25%"})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:"Afternoon (12-18)"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:o.jsx("div",{className:"w-12 h-2 bg-green-500 rounded-full"})}),o.jsx("span",{className:"text-sm font-medium",children:"45%"})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:"Evening (18-24)"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:o.jsx("div",{className:"w-8 h-2 bg-purple-500 rounded-full"})}),o.jsx("span",{className:"text-sm font-medium",children:"30%"})]})]})]})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Weekly Patterns"})}),o.jsx(R,{children:o.jsx("div",{className:"space-y-3",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((s,n)=>{const i=[85,78,82,88,95,100,72][n];return o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:s}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:o.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${i}%`}})}),o.jsxs("span",{className:"text-sm font-medium",children:[i,"%"]})]})]},s)})})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Transaction Insights"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Busiest Day"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Saturday (avg 285 transactions)"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Peak Hour"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"2:00 PM - 3:00 PM"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Growth Trend"}),o.jsx("div",{className:"text-sm text-green-600",children:"+12.5% vs last month"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Seasonal Pattern"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Higher on weekends"})]})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Transaction Volume Heatmap"})}),o.jsxs(R,{children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Transaction intensity by day of week and hour of day"}),o.jsx("div",{className:"grid grid-cols-24 gap-1",children:r.hourlyHeatmap.slice(0,168).map((s,n)=>{const i=Math.min(s.value/100,1);return o.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:`rgba(59, 130, 246, ${i})`},title:`${s.day} ${s.hour}:00 - ${s.value} transactions`},n)})}),o.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:"12 AM"}),o.jsx("span",{children:"6 AM"}),o.jsx("span",{children:"12 PM"}),o.jsx("span",{children:"6 PM"}),o.jsx("span",{children:"11 PM"})]})]})]})]})}const Zd=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"];function js({data:r,dataKey:e="value",height:t=300,formatValue:s="number",showLegend:n=!0,colors:i=Zd,innerRadius:a=60}){const l=d=>{if(typeof d!="number")return d;switch(s){case"currency":return xr(d);case"percentage":return si(d);default:return _r(d)}},c=r.reduce((d,h)=>d+h[e],0),u=d=>{const h=(d[e]/c*100).toFixed(1);return`${d.name}: ${h}%`};return o.jsx(Ss,{width:"100%",height:t,children:o.jsxs(Zi,{children:[o.jsx(ea,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:u,outerRadius:80,innerRadius:a,fill:"#8884d8",dataKey:e,children:r.map((d,h)=>o.jsx(ta,{fill:i[h%i.length]},`cell-${h}`))}),o.jsx(ks,{formatter:(d,h)=>[l(d),h],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),n&&o.jsx(ra,{verticalAlign:"bottom",height:36,formatter:d=>`${d}`})]})})}function eh(){var s,n,i,a,l,c;const{data:r,isLoading:e,error:t}=Qd();return e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(jr,{className:"h-8 w-8 animate-spin"})}):t||!r?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-red-600",children:"Error loading data"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Product Mix Analysis"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Product performance and category insights"})]}),o.jsx(Cr,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(ii,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:r.productLifecycle.reduce((u,d)=>u+d.products,0)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Products"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(Sr,{className:"h-8 w-8 text-green-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:((s=r.productLifecycle.find(u=>u.stage==="Growth"))==null?void 0:s.products)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Growth Stage"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(Po,{className:"h-8 w-8 text-yellow-600 mr-3"}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold",children:[(n=r.brandPerformance[0])==null?void 0:n.marketShare.toFixed(1),"%"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Top Brand Share"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(Oo,{className:"h-8 w-8 text-purple-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:"6"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Category Performance"})}),o.jsx(R,{children:o.jsx(Gt,{data:r.categoryPerformance,dataKey:"value",color:"#3b82f6",height:300,formatValue:"currency",layout:"vertical"})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Brand Market Share"})}),o.jsx(R,{children:o.jsx(js,{data:r.brandPerformance.map(u=>({name:u.name,value:u.marketShare})),height:300,showLegend:!0})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Category Growth Rates"})}),o.jsx(R,{children:o.jsx("div",{className:"space-y-3",children:r.categoryPerformance.map(u=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:u.name}),o.jsxs("span",{className:`text-sm font-medium ${u.growth>=0?"text-green-600":"text-red-600"}`,children:[u.growth>=0?"+":"",u.growth.toFixed(1),"%"]})]},u.name))})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Product Lifecycle"})}),o.jsx(R,{children:o.jsx("div",{className:"space-y-4",children:r.productLifecycle.map(u=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:u.stage}),o.jsxs("span",{className:"font-medium",children:[u.products," products"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${u.products/r.productLifecycle.reduce((d,h)=>d+h.products,0)*100}%`}})}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Revenue: ",(u.revenue/1e6).toFixed(1),"M"]})]},u.stage))})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Top Performers"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Highest Revenue Category"}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[(i=r.categoryPerformance[0])==null?void 0:i.name," - ",(((a=r.categoryPerformance[0])==null?void 0:a.value)/1e6).toFixed(1),"M"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Fastest Growing"}),o.jsxs("div",{className:"text-sm text-green-600",children:[r.categoryPerformance.reduce((u,d)=>d.growth>u.growth?d:u).name," (+",r.categoryPerformance.reduce((u,d)=>d.growth>u.growth?d:u).growth.toFixed(1),"%)"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Market Leader"}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[(l=r.brandPerformance[0])==null?void 0:l.name," (",(c=r.brandPerformance[0])==null?void 0:c.marketShare.toFixed(1),"% share)"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Total SKUs"}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.productLifecycle.reduce((u,d)=>u+d.products,0)," active products"]})]})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Detailed Brand Performance"})}),o.jsx(R,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-2",children:"Brand"}),o.jsx("th",{className:"text-right p-2",children:"Revenue"}),o.jsx("th",{className:"text-right p-2",children:"Market Share"}),o.jsx("th",{className:"text-right p-2",children:"Performance"})]})}),o.jsx("tbody",{children:r.brandPerformance.map((u,d)=>o.jsxs("tr",{className:"border-b",children:[o.jsx("td",{className:"p-2 font-medium",children:u.name}),o.jsxs("td",{className:"p-2 text-right",children:["",(u.value/1e6).toFixed(1),"M"]}),o.jsxs("td",{className:"p-2 text-right",children:[u.marketShare.toFixed(1),"%"]}),o.jsx("td",{className:"p-2 text-right",children:o.jsxs("div",{className:"flex items-center justify-end",children:[o.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:o.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${u.marketShare*5}%`}})}),o.jsxs("span",{className:"text-xs",children:["#",d+1]})]})})]},u.name))})]})})})]})]})}function th(){const{data:r,isLoading:e,error:t}=Jd();return e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(jr,{className:"h-8 w-8 animate-spin"})}):t||!r?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-red-600",children:"Error loading data"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Consumer Insights"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Customer behavior and demographic analysis"})]}),o.jsx(Cr,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(ai,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:r.ageDistribution.reduce((s,n)=>s+n.count,0).toLocaleString()}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Customers"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(Co,{className:"h-8 w-8 text-green-600 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold",children:r.basketAnalysis.avgItemsPerBasket}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Items/Basket"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(xo,{className:"h-8 w-8 text-purple-600 mr-3"}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold",children:["",r.basketAnalysis.avgBasketValue]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Basket Value"})]})]})}),o.jsx(N,{children:o.jsxs(R,{className:"flex items-center p-6",children:[o.jsx(ni,{className:"h-8 w-8 text-orange-600 mr-3"}),o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-bold",children:[r.basketAnalysis.repeatCustomerRate,"%"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Repeat Customers"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Age Distribution"})}),o.jsx(R,{children:o.jsx(js,{data:r.ageDistribution,height:300,showLegend:!0,colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Gender Distribution"})}),o.jsx(R,{children:o.jsx(js,{data:r.genderDistribution,height:300,showLegend:!0,colors:["#ec4899","#06b6d4"]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Shopping Time Preferences"})}),o.jsx(R,{children:o.jsx(Gt,{data:r.shoppingTimes.map(s=>({name:s.hour,value:s.value})),dataKey:"value",color:"#10b981",height:300,formatValue:"number",layout:"horizontal"})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Payment Method Usage"})}),o.jsx(R,{children:o.jsx(Gt,{data:r.paymentMethods.map(s=>({name:s.name,value:s.value})),dataKey:"value",color:"#3b82f6",height:300,formatValue:"number",layout:"vertical"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Customer Segments"})}),o.jsx(R,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Premium Shoppers"}),o.jsx("span",{className:"text-sm font-medium",children:"22%"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"w-5/12 bg-purple-500 h-2 rounded-full"})}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"High value, frequent purchases"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Regular Customers"}),o.jsx("span",{className:"text-sm font-medium",children:"45%"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"w-9/12 bg-blue-500 h-2 rounded-full"})}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Consistent purchasing behavior"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Occasional Buyers"}),o.jsx("span",{className:"text-sm font-medium",children:"33%"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"w-8/12 bg-green-500 h-2 rounded-full"})}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Sporadic purchase patterns"})]})]})})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Purchase Patterns"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Peak Shopping Day"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Saturday (28% of weekly sales)"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Most Popular Time"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"12-3 PM (35% of daily sales)"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Preferred Payment"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Cash (45% of transactions)"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Avg Visit Duration"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"23 minutes"})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Customer Lifetime Value"})}),o.jsxs(R,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Average CLV"}),o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",r.basketAnalysis.customerLifetimeValue.toLocaleString()]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Customer Retention"}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.basketAnalysis.repeatCustomerRate,"% return within 30 days"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Purchase Frequency"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"2.3 visits per month"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:"Churn Rate"}),o.jsx("div",{className:"text-sm text-red-600",children:"8.5% monthly"})]})]})]})]}),o.jsxs(N,{children:[o.jsx(F,{children:o.jsx(q,{children:"Detailed Demographics"})}),o.jsx(R,{children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-3",children:"Age Groups"}),o.jsx("div",{className:"space-y-2",children:r.ageDistribution.map(s=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"text-sm",children:[s.name," years"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm font-medium",children:s.count.toLocaleString()}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.value,"%)"]})]})]},s.name))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-3",children:"Payment Methods by Amount"}),o.jsx("div",{className:"space-y-2",children:r.paymentMethods.map(s=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",children:s.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-sm font-medium",children:["",(s.amount/1e6).toFixed(1),"M"]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.value,"%)"]})]})]},s.name))})]})]})})]})]})}const rh=new wa({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!1}}});function sh(){return o.jsx(ka,{client:rh,children:o.jsx(Vi,{children:o.jsx(Ki,{children:o.jsxs(Rt,{path:"/",element:o.jsx(Ro,{}),children:[o.jsx(Rt,{index:!0,element:o.jsx(Yd,{})}),o.jsx(Rt,{path:"trends",element:o.jsx(Xd,{})}),o.jsx(Rt,{path:"products",element:o.jsx(eh,{})}),o.jsx(Rt,{path:"insights",element:o.jsx(th,{})})]})})})})}Xr.createRoot(document.getElementById("root")).render(o.jsx(Un.StrictMode,{children:o.jsx(sh,{})}));
