var Qs=r=>{throw TypeError(r)};var qr=(r,e,t)=>e.has(r)||Qs("Cannot "+t);var p=(r,e,t)=>(qr(r,e,"read from private field"),t?t.call(r):e.get(r)),T=(r,e,t)=>e.has(r)?Qs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),S=(r,e,t,s)=>(qr(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),I=(r,e,t)=>(qr(r,e,"access private method"),t);var lr=(r,e,t,s)=>({set _(n){S(r,e,n,t)},get _(){return p(r,e,s)}});import{j as a,S as ia}from"./ui-vendor-BqE4lOUt.js";import{a as aa,r as U,u as oa,L as Vs,g as la,R as Jn,b as ca,c as ce,O as ua,d as da,B as ha,e as fa,f as $t}from"./react-vendor-B-CDgs5_.js";import{c as Yn,R as Tr,L as Xn,Y as yr,a as Zn,C as ei,X as ts,T as Es,B as ma,b as ga,P as pa,d as va,e as ya,f as ba}from"./chart-vendor-DM6pHQ4V.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var rs={},Js=aa;rs.createRoot=Js.createRoot,rs.hydrateRoot=Js.hydrateRoot;var rr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nt=typeof window>"u"||"Deno"in globalThis;function ne(){}function xa(r,e){return typeof r=="function"?r(e):r}function ss(r){return typeof r=="number"&&r>=0&&r!==1/0}function ti(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Be(r,e){return typeof r=="function"?r(e):r}function me(r,e){return typeof r=="function"?r(e):r}function Ys(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:o,stale:l}=r;if(o){if(s){if(e.queryHash!==Os(o,e.options))return!1}else if(!Vt(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function Xs(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Qt(e.options.mutationKey)!==Qt(i))return!1}else if(!Vt(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Os(r,e){return((e==null?void 0:e.queryKeyHashFn)||Qt)(r)}function Qt(r){return JSON.stringify(r,(e,t)=>is(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function Vt(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Vt(r[t],e[t])):!1}function ri(r,e){if(r===e)return r;const t=Zs(r)&&Zs(e);if(t||is(r)&&is(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),o=i.length,l=t?[]:{},c=new Set(s);let u=0;for(let d=0;d<o;d++){const h=t?d:i[d];(!t&&c.has(h)||t)&&r[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=ri(r[h],e[h]),l[h]===r[h]&&r[h]!==void 0&&u++)}return n===o&&u===n?r:l}return e}function ns(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Zs(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function is(r){if(!en(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!en(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function en(r){return Object.prototype.toString.call(r)==="[object Object]"}function wa(r){return new Promise(e=>{setTimeout(e,r)})}function as(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?ri(r,e):e}function _a(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function ja(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Rs=Symbol();function si(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Rs?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function ka(r,e){return typeof r=="function"?r(...e):!!r}var Ve,De,pt,qn,Sa=(qn=class extends rr{constructor(){super();T(this,Ve);T(this,De);T(this,pt);S(this,pt,e=>{if(!nt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){p(this,De)||this.setEventListener(p(this,pt))}onUnsubscribe(){var e;this.hasListeners()||((e=p(this,De))==null||e.call(this),S(this,De,void 0))}setEventListener(e){var t;S(this,pt,e),(t=p(this,De))==null||t.call(this),S(this,De,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){p(this,Ve)!==e&&(S(this,Ve,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof p(this,Ve)=="boolean"?p(this,Ve):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ve=new WeakMap,De=new WeakMap,pt=new WeakMap,qn),As=new Sa,vt,Ie,yt,Bn,Ca=(Bn=class extends rr{constructor(){super();T(this,vt,!0);T(this,Ie);T(this,yt);S(this,yt,e=>{if(!nt&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){p(this,Ie)||this.setEventListener(p(this,yt))}onUnsubscribe(){var e;this.hasListeners()||((e=p(this,Ie))==null||e.call(this),S(this,Ie,void 0))}setEventListener(e){var t;S(this,yt,e),(t=p(this,Ie))==null||t.call(this),S(this,Ie,e(this.setOnline.bind(this)))}setOnline(e){p(this,vt)!==e&&(S(this,vt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return p(this,vt)}},vt=new WeakMap,Ie=new WeakMap,yt=new WeakMap,Bn),br=new Ca;function os(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function Ta(r){return Math.min(1e3*2**r,3e4)}function ni(r){return(r??"online")==="online"?br.isOnline():!0}var ii=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Br(r){return r instanceof ii}function ai(r){let e=!1,t=0,s=!1,n;const i=os(),o=f=>{var m;s||(g(new ii(f)),(m=r.abort)==null||m.call(r))},l=()=>{e=!0},c=()=>{e=!1},u=()=>As.isFocused()&&(r.networkMode==="always"||br.isOnline())&&r.canRun(),d=()=>ni(r.networkMode)&&r.canRun(),h=f=>{var m;s||(s=!0,(m=r.onSuccess)==null||m.call(r,f),n==null||n(),i.resolve(f))},g=f=>{var m;s||(s=!0,(m=r.onError)==null||m.call(r,f),n==null||n(),i.reject(f))},v=()=>new Promise(f=>{var m;n=b=>{(s||u())&&f(b)},(m=r.onPause)==null||m.call(r)}).then(()=>{var f;n=void 0,s||(f=r.onContinue)==null||f.call(r)}),y=()=>{if(s)return;let f;const m=t===0?r.initialPromise:void 0;try{f=m??r.fn()}catch(b){f=Promise.reject(b)}Promise.resolve(f).then(h).catch(b=>{var k;if(s)return;const _=r.retry??(nt?0:3),w=r.retryDelay??Ta,j=typeof w=="function"?w(t,b):w,x=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,b);if(e||!x){g(b);return}t++,(k=r.onFail)==null||k.call(r,t,b),wa(j).then(()=>u()?void 0:v()).then(()=>{e?g(b):y()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():v().then(y),i)}}var Na=r=>setTimeout(r,0);function Pa(){let r=[],e=0,t=l=>{l()},s=l=>{l()},n=Na;const i=l=>{e?r.push(l):n(()=>{t(l)})},o=()=>{const l=r;r=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var J=Pa(),Je,Wn,oi=(Wn=class{constructor(){T(this,Je)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ss(this.gcTime)&&S(this,Je,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(nt?1/0:5*60*1e3))}clearGcTimeout(){p(this,Je)&&(clearTimeout(p(this,Je)),S(this,Je,void 0))}},Je=new WeakMap,Wn),bt,xt,le,Ye,Y,Xt,Xe,de,_e,zn,Ea=(zn=class extends oi{constructor(e){super();T(this,de);T(this,bt);T(this,xt);T(this,le);T(this,Ye);T(this,Y);T(this,Xt);T(this,Xe);S(this,Xe,!1),S(this,Xt,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,Ye,e.client),S(this,le,p(this,Ye).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,bt,Oa(this.options)),this.state=e.state??p(this,bt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=p(this,Y))==null?void 0:e.promise}setOptions(e){this.options={...p(this,Xt),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&p(this,le).remove(this)}setData(e,t){const s=as(this.state.data,e,this.options);return I(this,de,_e).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){I(this,de,_e).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=p(this,Y))==null?void 0:s.promise;return(n=p(this,Y))==null||n.cancel(e),t?t.then(ne).catch(ne):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(p(this,bt))}isActive(){return this.observers.some(e=>me(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Be(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ti(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=p(this,Y))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=p(this,Y))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),p(this,le).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(p(this,Y)&&(p(this,Xe)?p(this,Y).cancel({revert:!0}):p(this,Y).cancelRetry()),this.scheduleGc()),p(this,le).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||I(this,de,_e).call(this,{type:"invalidate"})}fetch(e,t){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(p(this,Y))return p(this,Y).continueRetry(),p(this,Y).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,n=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(S(this,Xe,!0),s.signal)})},i=()=>{const g=si(this.options,t),y=(()=>{const f={client:p(this,Ye),queryKey:this.queryKey,meta:this.meta};return n(f),f})();return S(this,Xe,!1),this.options.persister?this.options.persister(g,y,this):g(y)},l=(()=>{const g={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:p(this,Ye),state:this.state,fetchFn:i};return n(g),g})();(u=this.options.behavior)==null||u.onFetch(l,this),S(this,xt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&I(this,de,_e).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=g=>{var v,y,f,m;Br(g)&&g.silent||I(this,de,_e).call(this,{type:"error",error:g}),Br(g)||((y=(v=p(this,le).config).onError)==null||y.call(v,g,this),(m=(f=p(this,le).config).onSettled)==null||m.call(f,this.state.data,g,this)),this.scheduleGc()};return S(this,Y,ai({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var v,y,f,m;if(g===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(b){c(b);return}(y=(v=p(this,le).config).onSuccess)==null||y.call(v,g,this),(m=(f=p(this,le).config).onSettled)==null||m.call(f,g,this.state.error,this),this.scheduleGc()},onError:c,onFail:(g,v)=>{I(this,de,_e).call(this,{type:"failed",failureCount:g,error:v})},onPause:()=>{I(this,de,_e).call(this,{type:"pause"})},onContinue:()=>{I(this,de,_e).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),p(this,Y).start()}},bt=new WeakMap,xt=new WeakMap,le=new WeakMap,Ye=new WeakMap,Y=new WeakMap,Xt=new WeakMap,Xe=new WeakMap,de=new WeakSet,_e=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...li(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Br(n)&&n.revert&&p(this,xt)?{...p(this,xt),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),J.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),p(this,le).notify({query:this,type:"updated",action:e})})},zn);function li(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ni(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Oa(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ge,Hn,Ra=(Hn=class extends rr{constructor(e={}){super();T(this,ge);this.config=e,S(this,ge,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??Os(n,t);let o=this.get(i);return o||(o=new Ea({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){p(this,ge).has(e.queryHash)||(p(this,ge).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=p(this,ge).get(e.queryHash);t&&(e.destroy(),t===e&&p(this,ge).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){J.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return p(this,ge).get(e)}getAll(){return[...p(this,ge).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Ys(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Ys(e,s)):t}notify(e){J.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){J.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){J.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ge=new WeakMap,Hn),pe,Z,Ze,ve,Pe,Gn,Aa=(Gn=class extends oi{constructor(e){super();T(this,ve);T(this,pe);T(this,Z);T(this,Ze);this.mutationId=e.mutationId,S(this,Z,e.mutationCache),S(this,pe,[]),this.state=e.state||Da(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){p(this,pe).includes(e)||(p(this,pe).push(e),this.clearGcTimeout(),p(this,Z).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,pe,p(this,pe).filter(t=>t!==e)),this.scheduleGc(),p(this,Z).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){p(this,pe).length||(this.state.status==="pending"?this.scheduleGc():p(this,Z).remove(this))}continue(){var e;return((e=p(this,Ze))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,u,d,h,g,v,y,f,m,b,_,w,j,x,k,C,N;const t=()=>{I(this,ve,Pe).call(this,{type:"continue"})};S(this,Ze,ai({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(L,R)=>{I(this,ve,Pe).call(this,{type:"failed",failureCount:L,error:R})},onPause:()=>{I(this,ve,Pe).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>p(this,Z).canRun(this)}));const s=this.state.status==="pending",n=!p(this,Ze).canStart();try{if(s)t();else{I(this,ve,Pe).call(this,{type:"pending",variables:e,isPaused:n}),await((o=(i=p(this,Z).config).onMutate)==null?void 0:o.call(i,e,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));R!==this.state.context&&I(this,ve,Pe).call(this,{type:"pending",context:R,variables:e,isPaused:n})}const L=await p(this,Ze).start();return await((d=(u=p(this,Z).config).onSuccess)==null?void 0:d.call(u,L,e,this.state.context,this)),await((g=(h=this.options).onSuccess)==null?void 0:g.call(h,L,e,this.state.context)),await((y=(v=p(this,Z).config).onSettled)==null?void 0:y.call(v,L,null,this.state.variables,this.state.context,this)),await((m=(f=this.options).onSettled)==null?void 0:m.call(f,L,null,e,this.state.context)),I(this,ve,Pe).call(this,{type:"success",data:L}),L}catch(L){try{throw await((_=(b=p(this,Z).config).onError)==null?void 0:_.call(b,L,e,this.state.context,this)),await((j=(w=this.options).onError)==null?void 0:j.call(w,L,e,this.state.context)),await((k=(x=p(this,Z).config).onSettled)==null?void 0:k.call(x,void 0,L,this.state.variables,this.state.context,this)),await((N=(C=this.options).onSettled)==null?void 0:N.call(C,void 0,L,e,this.state.context)),L}finally{I(this,ve,Pe).call(this,{type:"error",error:L})}}finally{p(this,Z).runNext(this)}}},pe=new WeakMap,Z=new WeakMap,Ze=new WeakMap,ve=new WeakSet,Pe=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),J.batch(()=>{p(this,pe).forEach(s=>{s.onMutationUpdate(e)}),p(this,Z).notify({mutation:this,type:"updated",action:e})})},Gn);function Da(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Se,he,Zt,Kn,Ia=(Kn=class extends rr{constructor(e={}){super();T(this,Se);T(this,he);T(this,Zt);this.config=e,S(this,Se,new Set),S(this,he,new Map),S(this,Zt,0)}build(e,t,s){const n=new Aa({mutationCache:this,mutationId:++lr(this,Zt)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){p(this,Se).add(e);const t=cr(e);if(typeof t=="string"){const s=p(this,he).get(t);s?s.push(e):p(this,he).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(p(this,Se).delete(e)){const t=cr(e);if(typeof t=="string"){const s=p(this,he).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&p(this,he).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=cr(e);if(typeof t=="string"){const s=p(this,he).get(t),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=cr(e);if(typeof t=="string"){const n=(s=p(this,he).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){J.batch(()=>{p(this,Se).forEach(e=>{this.notify({type:"removed",mutation:e})}),p(this,Se).clear(),p(this,he).clear()})}getAll(){return Array.from(p(this,Se))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Xs(t,s))}findAll(e={}){return this.getAll().filter(t=>Xs(e,t))}notify(e){J.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return J.batch(()=>Promise.all(e.map(t=>t.continue().catch(ne))))}},Se=new WeakMap,he=new WeakMap,Zt=new WeakMap,Kn);function cr(r){var e;return(e=r.options.scope)==null?void 0:e.id}function tn(r){return{onFetch:(e,t)=>{var d,h,g,v,y;const s=e.options,n=(g=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let f=!1;const m=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},b=si(e.options,e.fetchOptions),_=async(w,j,x)=>{if(f)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const W={client:e.client,queryKey:e.queryKey,pageParam:j,direction:x?"backward":"forward",meta:e.options.meta};return m(W),W})(),N=await b(C),{maxPages:L}=e.options,R=x?ja:_a;return{pages:R(w.pages,N,L),pageParams:R(w.pageParams,j,L)}};if(n&&i.length){const w=n==="backward",j=w?Ma:rn,x={pages:i,pageParams:o},k=j(s,x);l=await _(x,k,w)}else{const w=r??i.length;do{const j=c===0?o[0]??s.initialPageParam:rn(s,l);if(c>0&&j==null)break;l=await _(l,j),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var f,m;return(m=(f=e.options).persister)==null?void 0:m.call(f,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function rn(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function Ma(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var Q,Me,$e,wt,_t,Le,jt,kt,Qn,$a=(Qn=class{constructor(r={}){T(this,Q);T(this,Me);T(this,$e);T(this,wt);T(this,_t);T(this,Le);T(this,jt);T(this,kt);S(this,Q,r.queryCache||new Ra),S(this,Me,r.mutationCache||new Ia),S(this,$e,r.defaultOptions||{}),S(this,wt,new Map),S(this,_t,new Map),S(this,Le,0)}mount(){lr(this,Le)._++,p(this,Le)===1&&(S(this,jt,As.subscribe(async r=>{r&&(await this.resumePausedMutations(),p(this,Q).onFocus())})),S(this,kt,br.subscribe(async r=>{r&&(await this.resumePausedMutations(),p(this,Q).onOnline())})))}unmount(){var r,e;lr(this,Le)._--,p(this,Le)===0&&((r=p(this,jt))==null||r.call(this),S(this,jt,void 0),(e=p(this,kt))==null||e.call(this),S(this,kt,void 0))}isFetching(r){return p(this,Q).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return p(this,Me).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=p(this,Q).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=p(this,Q).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(Be(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return p(this,Q).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=p(this,Q).get(s.queryHash),i=n==null?void 0:n.state.data,o=xa(e,i);if(o!==void 0)return p(this,Q).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return J.batch(()=>p(this,Q).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=p(this,Q).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=p(this,Q);J.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=p(this,Q);return J.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=J.batch(()=>p(this,Q).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(ne).catch(ne)}invalidateQueries(r,e={}){return J.batch(()=>(p(this,Q).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=J.batch(()=>p(this,Q).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(ne)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ne)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=p(this,Q).build(this,e);return t.isStaleByTime(Be(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(ne).catch(ne)}fetchInfiniteQuery(r){return r.behavior=tn(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(ne).catch(ne)}ensureInfiniteQueryData(r){return r.behavior=tn(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return br.isOnline()?p(this,Me).resumePausedMutations():Promise.resolve()}getQueryCache(){return p(this,Q)}getMutationCache(){return p(this,Me)}getDefaultOptions(){return p(this,$e)}setDefaultOptions(r){S(this,$e,r)}setQueryDefaults(r,e){p(this,wt).set(Qt(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...p(this,wt).values()],t={};return e.forEach(s=>{Vt(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){p(this,_t).set(Qt(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...p(this,_t).values()],t={};return e.forEach(s=>{Vt(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...p(this,$e).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Os(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Rs&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...p(this,$e).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){p(this,Q).clear(),p(this,Me).clear()}},Q=new WeakMap,Me=new WeakMap,$e=new WeakMap,wt=new WeakMap,_t=new WeakMap,Le=new WeakMap,jt=new WeakMap,kt=new WeakMap,Qn),se,M,er,ee,et,St,Ue,Fe,tr,Ct,Tt,tt,rt,qe,Nt,q,Wt,ls,cs,us,ds,hs,fs,ms,ci,Vn,La=(Vn=class extends rr{constructor(e,t){super();T(this,q);T(this,se);T(this,M);T(this,er);T(this,ee);T(this,et);T(this,St);T(this,Ue);T(this,Fe);T(this,tr);T(this,Ct);T(this,Tt);T(this,tt);T(this,rt);T(this,qe);T(this,Nt,new Set);this.options=t,S(this,se,e),S(this,Fe,null),S(this,Ue,os()),this.options.experimental_prefetchInRender||p(this,Ue).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(p(this,M).addObserver(this),sn(p(this,M),this.options)?I(this,q,Wt).call(this):this.updateResult(),I(this,q,ds).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gs(p(this,M),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gs(p(this,M),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,I(this,q,hs).call(this),I(this,q,fs).call(this),p(this,M).removeObserver(this)}setOptions(e){const t=this.options,s=p(this,M);if(this.options=p(this,se).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof me(this.options.enabled,p(this,M))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");I(this,q,ms).call(this),p(this,M).setOptions(this.options),t._defaulted&&!ns(this.options,t)&&p(this,se).getQueryCache().notify({type:"observerOptionsUpdated",query:p(this,M),observer:this});const n=this.hasListeners();n&&nn(p(this,M),s,this.options,t)&&I(this,q,Wt).call(this),this.updateResult(),n&&(p(this,M)!==s||me(this.options.enabled,p(this,M))!==me(t.enabled,p(this,M))||Be(this.options.staleTime,p(this,M))!==Be(t.staleTime,p(this,M)))&&I(this,q,ls).call(this);const i=I(this,q,cs).call(this);n&&(p(this,M)!==s||me(this.options.enabled,p(this,M))!==me(t.enabled,p(this,M))||i!==p(this,qe))&&I(this,q,us).call(this,i)}getOptimisticResult(e){const t=p(this,se).getQueryCache().build(p(this,se),e),s=this.createResult(t,e);return Fa(this,s)&&(S(this,ee,s),S(this,St,this.options),S(this,et,p(this,M).state)),s}getCurrentResult(){return p(this,ee)}trackResult(e,t){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),t==null||t(n),Reflect.get(s,n))})}trackProp(e){p(this,Nt).add(e)}getCurrentQuery(){return p(this,M)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=p(this,se).defaultQueryOptions(e),s=p(this,se).getQueryCache().build(p(this,se),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return I(this,q,Wt).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),p(this,ee)))}createResult(e,t){var L;const s=p(this,M),n=this.options,i=p(this,ee),o=p(this,et),l=p(this,St),u=e!==s?e.state:p(this,er),{state:d}=e;let h={...d},g=!1,v;if(t._optimisticResults){const R=this.hasListeners(),W=!R&&sn(e,t),O=R&&nn(e,s,t,n);(W||O)&&(h={...h,...li(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:f,status:m}=h;v=h.data;let b=!1;if(t.placeholderData!==void 0&&v===void 0&&m==="pending"){let R;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(R=i.data,b=!0):R=typeof t.placeholderData=="function"?t.placeholderData((L=p(this,Tt))==null?void 0:L.state.data,p(this,Tt)):t.placeholderData,R!==void 0&&(m="success",v=as(i==null?void 0:i.data,R,t),g=!0)}if(t.select&&v!==void 0&&!b)if(i&&v===(o==null?void 0:o.data)&&t.select===p(this,tr))v=p(this,Ct);else try{S(this,tr,t.select),v=t.select(v),v=as(i==null?void 0:i.data,v,t),S(this,Ct,v),S(this,Fe,null)}catch(R){S(this,Fe,R)}p(this,Fe)&&(y=p(this,Fe),v=p(this,Ct),f=Date.now(),m="error");const _=h.fetchStatus==="fetching",w=m==="pending",j=m==="error",x=w&&_,k=v!==void 0,N={status:m,fetchStatus:h.fetchStatus,isPending:w,isSuccess:m==="success",isError:j,isInitialLoading:x,isLoading:x,data:v,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:f,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:_,isRefetching:_&&!w,isLoadingError:j&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:j&&k,isStale:Ds(e,t),refetch:this.refetch,promise:p(this,Ue)};if(this.options.experimental_prefetchInRender){const R=oe=>{N.status==="error"?oe.reject(N.error):N.data!==void 0&&oe.resolve(N.data)},W=()=>{const oe=S(this,Ue,N.promise=os());R(oe)},O=p(this,Ue);switch(O.status){case"pending":e.queryHash===s.queryHash&&R(O);break;case"fulfilled":(N.status==="error"||N.data!==O.value)&&W();break;case"rejected":(N.status!=="error"||N.error!==O.reason)&&W();break}}return N}updateResult(){const e=p(this,ee),t=this.createResult(p(this,M),this.options);if(S(this,et,p(this,M).state),S(this,St,this.options),p(this,et).data!==void 0&&S(this,Tt,p(this,M)),ns(t,e))return;S(this,ee,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!p(this,Nt).size)return!0;const o=new Set(i??p(this,Nt));return this.options.throwOnError&&o.add("error"),Object.keys(p(this,ee)).some(l=>{const c=l;return p(this,ee)[c]!==e[c]&&o.has(c)})};I(this,q,ci).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&I(this,q,ds).call(this)}},se=new WeakMap,M=new WeakMap,er=new WeakMap,ee=new WeakMap,et=new WeakMap,St=new WeakMap,Ue=new WeakMap,Fe=new WeakMap,tr=new WeakMap,Ct=new WeakMap,Tt=new WeakMap,tt=new WeakMap,rt=new WeakMap,qe=new WeakMap,Nt=new WeakMap,q=new WeakSet,Wt=function(e){I(this,q,ms).call(this);let t=p(this,M).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ne)),t},ls=function(){I(this,q,hs).call(this);const e=Be(this.options.staleTime,p(this,M));if(nt||p(this,ee).isStale||!ss(e))return;const s=ti(p(this,ee).dataUpdatedAt,e)+1;S(this,tt,setTimeout(()=>{p(this,ee).isStale||this.updateResult()},s))},cs=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(p(this,M)):this.options.refetchInterval)??!1},us=function(e){I(this,q,fs).call(this),S(this,qe,e),!(nt||me(this.options.enabled,p(this,M))===!1||!ss(p(this,qe))||p(this,qe)===0)&&S(this,rt,setInterval(()=>{(this.options.refetchIntervalInBackground||As.isFocused())&&I(this,q,Wt).call(this)},p(this,qe)))},ds=function(){I(this,q,ls).call(this),I(this,q,us).call(this,I(this,q,cs).call(this))},hs=function(){p(this,tt)&&(clearTimeout(p(this,tt)),S(this,tt,void 0))},fs=function(){p(this,rt)&&(clearInterval(p(this,rt)),S(this,rt,void 0))},ms=function(){const e=p(this,se).getQueryCache().build(p(this,se),this.options);if(e===p(this,M))return;const t=p(this,M);S(this,M,e),S(this,er,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},ci=function(e){J.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(p(this,ee))}),p(this,se).getQueryCache().notify({query:p(this,M),type:"observerResultsUpdated"})})},Vn);function Ua(r,e){return me(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function sn(r,e){return Ua(r,e)||r.state.data!==void 0&&gs(r,e,e.refetchOnMount)}function gs(r,e,t){if(me(e.enabled,r)!==!1&&Be(e.staleTime,r)!=="static"){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Ds(r,e)}return!1}function nn(r,e,t,s){return(r!==e||me(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Ds(r,t)}function Ds(r,e){return me(e.enabled,r)!==!1&&r.isStaleByTime(Be(e.staleTime,r))}function Fa(r,e){return!ns(r.getCurrentResult(),e)}var ui=U.createContext(void 0),qa=r=>{const e=U.useContext(ui);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ba=({client:r,children:e})=>(U.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),a.jsx(ui.Provider,{value:r,children:e})),di=U.createContext(!1),Wa=()=>U.useContext(di);di.Provider;function za(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var Ha=U.createContext(za()),Ga=()=>U.useContext(Ha),Ka=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},Qa=r=>{U.useEffect(()=>{r.clearReset()},[r])},Va=({result:r,errorResetBoundary:e,throwOnError:t,query:s,suspense:n})=>r.isError&&!e.isReset()&&!r.isFetching&&s&&(n&&r.data===void 0||ka(t,[r.error,s])),Ja=r=>{if(r.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=r.staleTime;r.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},Ya=(r,e)=>r.isLoading&&r.isFetching&&!e,Xa=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,an=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function Za(r,e,t){var h,g,v,y,f;const s=Wa(),n=Ga(),i=qa(),o=i.defaultQueryOptions(r);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",Ja(o),Ka(o,n),Qa(n);const l=!i.getQueryCache().get(o.queryHash),[c]=U.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),d=!s&&r.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(m=>{const b=d?c.subscribe(J.batchCalls(m)):ne;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),U.useEffect(()=>{c.setOptions(o)},[o,c]),Xa(o,u))throw an(o,c,n);if(Va({result:u,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((y=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||y.call(v,o,u),o.experimental_prefetchInRender&&!nt&&Ya(u,s)){const m=l?an(o,c,n):(f=i.getQueryCache().get(o.queryHash))==null?void 0:f.promise;m==null||m.catch(ne).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ot(r,e){return Za(r,La)}const Is="-",eo=r=>{const e=ro(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:o=>{const l=o.split(Is);return l[0]===""&&l.length!==1&&l.shift(),hi(l,e)||to(o)},getConflictingClassGroupIds:(o,l)=>{const c=t[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},hi=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?hi(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(Is);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},on=/^\[(.+)\]$/,to=r=>{if(on.test(r)){const e=on.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ro=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return no(Object.entries(r.classGroups),t).forEach(([i,o])=>{ps(o,s,i,e)}),s},ps=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:ln(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(so(n)){ps(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,o])=>{ps(o,ln(e,i),t,s)})})},ln=(r,e)=>{let t=r;return e.split(Is).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},so=r=>r.isThemeGetter,no=(r,e)=>e?r.map(([t,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,n]}):r,io=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return n(i,o),o},set(i,o){t.has(i)?t.set(i,o):n(i,o)}}},fi="!",ao=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let m=0;m<l.length;m++){let b=l[m];if(u===0){if(b===n&&(s||l.slice(m,m+i)===e)){c.push(l.slice(d,m)),d=m+i;continue}if(b==="/"){h=m;continue}}b==="["?u++:b==="]"&&u--}const g=c.length===0?l:l.substring(d),v=g.startsWith(fi),y=v?g.substring(1):g,f=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:f}};return t?l=>t({className:l,parseClassName:o}):o},oo=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},lo=r=>({cache:io(r.cacheSize),parseClassName:ao(r),...eo(r)}),co=/\s+/,uo=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],o=r.trim().split(co);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:v}=t(u);let y=!!v,f=s(y?g.substring(0,v):g);if(!f){if(!y){l=u+(l.length>0?" "+l:l);continue}if(f=s(g),!f){l=u+(l.length>0?" "+l:l);continue}y=!1}const m=oo(d).join(":"),b=h?m+fi:m,_=b+f;if(i.includes(_))continue;i.push(_);const w=n(f,y);for(let j=0;j<w.length;++j){const x=w[j];i.push(b+x)}l=u+(l.length>0?" "+l:l)}return l};function ho(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=mi(e))&&(s&&(s+=" "),s+=t);return s}const mi=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=mi(r[s]))&&(t&&(t+=" "),t+=e);return t};function fo(r,...e){let t,s,n,i=o;function o(c){const u=e.reduce((d,h)=>h(d),r());return t=lo(u),s=t.cache.get,n=t.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=uo(c,t);return n(c,d),d}return function(){return i(ho.apply(null,arguments))}}const H=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},gi=/^\[(?:([a-z-]+):)?(.+)\]$/i,mo=/^\d+\/\d+$/,go=new Set(["px","full","screen"]),po=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vo=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yo=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,we=r=>mt(r)||go.has(r)||mo.test(r),Ce=r=>Rt(r,"length",No),mt=r=>!!r&&!Number.isNaN(Number(r)),Wr=r=>Rt(r,"number",mt),Lt=r=>!!r&&Number.isInteger(Number(r)),wo=r=>r.endsWith("%")&&mt(r.slice(0,-1)),E=r=>gi.test(r),Te=r=>po.test(r),_o=new Set(["length","size","percentage"]),jo=r=>Rt(r,_o,pi),ko=r=>Rt(r,"position",pi),So=new Set(["image","url"]),Co=r=>Rt(r,So,Eo),To=r=>Rt(r,"",Po),Ut=()=>!0,Rt=(r,e,t)=>{const s=gi.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},No=r=>vo.test(r)&&!yo.test(r),pi=()=>!1,Po=r=>bo.test(r),Eo=r=>xo.test(r),Oo=()=>{const r=H("colors"),e=H("spacing"),t=H("blur"),s=H("brightness"),n=H("borderColor"),i=H("borderRadius"),o=H("borderSpacing"),l=H("borderWidth"),c=H("contrast"),u=H("grayscale"),d=H("hueRotate"),h=H("invert"),g=H("gap"),v=H("gradientColorStops"),y=H("gradientColorStopPositions"),f=H("inset"),m=H("margin"),b=H("opacity"),_=H("padding"),w=H("saturate"),j=H("scale"),x=H("sepia"),k=H("skew"),C=H("space"),N=H("translate"),L=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",E,e],O=()=>[E,e],oe=()=>["",we,Ce],ar=()=>["auto",mt,E],Hs=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],or=()=>["solid","dashed","dotted","double","none"],Gs=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Fr=()=>["start","end","center","between","around","evenly","stretch"],Mt=()=>["","0",E],Ks=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>[mt,E];return{cacheSize:500,separator:":",theme:{colors:[Ut],spacing:[we,Ce],blur:["none","",Te,E],brightness:xe(),borderColor:[r],borderRadius:["none","","full",Te,E],borderSpacing:O(),borderWidth:oe(),contrast:xe(),grayscale:Mt(),hueRotate:xe(),invert:Mt(),gap:O(),gradientColorStops:[r],gradientColorStopPositions:[wo,Ce],inset:W(),margin:W(),opacity:xe(),padding:O(),saturate:xe(),scale:xe(),sepia:Mt(),skew:xe(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",E]}],container:["container"],columns:[{columns:[Te]}],"break-after":[{"break-after":Ks()}],"break-before":[{"break-before":Ks()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Hs(),E]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lt,E]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",E]}],grow:[{grow:Mt()}],shrink:[{shrink:Mt()}],order:[{order:["first","last","none",Lt,E]}],"grid-cols":[{"grid-cols":[Ut]}],"col-start-end":[{col:["auto",{span:["full",Lt,E]},E]}],"col-start":[{"col-start":ar()}],"col-end":[{"col-end":ar()}],"grid-rows":[{"grid-rows":[Ut]}],"row-start-end":[{row:["auto",{span:[Lt,E]},E]}],"row-start":[{"row-start":ar()}],"row-end":[{"row-end":ar()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",E]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",E]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...Fr()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Fr(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Fr(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",E,e]}],"min-w":[{"min-w":[E,e,"min","max","fit"]}],"max-w":[{"max-w":[E,e,"none","full","min","max","fit","prose",{screen:[Te]},Te]}],h:[{h:[E,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[E,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[E,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[E,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Te,Ce]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wr]}],"font-family":[{font:[Ut]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",E]}],"line-clamp":[{"line-clamp":["none",mt,Wr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",we,E]}],"list-image":[{"list-image":["none",E]}],"list-style-type":[{list:["none","disc","decimal",E]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...or(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",we,Ce]}],"underline-offset":[{"underline-offset":["auto",we,E]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",E]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",E]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Hs(),ko]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jo]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Co]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...or(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:or()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...or()]}],"outline-offset":[{"outline-offset":[we,E]}],"outline-w":[{outline:[we,Ce]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[we,Ce]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Te,To]}],"shadow-color":[{shadow:[Ut]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Gs(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Gs()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Te,E]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",E]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",E]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",E]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Lt,E]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",E]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",E]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",E]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[we,Ce,Wr]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ro=fo(Oo);function ae(...r){return Ro(Yn(r))}function At(r){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(r)}function Nr(r){return new Intl.NumberFormat("en-PH").format(r)}function vi(r){return`${(r*100).toFixed(1)}%`}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ao={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(r,e)=>{const t=U.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>U.createElement("svg",{ref:d,...Ao,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Do(r)}`,l].join(" "),...u},[...e.map(([h,g])=>U.createElement(h,g)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=F("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=F("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=F("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=F("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=F("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=F("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=F("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=F("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=F("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=F("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=F("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=F("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=F("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=F("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=F("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=F("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=F("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fn=[{name:"Overview",href:"/",icon:Fo},{name:"Transaction Trends",href:"/trends",icon:We},{name:"Product Mix",href:"/products",icon:$s},{name:"Consumer Insights",href:"/insights",icon:Er}];function Qo(){const r=oa(),[e,t]=U.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:border-r lg:border-gray-200 lg:bg-white lg:pt-5 lg:pb-4",children:[a.jsxs("div",{className:"flex items-center flex-shrink-0 px-6",children:[a.jsx(vs,{className:"h-8 w-8 text-blue-600"}),a.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Scout Analytics"})]}),a.jsx("div",{className:"mt-6 flex flex-col flex-1 overflow-y-auto",children:a.jsx("nav",{className:"flex-1 px-3 space-y-1",children:fn.map(s=>{const n=r.pathname===s.href;return a.jsxs(Vs,{to:s.href,className:ae("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",n?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),children:[a.jsx(s.icon,{className:ae("mr-3 h-5 w-5 flex-shrink-0",n?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),s.name]},s.name)})})})]}),a.jsxs("div",{className:"lg:hidden",children:[a.jsxs("div",{className:"flex items-center justify-between bg-white border-b border-gray-200 px-4 py-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-6 w-6 text-blue-600"}),a.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:"Scout Analytics"})]}),a.jsx("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",onClick:()=>t(!e),children:e?a.jsx(Oe,{className:"h-6 w-6"}):a.jsx(Bo,{className:"h-6 w-6"})})]}),e&&a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"pt-2 pb-3 space-y-1",children:fn.map(s=>{const n=r.pathname===s.href;return a.jsxs(Vs,{to:s.href,className:ae("flex items-center px-4 py-2 text-base font-medium",n?"bg-blue-50 text-blue-700 border-r-4 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>t(!1),children:[a.jsx(s.icon,{className:ae("mr-3 h-5 w-5 flex-shrink-0",n?"text-blue-500":"text-gray-400")}),s.name]},s.name)})})})]})]})}const Vo={},mn=r=>{let e;const t=new Set,s=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const v=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},n=()=>e,c={setState:s,getState:n,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Vo?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=r(s,n,c);return c},Jo=r=>r?mn(r):mn;var ji={exports:{}},ki={},Si={exports:{}},Ci={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=U;function Yo(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Xo=typeof Object.is=="function"?Object.is:Yo,Zo=Pt.useState,el=Pt.useEffect,tl=Pt.useLayoutEffect,rl=Pt.useDebugValue;function sl(r,e){var t=e(),s=Zo({inst:{value:t,getSnapshot:e}}),n=s[0].inst,i=s[1];return tl(function(){n.value=t,n.getSnapshot=e,zr(n)&&i({inst:n})},[r,t,e]),el(function(){return zr(n)&&i({inst:n}),r(function(){zr(n)&&i({inst:n})})},[r]),rl(t),t}function zr(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Xo(r,t)}catch{return!0}}function nl(r,e){return e()}var il=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nl:sl;Ci.useSyncExternalStore=Pt.useSyncExternalStore!==void 0?Pt.useSyncExternalStore:il;Si.exports=Ci;var al=Si.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or=U,ol=al;function ll(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var cl=typeof Object.is=="function"?Object.is:ll,ul=ol.useSyncExternalStore,dl=Or.useRef,hl=Or.useEffect,fl=Or.useMemo,ml=Or.useDebugValue;ki.useSyncExternalStoreWithSelector=function(r,e,t,s,n){var i=dl(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=fl(function(){function c(v){if(!u){if(u=!0,d=v,v=s(v),n!==void 0&&o.hasValue){var y=o.value;if(n(y,v))return h=y}return h=v}if(y=h,cl(d,v))return y;var f=s(v);return n!==void 0&&n(y,f)?(d=v,y):(d=v,h=f)}var u=!1,d,h,g=t===void 0?null:t;return[function(){return c(e())},g===null?void 0:function(){return c(g())}]},[e,t,s,n]);var l=ul(r,i[0],i[1]);return hl(function(){o.hasValue=!0,o.value=l},[l]),ml(l),l};ji.exports=ki;var gl=ji.exports;const pl=la(gl),Ti={},{useDebugValue:vl}=Jn,{useSyncExternalStoreWithSelector:yl}=pl;let gn=!1;const bl=r=>r;function xl(r,e=bl,t){(Ti?"production":void 0)!=="production"&&t&&!gn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gn=!0);const s=yl(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return vl(s),s}const wl=r=>{(Ti?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Jo(r):r,t=(s,n)=>xl(e,s,n);return Object.assign(t,e),t},Ni=r=>wl,vr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxjb3h0YW55Y2tqenl4eGNzanp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDUzMjcsImV4cCI6MjA2MzkyMTMyN30.W2JgvZdXubvWpKCNZ7TfjLiKANZO1Hlb164fBEKH2dA",VITE_SUPABASE_URL:"https://lcoxtanyckjzyxxcsjzz.supabase.co"},bs=new Map,ur=r=>{const e=bs.get(r);return e?Object.fromEntries(Object.entries(e.stores).map(([t,s])=>[t,s.getState()])):{}},_l=(r,e,t)=>{if(r===void 0)return{type:"untracked",connection:e.connect(t)};const s=bs.get(t.name);if(s)return{type:"tracked",store:r,...s};const n={connection:e.connect(t),stores:{}};return bs.set(t.name,n),{type:"tracked",store:r,...n}},jl=(r,e={})=>(t,s,n)=>{const{enabled:i,anonymousActionType:o,store:l,...c}=e;let u;try{u=(i??(vr?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(vr?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),r(t,s,n);const{connection:d,...h}=_l(l,u,c);let g=!0;n.setState=(f,m,b)=>{const _=t(f,m);if(!g)return _;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return l===void 0?(d==null||d.send(w,s()),_):(d==null||d.send({...w,type:`${l}/${w.type}`},{...ur(c.name),[l]:n.getState()}),_)};const v=(...f)=>{const m=g;g=!1,t(...f),g=m},y=r(n.setState,s,n);if(h.type==="untracked"?d==null||d.init(y):(h.stores[h.store]=n,d==null||d.init(Object.fromEntries(Object.entries(h.stores).map(([f,m])=>[f,f===h.store?y:m.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let f=!1;const m=n.dispatch;n.dispatch=(...b)=>{(vr?"production":void 0)!=="production"&&b[0].type==="__setState"&&!f&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),f=!0),m(...b)}}return d.subscribe(f=>{var m;switch(f.type){case"ACTION":if(typeof f.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Hr(f.payload,b=>{if(b.type==="__setState"){if(l===void 0){v(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const _=b.state[l];if(_==null)return;JSON.stringify(n.getState())!==JSON.stringify(_)&&v(_);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(b)});case"DISPATCH":switch(f.payload.type){case"RESET":return v(y),l===void 0?d==null?void 0:d.init(n.getState()):d==null?void 0:d.init(ur(c.name));case"COMMIT":if(l===void 0){d==null||d.init(n.getState());return}return d==null?void 0:d.init(ur(c.name));case"ROLLBACK":return Hr(f.state,b=>{if(l===void 0){v(b),d==null||d.init(n.getState());return}v(b[l]),d==null||d.init(ur(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Hr(f.state,b=>{if(l===void 0){v(b);return}JSON.stringify(n.getState())!==JSON.stringify(b[l])&&v(b[l])});case"IMPORT_STATE":{const{nextLiftedState:b}=f.payload,_=(m=b.computedStates.slice(-1)[0])==null?void 0:m.state;if(!_)return;v(l===void 0?_:_[l]),d==null||d.send(null,b);return}case"PAUSE_RECORDING":return g=!g}return}}),y},Pi=jl,Hr=(r,e)=>{let t;try{t=JSON.parse(r)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}t!==void 0&&e(t)};function kl(r,e){let t;try{t=r()}catch{return}return{getItem:n=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(n))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(n,i)=>t.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>t.removeItem(n)}}const Jt=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Jt(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Jt(s)(t)}}}},Sl=(r,e)=>(t,s,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,b)=>({...b,...m}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return r((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},s,n);const d=Jt(i.serialize),h=()=>{const m=i.partialize({...s()});let b;const _=d({state:m,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return _},g=n.setState;n.setState=(m,b)=>{g(m,b),h()};const v=r((...m)=>{t(...m),h()},s,n);let y;const f=()=>{var m;if(!u)return;o=!1,l.forEach(_=>_(s()));const b=((m=i.onRehydrateStorage)==null?void 0:m.call(i,s()))||void 0;return Jt(u.getItem.bind(u))(i.name).then(_=>{if(_)return i.deserialize(_)}).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return i.migrate(_.state,_.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return _.state}).then(_=>{var w;return y=i.merge(_,(w=s())!=null?w:v),t(y,!0),h()}).then(()=>{b==null||b(y,void 0),o=!0,c.forEach(_=>_(y))}).catch(_=>{b==null||b(void 0,_)})};return n.persist={setOptions:m=>{i={...i,...m},m.getStorage&&(u=m.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:m=>(l.add(m),()=>{l.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},f(),y||v},Cl=(r,e)=>(t,s,n)=>{let i={storage:kl(()=>localStorage),partialize:f=>f,version:0,merge:(f,m)=>({...m,...f}),...e},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return r((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...f)},s,n);const d=()=>{const f=i.partialize({...s()});return u.setItem(i.name,{state:f,version:i.version})},h=n.setState;n.setState=(f,m)=>{h(f,m),d()};const g=r((...f)=>{t(...f),d()},s,n);n.getInitialState=()=>g;let v;const y=()=>{var f,m;if(!u)return;o=!1,l.forEach(_=>{var w;return _((w=s())!=null?w:g)});const b=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(f=s())!=null?f:g))||void 0;return Jt(u.getItem.bind(u))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var w;const[j,x]=_;if(v=i.merge(x,(w=s())!=null?w:g),t(v,!0),j)return d()}).then(()=>{b==null||b(v,void 0),v=s(),o=!0,c.forEach(_=>_(v))}).catch(_=>{b==null||b(void 0,_)})};return n.persist={setOptions:f=>{i={...i,...f},f.storage&&(u=f.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},i.skipHydration||y(),v||g},Tl=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((vr?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Sl(r,e)):Cl(r,e),Ei=Tl,pn={dateRange:{from:new Date(Date.now()-30*24*60*60*1e3),to:new Date},barangays:[],categories:[],brands:[],stores:[],searchTerm:"",quickFilters:{topPerformers:!1,newProducts:!1,trending:!1}},at=Ni()(Pi(Ei((r,e)=>({...pn,setFilter:(t,s)=>{r({[t]:s}),e().updateURL()},addFilter:(t,s)=>{const n=e()[t];n.includes(s)||(r({[t]:[...n,s]}),e().updateURL())},removeFilter:(t,s)=>{const n=e()[t];r({[t]:n.filter(i=>i!==s)}),e().updateURL()},reset:()=>{r(pn),e().updateURL()},resetCategory:t=>{r({[t]:[]}),e().updateURL()},getActiveFiltersCount:()=>{const t=e();return t.barangays.length+t.categories.length+t.brands.length+t.stores.length+(t.dateRange.from&&t.dateRange.to?1:0)+(t.searchTerm?1:0)+Object.values(t.quickFilters).filter(Boolean).length},syncWithURL:()=>{if(typeof window>"u")return;const t=new URLSearchParams(window.location.search),s={},n=t.get("startDate"),i=t.get("endDate");n&&i&&(s.dateRange={from:new Date(n),to:new Date(i)}),["barangays","categories","brands","stores"].forEach(l=>{const c=t.get(l);c&&(s[l]=c.split(",").filter(Boolean))});const o=t.get("search");o&&(s.searchTerm=o),Object.keys(s).length>0&&r(s)},updateURL:()=>{if(typeof window>"u")return;const t=e(),s=new URLSearchParams;t.dateRange.from&&t.dateRange.to&&(s.set("startDate",t.dateRange.from.toISOString().split("T")[0]),s.set("endDate",t.dateRange.to.toISOString().split("T")[0])),["barangays","categories","brands","stores"].forEach(i=>{const o=t[i];o.length>0&&s.set(i,o.join(","))}),t.searchTerm&&s.set("search",t.searchTerm);const n=`${window.location.pathname}?${s.toString()}`;window.history.replaceState({},"",n)}}),{name:"scout-filters",partialize:r=>({dateRange:r.dateRange,barangays:r.barangays,categories:r.categories,brands:r.brands,stores:r.stores,searchTerm:r.searchTerm,quickFilters:r.quickFilters})}),{name:"filter-store"})),Nl=({availableOptions:r={barangays:[],categories:[],brands:[],stores:[]}})=>{const{dateRange:e,barangays:t,categories:s,brands:n,stores:i,searchTerm:o,quickFilters:l,setFilter:c,addFilter:u,removeFilter:d,reset:h,resetCategory:g,getActiveFiltersCount:v}=at(),[y,f]=U.useState(!1),[m,b]=U.useState({barangays:!1,categories:!1,brands:!1,stores:!1}),_=v(),w=({type:x,icon:k,label:C,selectedValues:N,options:L})=>a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>b(R=>({...R,[x]:!R[x]})),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-colors ${N.length>0?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(k,{className:"w-4 h-4"}),a.jsx("span",{children:C}),N.length>0&&a.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-0.5 min-w-[20px] text-center",children:N.length}),a.jsx(ys,{className:`w-4 h-4 transition-transform ${m[x]?"rotate-180":""}`})]}),m[x]&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:[a.jsx("div",{className:"p-2 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:C}),N.length>0&&a.jsx("button",{onClick:()=>g(x),className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear all"})]})}),a.jsx("div",{className:"p-1",children:L.map(R=>a.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 rounded hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:N.includes(R.value),onChange:W=>{W.target.checked?u(x,R.value):d(x,R.value)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700 flex-1",children:R.label}),R.count&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded",children:R.count})]},R.value))})]})]}),j=({key:x,label:k,active:C})=>a.jsx("button",{onClick:()=>c("quickFilters",{...l,[x]:!C}),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${C?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"}`,children:k});return a.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search products, brands, or stores...",value:o,onChange:x=>c("searchTerm",x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o&&a.jsx("button",{onClick:()=>c("searchTerm",""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 hover:text-gray-600",children:a.jsx(Oe,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>f(!y),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-colors ${e.from&&e.to?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Mo,{className:"w-4 h-4"}),a.jsx("span",{children:e.from&&e.to?`${e.from.toLocaleDateString()} - ${e.to.toLocaleDateString()}`:"Date Range"}),a.jsx(ys,{className:`w-4 h-4 transition-transform ${y?"rotate-180":""}`})]}),y&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>{const x=new Date,k=new Date(x.getTime()-7*24*60*60*1e3);c("dateRange",{from:k,to:x}),f(!1)},className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded",children:"Last 7 days"}),a.jsx("button",{onClick:()=>{const x=new Date,k=new Date(x.getTime()-30*24*60*60*1e3);c("dateRange",{from:k,to:x}),f(!1)},className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded",children:"Last 30 days"}),a.jsx("button",{onClick:()=>{const x=new Date,k=new Date(x.getTime()-90*24*60*60*1e3);c("dateRange",{from:k,to:x}),f(!1)},className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded",children:"Last 90 days"})]})})]}),a.jsx(w,{type:"barangays",icon:un,label:"Locations",selectedValues:t,options:r.barangays||[]}),a.jsx(w,{type:"categories",icon:hn,label:"Categories",selectedValues:s,options:r.categories||[]}),a.jsx(w,{type:"brands",icon:cn,label:"Brands",selectedValues:n,options:r.brands||[]}),a.jsx(w,{type:"stores",icon:dn,label:"Stores",selectedValues:i,options:r.stores||[]}),_>0&&a.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 transition-colors",children:[a.jsx(Oe,{className:"w-4 h-4"}),"Clear All (",_,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quick Filters:"}),a.jsx(j,{label:"Top Performers",active:l.topPerformers},"topPerformers"),a.jsx(j,{label:"New Products",active:l.newProducts},"newProducts"),a.jsx(j,{label:"Trending",active:l.trending},"trending")]}),(t.length>0||s.length>0||n.length>0||i.length>0)&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Filters:"}),t.map(x=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[a.jsx(un,{className:"w-3 h-3"}),x,a.jsx("button",{onClick:()=>d("barangays",x),className:"hover:text-blue-600",children:a.jsx(Oe,{className:"w-3 h-3"})})]},`barangay-${x}`)),s.map(x=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:[a.jsx(hn,{className:"w-3 h-3"}),x,a.jsx("button",{onClick:()=>d("categories",x),className:"hover:text-green-600",children:a.jsx(Oe,{className:"w-3 h-3"})})]},`category-${x}`)),n.map(x=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:[a.jsx(cn,{className:"w-3 h-3"}),x,a.jsx("button",{onClick:()=>d("brands",x),className:"hover:text-purple-600",children:a.jsx(Oe,{className:"w-3 h-3"})})]},`brand-${x}`)),i.map(x=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:[a.jsx(dn,{className:"w-3 h-3"}),x,a.jsx("button",{onClick:()=>d("stores",x),className:"hover:text-orange-600",children:a.jsx(Oe,{className:"w-3 h-3"})})]},`store-${x}`))]})]})},Pl="modulepreload",El=function(r){return"/"+r},vn={},sr=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=El(c),c in vn)return;vn[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Pl,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Ol=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sr(async()=>{const{default:s}=await Promise.resolve().then(()=>Dt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ls extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Rl extends Ls{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Al extends Ls{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dl extends Ls{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xs;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(xs||(xs={}));var Il=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Ml{constructor(e,{headers:t={},customFetch:s,region:n=xs.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Ol(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Il(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(y=>{throw new Rl(y)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Al(d);if(!d.ok)throw new Dl(d);let g=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield d.json():g==="application/octet-stream"?v=yield d.blob():g==="text/event-stream"?v=d:g==="multipart/form-data"?v=yield d.formData():v=yield d.text(),{data:v,error:null}}catch(n){return{data:null,error:n}}})}}var ie={},Us={},Rr={},nr={},Ar={},Dr={},$l=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Et=$l();const Ll=Et.fetch,Oi=Et.fetch.bind(Et),Ri=Et.Headers,Ul=Et.Request,Fl=Et.Response,Dt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ri,Request:Ul,Response:Fl,default:Oi,fetch:Ll},Symbol.toStringTag,{value:"Module"})),ql=ca(Dt);var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});let Bl=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ir.default=Bl;var Ai=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dr,"__esModule",{value:!0});const Wl=Ai(ql),zl=Ai(Ir);let Hl=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Wl.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,g=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const f=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");f&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const f=await i.text();try{u=JSON.parse(f),Array.isArray(u)&&i.status===404&&(d=[],u=null,g=200,v="OK")}catch{i.status===404&&f===""?(g=204,v="No Content"):u={message:f}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,v="OK"),u&&this.shouldThrowOnError)throw new zl.default(u)}return{error:u,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Dr.default=Hl;var Gl=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ar,"__esModule",{value:!0});const Kl=Gl(Dr);let Ql=class extends Kl.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ar.default=Ql;var Vl=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nr,"__esModule",{value:!0});const Jl=Vl(Ar);let Yl=class extends Jl.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};nr.default=Yl;var Xl=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rr,"__esModule",{value:!0});const Ft=Xl(nr);let Zl=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Ft.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ft.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ft.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Ft.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ft.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Rr.default=Zl;var Mr={},$r={};Object.defineProperty($r,"__esModule",{value:!0});$r.version=void 0;$r.version="0.0.0-automated";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.DEFAULT_HEADERS=void 0;const ec=$r;Mr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ec.version}`};var Di=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Us,"__esModule",{value:!0});const tc=Di(Rr),rc=Di(nr),sc=Mr;let nc=class Ii{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},sc.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new tc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ii(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new rc.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Us.default=nc;var It=ce&&ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ie,"__esModule",{value:!0});ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const Mi=It(Us);ie.PostgrestClient=Mi.default;const $i=It(Rr);ie.PostgrestQueryBuilder=$i.default;const Li=It(nr);ie.PostgrestFilterBuilder=Li.default;const Ui=It(Ar);ie.PostgrestTransformBuilder=Ui.default;const Fi=It(Dr);ie.PostgrestBuilder=Fi.default;const qi=It(Ir);ie.PostgrestError=qi.default;var ic=ie.default={PostgrestClient:Mi.default,PostgrestQueryBuilder:$i.default,PostgrestFilterBuilder:Li.default,PostgrestTransformBuilder:Ui.default,PostgrestBuilder:Fi.default,PostgrestError:qi.default};const{PostgrestClient:ac,PostgrestQueryBuilder:Lh,PostgrestFilterBuilder:Uh,PostgrestTransformBuilder:Fh,PostgrestBuilder:qh,PostgrestError:Bh}=ic;let ws;typeof window>"u"?ws=require("ws"):ws=window.WebSocket;const oc="2.11.10",lc={"X-Client-Info":`realtime-js/${oc}`},cc="1.0.0",Bi=1e4,uc=1e3;var gt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(gt||(gt={}));var X;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(X||(X={}));var fe;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fe||(fe={}));var _s;(function(r){r.websocket="websocket"})(_s||(_s={}));var Qe;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Qe||(Qe={}));class dc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Wi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var z;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(z||(z={}));const yn=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=hc(o,r,e,n),i),{})},hc=(r,e,t,s)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!s.includes(i)?zi(i,o):js(o)},zi=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return pc(e,t)}switch(r){case z.bool:return fc(e);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return mc(e);case z.json:case z.jsonb:return gc(e);case z.timestamp:return vc(e);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:return js(e);default:return js(e)}},js=r=>r,fc=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},mc=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},gc=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},pc=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>zi(e,l))}return r},vc=r=>typeof r=="string"?r.replace(" ","T"):r,Hi=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Gr{constructor(e,t,s={},n=Bi){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bn;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(bn||(bn={}));class Ht{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ht.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Ht.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ht.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const g=d.map(m=>m.presence_ref),v=h.map(m=>m.presence_ref),y=d.filter(m=>v.indexOf(m.presence_ref)<0),f=h.filter(m=>g.indexOf(m.presence_ref)<0);y.length>0&&(l[u]=y),f.length>0&&(c[u]=f)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(v=>v.presence_ref),g=d.filter(v=>h.indexOf(v.presence_ref)<0);e[l].unshift(...g)}s(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,n(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xn;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(xn||(xn={}));var wn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(wn||(wn={}));var ke;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ke||(ke={}));class Fs{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=X.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gr(this,fe.join,this.params,this.timeout),this.rejoinTimer=new Wi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=X.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=X.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=X.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fe.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ht(this),this.broadcastEndpointURL=Hi(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(ke.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ke.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(ke.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(h=g==null?void 0:g.length)!==null&&h!==void 0?h:0,y=[];for(let f=0;f<v;f++){const m=g[f],{filter:{event:b,schema:_,table:w,filter:j}}=m,x=d&&d[f];if(x&&x.event===b&&x.schema===_&&x.table===w&&x.filter===j)y.push(Object.assign(Object.assign({},m),{id:x.id}));else{this.unsubscribe(),this.state=X.errored,e==null||e(ke.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ke.SUBSCRIBED);return}}).receive("error",d=>{this.state=X.errored,e==null||e(ke.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ke.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=X.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fe.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new Gr(this,fe.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Gr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=fe;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let g=this._onMessage(o,t,s);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var y,f,m;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((m=(f=v.filter)===null||f===void 0?void 0:f.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(v=>v.callback(g,s)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var y,f,m,b,_,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const j=v.id,x=(y=v.filter)===null||y===void 0?void 0:y.event;return j&&((f=t.ids)===null||f===void 0?void 0:f.includes(j))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const j=(_=(b=v==null?void 0:v.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:f,table:m,commit_timestamp:b,type:_,errors:w}=y;g=Object.assign(Object.assign({},{schema:f,table:m,commit_timestamp:b,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(y))}v.callback(g,s)})}_isClosed(){return this.state===X.closed}_isJoined(){return this.state===X.joined}_isJoining(){return this.state===X.joining}_isLeaving(){return this.state===X.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Fs.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fe.close,{},e)}_onError(e){this._on(fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=X.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=yn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=yn(e.columns,e.old_record)),t}}const _n=()=>{},yc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bc{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=lc,this.params={},this.timeout=Bi,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_n,this.ref=0,this.logger=_n,this.conn=null,this.sendBuffer=[],this.serializer=new dc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>sr(async()=>{const{default:c}=await Promise.resolve().then(()=>Dt);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${_s.websocket}`,this.httpEndpoint=Hi(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Wi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ws),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new xc(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case gt.connecting:return Qe.Connecting;case gt.open:return Qe.Open;case gt.closing:return Qe.Closing;default:return Qe.Closed}}isConnected(){return this.connectionState()===Qe.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Fs(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(fe.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(uc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([yc],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class xc{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class qs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function V(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class wc extends qs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ks extends qs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var _c=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Gi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sr(async()=>{const{default:s}=await Promise.resolve().then(()=>Dt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},jc=()=>_c(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sr(()=>Promise.resolve().then(()=>Dt),void 0)).Response:Response}),Ss=r=>{if(Array.isArray(r))return r.map(t=>Ss(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Ss(s)}),e};var ot=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Kr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),kc=(r,e,t)=>ot(void 0,void 0,void 0,function*(){const s=yield jc();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new wc(Kr(n),r.status||500))}).catch(n=>{e(new ks(Kr(n),n))}):e(new ks(Kr(r),r))}),Sc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function ir(r,e,t,s,n,i){return ot(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Sc(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>kc(c,l,s))})})}function wr(r,e,t,s){return ot(this,void 0,void 0,function*(){return ir(r,"GET",e,t,s)})}function Re(r,e,t,s,n){return ot(this,void 0,void 0,function*(){return ir(r,"POST",e,s,n,t)})}function Cc(r,e,t,s,n){return ot(this,void 0,void 0,function*(){return ir(r,"PUT",e,s,n,t)})}function Tc(r,e,t,s){return ot(this,void 0,void 0,function*(){return ir(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Ki(r,e,t,s,n){return ot(this,void 0,void 0,function*(){return ir(r,"DELETE",e,s,n,t)})}var re=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const Nc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Gi(n)}uploadOrUpdate(e,t,s,n){return re(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},jn),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield h.json();return h.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(V(i))return{data:null,error:i};throw i}})}upload(e,t,s){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:jn.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),g=yield h.json();return h.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(c){if(V(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Re(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new qs("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}})}update(e,t,s){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return re(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}})}copy(e,t,s){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield Re(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Re(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return re(this,void 0,void 0,function*(){try{const n=yield Re(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}})}download(e,t){return re(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield wr(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(V(l))return{data:null,error:l};throw l}})}info(e){return re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield wr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ss(s),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}})}exists(e){return re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Tc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(V(s)&&s instanceof ks){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}list(e,t,s){return re(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Nc),t),{prefix:e||""});return{data:yield Re(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ec="2.7.1",Oc={"X-Client-Info":`storage-js/${Ec}`};var lt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Rc{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Oc),t),this.fetch=Gi(s)}listBuckets(){return lt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}})}getBucket(e){return lt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return lt(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return lt(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}})}emptyBucket(e){return lt(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}deleteBucket(e){return lt(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}}class Ac extends Rc{constructor(e,t={},s){super(e,t,s)}from(e){return new Pc(this.url,this.headers,e,this.fetch)}}const Dc="2.50.0";let zt="";typeof Deno<"u"?zt="deno":typeof document<"u"?zt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zt="react-native":zt="node";const Ic={"X-Client-Info":`supabase-js-${zt}/${Dc}`},Mc={headers:Ic},$c={schema:"public"},Lc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Uc={};var Fc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};const qc=r=>{let e;return r?e=r:typeof fetch>"u"?e=Oi:e=fetch,(...t)=>e(...t)},Bc=()=>typeof Headers>"u"?Ri:Headers,Wc=(r,e,t)=>{const s=qc(t),n=Bc();return(i,o)=>Fc(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};var zc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};function Hc(r){return r.endsWith("/")?r:r+"/"}function Gc(r,e){var t,s;const{db:n,auth:i,realtime:o,global:l}=r,{db:c,auth:u,realtime:d,global:h}=e,g={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>zc(this,void 0,void 0,function*(){return""})};return r.accessToken?g.accessToken=r.accessToken:delete g.accessToken,g}const Qi="2.70.0",ft=30*1e3,Cs=3,Qr=Cs*ft,Kc="http://localhost:9999",Qc="supabase.auth.token",Vc={"X-Client-Info":`gotrue-js/${Qi}`},Ts="X-Supabase-Api-Version",Vi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yc=6e5;class Bs extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function P(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Xc extends Bs{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Zc(r){return P(r)&&r.name==="AuthApiError"}class Ji extends Bs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ze extends Bs{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ee extends ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eu(r){return P(r)&&r.name==="AuthSessionMissingError"}class dr extends ze{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hr extends ze{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fr extends ze{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tu(r){return P(r)&&r.name==="AuthImplicitGrantRedirectError"}class kn extends ze{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ns extends ze{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Vr(r){return P(r)&&r.name==="AuthRetryableFetchError"}class Sn extends ze{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Gt extends ze{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cn=` 	
\r=`.split(""),ru=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Cn.length;e+=1)r[Cn[e].charCodeAt(0)]=-2;for(let e=0;e<_r.length;e+=1)r[_r[e].charCodeAt(0)]=e;return r})();function Tn(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(_r[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(_r[s]),e.queuedBits-=6}}function Yi(r,e,t){const s=ru[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Nn(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{iu(o,s,t)};for(let o=0;o<r.length;o+=1)Yi(r.charCodeAt(o),n,i);return e.join("")}function su(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function nu(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}su(s,e)}}function iu(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function au(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Yi(r.charCodeAt(n),t,s);return new Uint8Array(e)}function ou(r){const e=[];return nu(r,t=>e.push(t)),new Uint8Array(e)}function lu(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return r.forEach(n=>Tn(n,t,s)),Tn(null,t,s),e.join("")}function cu(r){return Math.round(Date.now()/1e3)+r}function uu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof window<"u"&&typeof document<"u",He={tested:!1,writable:!1},Kt=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(He.tested)return He.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),He.tested=!0,He.writable=!0}catch{He.tested=!0,He.writable=!1}return He.writable};function du(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Xi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>sr(async()=>{const{default:s}=await Promise.resolve().then(()=>Dt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},hu=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Zi=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},mr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},gr=async(r,e)=>{await r.removeItem(e)};class Lr{constructor(){this.promise=new Lr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Lr.promiseConstructor=Promise;function Jr(r){const e=r.split(".");if(e.length!==3)throw new Gt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Jc.test(e[s]))throw new Gt("JWT not in base64url format");return{header:JSON.parse(Nn(e[0])),payload:JSON.parse(Nn(e[1])),signature:au(e[2]),raw:{header:e[0],payload:e[1]}}}async function fu(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function mu(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function gu(r){return("0"+r.toString(16)).substr(-2)}function pu(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,gu).join("")}async function vu(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function yu(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await vu(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ct(r,e,t=!1){const s=pu();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Zi(r,`${e}-code-verifier`,n);const i=await yu(s);return[i,s===i?"plain":"s256"]}const bu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xu(r){const e=r.headers.get(Ts);if(!e||!e.match(bu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wu(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function _u(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ju=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ut(r){if(!ju.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var ku=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Ge=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Su=[502,503,504];async function Pn(r){var e;if(!hu(r))throw new Ns(Ge(r),0);if(Su.includes(r.status))throw new Ns(Ge(r),r.status);let t;try{t=await r.json()}catch(i){throw new Ji(Ge(i),i)}let s;const n=xu(r);if(n&&n.getTime()>=Vi["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Sn(Ge(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ee}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sn(Ge(t),r.status,t.weak_password.reasons);throw new Xc(Ge(t),r.status||500,s)}const Cu=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function A(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Ts]||(i[Ts]=Vi["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Tu(r,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Tu(r,e,t,s,n,i){const o=Cu(e,s,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new Ns(Ge(c),0)}if(l.ok||await Pn(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Pn(c)}}function je(r){var e;let t=null;Ou(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=cu(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function En(r){const e=je(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ae(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Nu(r){return{data:r,error:null}}function Pu(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,o=ku(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Eu(r){return r}function Ou(r){return r.access_token&&r.refresh_token&&r.expires_in}const Yr=["global","local","others"];var Ru=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Au{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Xi(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Yr[0]){if(Yr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yr.join(", ")}`);try{return await A(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ae})}catch(s){if(P(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ru(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Pu,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(P(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ae})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Eu});if(d.error)throw d.error;const h=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(y=>{const f=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(y.split(";")[1].split("=")[1]);u[`${m}Page`]=f}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(P(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ut(e);try{return await A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ae})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ut(e);try{return await A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ae})}catch(s){if(P(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ut(e);try{return await A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ae})}catch(s){if(P(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ut(e.userId);try{const{data:t,error:s}=await A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(P(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ut(e.userId),ut(e.id);try{return{data:await A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}}}const Du={getItem:r=>Kt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Kt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Kt()&&globalThis.localStorage.removeItem(r)}};function On(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Iu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dt={debug:!!(globalThis&&Kt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ea extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mu extends ea{}async function $u(r,e,t){dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),dt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Mu(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(dt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Iu();const Lu={url:Kc,storageKey:Qc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rn(r,e,t){return await t()}class Yt{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yt.nextInstanceID,Yt.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Lu),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Au({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Xi(n.fetch),this.lock=n.lock||Rn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ue()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=$u:this.lock=Rn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Kt()?this.storage=Du:(this.memoryStorage={},this.storage=On(this.memoryStorage)):(this.memoryStorage={},this.storage=On(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=du(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),ue()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tu(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return P(t)?{error:t}:{error:new Ji("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:je}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(P(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:d,password:h,options:g}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await ct(this.storage,this.storageKey)),i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:h,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:y},xform:je})}else if("phone"in e){const{phone:d,password:h,options:g}=e;i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:je})}else throw new hr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(P(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:En})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:En})}else throw new hr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new dr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,o,l,c,u,d,h,g,v;let y,f;if("message"in e)y=e.message,f=e.signature;else{const{chain:m,wallet:b,statement:_,options:w}=e;let j;if(ue())if(typeof b=="object")j=b;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))j=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=b}const x=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const k=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),_?{statement:_}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),f=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${x.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(n=(s=w==null?void 0:w.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=k}}try{const{data:m,error:b}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:lu(f)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:je});if(b)throw b;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new dr}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:b})}catch(m){if(P(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await mr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:o}=await A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:je});if(await gr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(P(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,l=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:je}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new dr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ct(this.storage,this.storageKey));const{error:h}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new hr("You must provide either an email or phone number.")}catch(l){if(P(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:je});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(P(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ct(this.storage,this.storageKey)),await A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Nu})}catch(i){if(P(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ee;const{error:n}=await A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(P(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await A(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await A(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new hr("You must provide either an email or phone number and a type")}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Qr:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ae}):await this._useSession(async t=>{var s,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ae})})}catch(t){if(P(t))return eu(t)&&(await this._removeSession(),await gr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ee;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ct(this.storage,this.storageKey));const{data:u,error:d}=await A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ae});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(P(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ee;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:o}=Jr(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(P(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ee;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ue())throw new fr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new kn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kn("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new fr("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let g=d+h;c&&(g=parseInt(c));const v=g-d;v*1e3<=ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const y=g-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,d);const{data:f,error:m}=await this._getUser(i);if(m)throw m;const b={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:g,refresh_token:o,token_type:u,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(s){if(P(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Zc(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await gr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=uu(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await ct(this.storage,this.storageKey,!0));try{return await A(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(P(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await A(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ue()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(P(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await A(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await mu(async n=>(n>0&&await fu(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Vr(i)&&Date.now()+o-s<ft})}catch(s){if(this._debug(t,"error",s),P(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),ue()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await mr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Qr;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Qr}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Vr(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Lr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ee;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),P(i)){const o={session:null,error:i};return Vr(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Zi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await gr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ft}ms, refresh threshold is ${Cs} ticks`),n<=Cs&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ea)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ct(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await A(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Jr(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+Yc>Date.now()))return s;const{data:n,error:i}=await A(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Gt("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(o=>o.kid===e),!s)throw new Gt("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};s=v.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=Jr(s);if(wu(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:i,header:n,signature:o},error:null}}const u=_u(n.alg),d=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,ou(`${l}.${c}`)))throw new Gt("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}}}Yt.nextInstanceID=0;const Uu=Yt;class Fu extends Uu{constructor(e){super(e)}}var qu=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(r,e||[])).next())})};class Bu{constructor(e,t,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Hc(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:$c,realtime:Uc,auth:Object.assign(Object.assign({},Lc),{storageKey:u}),global:Mc},h=Gc(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Wc(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ac(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ml(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ac(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return qu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fu({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wu=(r,e,t)=>new Bu(r,e,t),Xr={transactions:25e3,products:5e3,brands:1e3},zu="https://lcoxtanyckjzyxxcsjzz.supabase.co",Hu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxjb3h0YW55Y2tqenl4eGNzanp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDUzMjcsImV4cCI6MjA2MzkyMTMyN30.W2JgvZdXubvWpKCNZ7TfjLiKANZO1Hlb164fBEKH2dA",st=Wu(zu,Hu),Gu=()=>{const{data:r,isLoading:e,error:t}=Ot({queryKey:["filter-options"],queryFn:async()=>{console.log("🔍 Fetching filter options...");const{data:s,error:n}=await st.from("transactions").select("store_location").limit(Xr.transactions);if(n)throw n;const{data:i,error:o}=await st.from("products").select("category").limit(Xr.products);if(o)throw o;const{data:l,error:c}=await st.from("brands").select("name").limit(Xr.brands);if(c)throw c;const u=new Map;s==null||s.forEach(f=>{f.store_location&&u.set(f.store_location,(u.get(f.store_location)||0)+1)});const d=Array.from(u.entries()).map(([f,m])=>({value:f,label:f,count:m})).sort((f,m)=>m.count-f.count),h=new Map;i==null||i.forEach(f=>{f.category&&h.set(f.category,(h.get(f.category)||0)+1)});const g=Array.from(h.entries()).map(([f,m])=>({value:f,label:f,count:m})).sort((f,m)=>m.count-f.count),v=(l||[]).filter(f=>f.name).map(f=>({value:f.name,label:f.name,count:1})).sort((f,m)=>f.label.localeCompare(m.label)),y=d.map(f=>({value:f.value,label:`Store in ${f.label}`,count:f.count}));return console.log("✅ Filter options loaded:",{barangays:d.length,categories:g.length,brands:v.length,stores:y.length}),{barangays:d,categories:g,brands:v,stores:y}},staleTime:6e5,gcTime:18e5});return{barangays:(r==null?void 0:r.barangays)??[],categories:(r==null?void 0:r.categories)??[],brands:(r==null?void 0:r.brands)??[],stores:(r==null?void 0:r.stores)??[],isLoading:e,error:t}},ta=()=>{const r=at(e=>e.syncWithURL);U.useEffect(()=>{r();const e=()=>{r()};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[r]),U.useEffect(()=>{const e=()=>{r()},t=window.history.pushState,s=window.history.replaceState;return window.history.pushState=function(...n){t.apply(this,n),e()},window.history.replaceState=function(...n){s.apply(this,n),e()},()=>{window.history.pushState=t,window.history.replaceState=s}},[r])};function Ku(){ta();const r=Gu();return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(Qo,{}),a.jsxs("div",{className:"lg:pl-64",children:[a.jsx(Nl,{availableOptions:r}),a.jsx("main",{className:"p-4 lg:p-8",children:a.jsx(ua,{})})]})]})}const D=U.forwardRef(({className:r,...e},t)=>a.jsx("div",{ref:t,className:ae("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));D.displayName="Card";const G=U.forwardRef(({className:r,...e},t)=>a.jsx("div",{ref:t,className:ae("flex flex-col space-y-1.5 p-6",r),...e}));G.displayName="CardHeader";const K=U.forwardRef(({className:r,...e},t)=>a.jsx("h3",{ref:t,className:ae("text-2xl font-semibold leading-none tracking-tight",r),...e}));K.displayName="CardTitle";const Qu=U.forwardRef(({className:r,...e},t)=>a.jsx("p",{ref:t,className:ae("text-sm text-muted-foreground",r),...e}));Qu.displayName="CardDescription";const $=U.forwardRef(({className:r,...e},t)=>a.jsx("div",{ref:t,className:ae("p-6 pt-0",r),...e}));$.displayName="CardContent";const Vu=U.forwardRef(({className:r,...e},t)=>a.jsx("div",{ref:t,className:ae("flex items-center p-6 pt-0",r),...e}));Vu.displayName="CardFooter";function pr({title:r,value:e,format:t="number",trend:s,onClick:n,subtitle:i,icon:o}){const l=d=>{switch(t){case"currency":return At(d);case"percentage":return vi(d);default:return Nr(d)}},c=()=>s?s>0?a.jsx(We,{className:"h-4 w-4 text-green-600"}):a.jsx(_i,{className:"h-4 w-4 text-red-600"}):null,u=()=>s?s>0?"text-green-600":"text-red-600":"text-gray-600";return a.jsx(D,{className:`transition-all duration-200 ${n?"cursor-pointer hover:shadow-lg hover:border-blue-300 hover:bg-blue-50/50":""}`,onClick:n,children:a.jsxs($,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[o&&a.jsx("div",{className:"text-blue-600",children:o}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:r}),i&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]})]}),n&&a.jsx(Ms,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-600"})]}),a.jsx("div",{className:"mt-4 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l(e)}),s&&a.jsxs("div",{className:"flex items-center mt-1 space-x-1",children:[c(),a.jsxs("span",{className:`text-sm font-medium ${u()}`,children:[Math.abs(s).toFixed(1),"%"]}),a.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]})]})})]})})}function Ju({data:r,title:e,value:t,trend:s,onClick:n}){const i=s>0;return a.jsxs(D,{className:`transition-all duration-200 ${n?"cursor-pointer hover:shadow-lg hover:border-blue-300 hover:bg-blue-50/50":""}`,onClick:n,children:[a.jsx(G,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(K,{className:"text-sm font-medium text-gray-600",children:e}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t}),a.jsxs("div",{className:`flex items-center space-x-1 ${i?"text-green-600":"text-red-600"}`,children:[a.jsx(We,{className:`h-4 w-4 ${i?"":"rotate-180"}`}),a.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(s).toFixed(1),"%"]})]})]})]}),n&&a.jsx(Ms,{className:"h-5 w-5 text-gray-400"})]})}),a.jsx($,{className:"pt-0",children:a.jsx("div",{className:"h-20",children:a.jsx(Tr,{width:"100%",height:"100%",children:a.jsxs(Xn,{data:r,children:[a.jsx(yr,{hide:!0,domain:["dataMin","dataMax"]}),a.jsx(Zn,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,dot:!1,activeDot:{r:3,fill:"#3b82f6"}})]})})})})]})}function Yu({data:r,title:e,onItemClick:t}){return a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{className:"text-sm font-medium text-gray-600",children:e})}),a.jsx($,{className:"pt-0",children:a.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((s,n)=>a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${t?"cursor-pointer hover:shadow-md hover:border-blue-300 hover:bg-blue-50/50":""}`,onClick:()=>t==null?void 0:t(s),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:`w-2 h-8 rounded-full ${n===0?"bg-blue-500":n===1?"bg-green-500":n===2?"bg-yellow-500":"bg-gray-300"}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:s.name}),a.jsx("p",{className:"text-sm text-gray-500",children:s.category})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:At(s.value)}),a.jsxs("div",{className:`flex items-center space-x-1 ${s.change>0?"text-green-600":"text-red-600"}`,children:[s.change>0?a.jsx(We,{className:"h-3 w-3"}):a.jsx(_i,{className:"h-3 w-3"}),a.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(s.change).toFixed(1),"%"]})]})]}),t&&a.jsx(Ms,{className:"h-4 w-4 text-gray-400"})]})]},s.name))})})]})}const Xu=r=>[{id:"rev-001",type:"opportunity",priority:"high",title:"Expand Popular Categories in High-Traffic Locations",description:"Beverages show 45% higher sales in Metro Manila stores but are understocked compared to demand patterns.",impact:"Potential ₱2.3M monthly revenue increase",confidence:87,category:"revenue",actionItems:["Increase beverage inventory by 30% in Metro Manila stores","Introduce premium beverage lines","Optimize shelf placement for beverages"],metrics:{current:125e5,potential:148e5,unit:"₱"}},{id:"cust-001",type:"insight",priority:"medium",title:"Peak Shopping Hours Optimization",description:"68% of transactions occur between 6-9 PM, but staffing is optimized for daytime hours.",impact:"Reduce wait times by 40%",confidence:92,category:"operations",actionItems:["Adjust staff schedules for evening peak","Implement express checkout lanes 6-9 PM","Optimize product restocking schedule"]},{id:"prod-001",type:"warning",priority:"high",title:"Declining Category Performance",description:"Personal Care products show -15% trend over the last 30 days across all locations.",impact:"Risk of ₱800K revenue loss",confidence:78,category:"products",actionItems:["Investigate personal care supplier issues","Launch promotional campaigns","Review competitor pricing"],metrics:{current:28e5,potential:2e6,unit:"₱"}},{id:"mark-001",type:"action",priority:"medium",title:"Cross-Selling Opportunity",description:"Customers buying household items have 73% likelihood to purchase cleaning products when offered.",impact:"Increase basket size by ₱150",confidence:85,category:"revenue",actionItems:["Set up bundled displays","Train staff on cross-selling techniques","Implement recommendation system at checkout"]},{id:"inv-001",type:"insight",priority:"low",title:"Seasonal Demand Pattern",description:"Ice cream sales spike 200% during hot weather days (>32°C). Current inventory planning doesn't account for weather.",impact:"Reduce stockouts by 60%",confidence:91,category:"operations",actionItems:["Integrate weather data into inventory planning","Set up automated reorder triggers","Coordinate with suppliers for rapid restocking"]}].filter(t=>{var s,n;return((s=r.categories)==null?void 0:s.length)>0?t.description.toLowerCase().includes(r.categories[0].toLowerCase()):((n=r.barangays)==null?void 0:n.length)>0?t.description.toLowerCase().includes("location")||t.description.toLowerCase().includes("store"):!0}),Zu=r=>{switch(r){case"opportunity":return We;case"warning":return Io;case"insight":return qo;case"action":return wi;default:return xr}},ed=r=>{switch(r){case"opportunity":return"text-green-600 bg-green-100";case"warning":return"text-red-600 bg-red-100";case"insight":return"text-blue-600 bg-blue-100";case"action":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},td=r=>{switch(r){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},rd=r=>{switch(r){case"revenue":return vs;case"products":return $s;case"customers":return Er;case"operations":return Ko;default:return xr}},sd=({className:r=""})=>{const[e,t]=U.useState(null),s=at(),{data:n,isLoading:i,refetch:o}=Ot({queryKey:["ai-recommendations",s.dateRange,s.brands,s.categories,s.barangays],queryFn:async()=>(await new Promise(c=>setTimeout(c,1500)),Xu(s)),staleTime:5*60*1e3}),l=()=>{o()};return i?a.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${r}`,children:a.jsxs("div",{className:"flex items-center justify-center space-y-4",children:[a.jsx("div",{className:"animate-spin",children:a.jsx(xr,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Analyzing Data..."}),a.jsx("p",{className:"text-gray-600",children:"Generating personalized recommendations"})]})]})}):a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 ${r}`,children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:a.jsx(xr,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Recommendations"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[(n==null?void 0:n.length)||0," insights based on your data"]})]})]}),a.jsx("button",{onClick:l,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Refresh recommendations",children:a.jsx(Wo,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:n==null?void 0:n.map(c=>{const u=Zu(c.type),d=rd(c.category),h=e===c.id;return a.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${ed(c.type)}`,children:a.jsx(u,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:c.title}),a.jsx("div",{className:`w-2 h-2 rounded-full ${td(c.priority)}`}),a.jsx(d,{className:"w-3 h-3 text-gray-500"})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:c.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsx("span",{className:"font-medium text-green-600",children:c.impact}),a.jsxs("span",{className:"text-gray-500",children:["Confidence: ",c.confidence,"%"]})]}),c.metrics&&a.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Current: ",c.metrics.unit,c.metrics.current.toLocaleString()]}),a.jsxs("span",{className:"font-medium text-green-600",children:["Target: ",c.metrics.unit,c.metrics.potential.toLocaleString()]})]})})]}),a.jsx("button",{onClick:()=>t(h?null:c.id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Lo,{className:`w-4 h-4 transition-transform ${h?"rotate-90":""}`})})]}),h&&a.jsxs("div",{className:"mt-3 pl-4 border-l-2 border-blue-200",children:[a.jsx("h5",{className:"text-xs font-medium text-gray-900 mb-2",children:"Recommended Actions:"}),a.jsx("ul",{className:"space-y-1",children:c.actionItems.map((g,v)=>a.jsxs("li",{className:"flex items-start gap-2 text-xs text-gray-600",children:[a.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),g]},v))}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"Implement"}),a.jsx("button",{className:"px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded hover:bg-gray-50 transition-colors",children:"Learn More"})]})]})]})]})},c.id)})}),a.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{children:"AI Confidence: 85%"})]})})]})})]})},ye=r=>r.toISOString().split("T")[0],nd=()=>{const r=at();return Ot({queryKey:["metrics",r],queryFn:async()=>{var j,x,k;const{data:e,error:t,count:s}=await st.from("transactions").select(`
          id,
          total_amount,
          created_at,
          customer_age,
          customer_gender,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              name,
              category,
              brands!inner(name)
            )
          )
        `,{count:"exact"}).gte("created_at",ye(r.dateRange.from)).lte("created_at",ye(r.dateRange.to)).limit(5e4);if(t)throw t;console.log(`🔍 Query Results: ${(e==null?void 0:e.length)||0} transactions fetched, total count: ${s}`);let n=e||[];((j=r.brands)==null?void 0:j.length)>0&&(n=n.filter(C=>C.transaction_items.some(N=>r.brands.includes(N.products.brands.name)))),((x=r.barangays)==null?void 0:x.length)>0&&(n=n.filter(C=>r.barangays.includes(C.store_location))),((k=r.categories)==null?void 0:k.length)>0&&(n=n.filter(C=>C.transaction_items.some(N=>r.categories.includes(N.products.category))));const i=n.reduce((C,N)=>C+N.total_amount,0),o=n.length,l=n.length,c=o>0?i/o:0,u=new Map;n.forEach(C=>{const N=C.created_at.split("T")[0];u.set(N,(u.get(N)||0)+C.total_amount)});const d=[],h=new Date(r.dateRange.from),g=new Date(r.dateRange.to),v=new Date(h);for(;v<=g;){const C=ye(v);d.push({date:C,value:u.get(C)||0}),v.setDate(v.getDate()+1)}const y=new Map;n.forEach(C=>{C.transaction_items.forEach(N=>{const L=N.products.name,R=N.quantity*N.price;y.set(L,(y.get(L)||0)+R)})});const f=Array.from(y.entries()).map(([C,N])=>({name:C,value:N})).sort((C,N)=>N.value-C.value).slice(0,8);return{revenue:i,transactions:o,avgBasketSize:c,activeCustomers:l,revenueTrend:15.2,transactionsTrend:8.7,basketTrend:5.3,customersTrend:12.1,revenueTrendData:d,topProducts:f}},staleTime:5*60*1e3,refetchOnWindowFocus:!1})},id=()=>{const r=at();return Ot({queryKey:["transaction-trends",r],queryFn:async()=>{var v,y,f;const{data:e,error:t,count:s}=await st.from("transactions").select(`
          id,
          created_at,
          total_amount,
          payment_method,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              category,
              brands!inner(name)
            )
          )
        `,{count:"exact"}).gte("created_at",ye(r.dateRange.from)).lte("created_at",ye(r.dateRange.to)).limit(5e4).order("created_at");if(t)throw t;console.log(`📈 Transaction Trends: ${(e==null?void 0:e.length)||0} transactions fetched, total count: ${s}`);let n=e||[];((v=r.brands)==null?void 0:v.length)>0&&(n=n.filter(m=>m.transaction_items.some(b=>r.brands.includes(b.products.brands.name)))),((y=r.barangays)==null?void 0:y.length)>0&&(n=n.filter(m=>r.barangays.includes(m.store_location))),((f=r.categories)==null?void 0:f.length)>0&&(n=n.filter(m=>m.transaction_items.some(b=>r.categories.includes(b.products.category))));const i=new Map;n.forEach(m=>{const b=m.created_at.split("T")[0];i.set(b,(i.get(b)||0)+1)});const o=[],l=new Date(r.dateRange.from),c=new Date(r.dateRange.to),u=new Date(l);for(;u<=c;){const m=ye(u);o.push({date:m,value:i.get(m)||0}),u.setDate(u.getDate()+1)}const h=[{min:0,max:500,label:"0-500"},{min:501,max:1e3,label:"501-1000"},{min:1001,max:2e3,label:"1001-2000"},{min:2001,max:5e3,label:"2001-5000"},{min:5001,max:1/0,label:"5000+"}].map(m=>({date:m.label,value:n.filter(b=>b.total_amount>=m.min&&b.total_amount<=m.max).length})),g=Array.from({length:7},(m,b)=>Array.from({length:24},(_,w)=>{const j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][b],x=n.filter(k=>{const C=new Date(k.created_at);return C.getDay()===b&&C.getHours()===w}).length;return{day:j,hour:w,value:x}})).flat();return{dailyVolume:o,valueDistribution:h,hourlyHeatmap:g}},staleTime:5*60*1e3})},ad=()=>{const r=at();return Ot({queryKey:["product-mix",r],queryFn:async()=>{var h,g,v;const{data:e,error:t,count:s}=await st.from("transactions").select(`
          id,
          created_at,
          total_amount,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              name,
              category,
              brands!inner(name)
            )
          )
        `,{count:"exact"}).gte("created_at",ye(r.dateRange.from)).lte("created_at",ye(r.dateRange.to)).limit(5e4);if(t)throw t;console.log(`🛍️ Product Mix: ${(e==null?void 0:e.length)||0} transactions fetched, total count: ${s}`);let n=e||[];((h=r.brands)==null?void 0:h.length)>0&&(n=n.filter(y=>y.transaction_items.some(f=>r.brands.includes(f.products.brands.name)))),((g=r.barangays)==null?void 0:g.length)>0&&(n=n.filter(y=>r.barangays.includes(y.store_location))),((v=r.categories)==null?void 0:v.length)>0&&(n=n.filter(y=>y.transaction_items.some(f=>r.categories.includes(f.products.category))));const i=new Map;n.forEach(y=>{y.transaction_items.forEach(f=>{const m=f.products.category,b=f.quantity*f.price,_=i.get(m)||{value:0};i.set(m,{value:_.value+b,growth:Math.random()*20-5})})});const o=Array.from(i.entries()).map(([y,f])=>({name:y,value:f.value,growth:f.growth})).sort((y,f)=>f.value-y.value),l=new Map,c=n.reduce((y,f)=>y+f.total_amount,0);n.forEach(y=>{y.transaction_items.forEach(f=>{const m=f.products.brands.name,b=f.quantity*f.price,_=l.get(m)||{value:0};l.set(m,{value:_.value+b,marketShare:0})})});const u=Array.from(l.entries()).map(([y,f])=>({name:y,value:f.value,marketShare:c>0?f.value/c*100:0})).sort((y,f)=>f.value-y.value),d=[{stage:"Growth",products:Math.floor(o.length*.2),revenue:o.slice(0,2).reduce((y,f)=>y+f.value,0)},{stage:"Maturity",products:Math.floor(o.length*.5),revenue:o.slice(2,5).reduce((y,f)=>y+f.value,0)},{stage:"Decline",products:Math.floor(o.length*.2),revenue:o.slice(-2).reduce((y,f)=>y+f.value,0)},{stage:"Introduction",products:Math.floor(o.length*.1),revenue:c*.05}];return{categoryPerformance:o,brandPerformance:u,productLifecycle:d}},staleTime:5*60*1e3})},od=()=>{const r=at();return Ot({queryKey:["consumer-insights",r],queryFn:async()=>{var b,_,w;const{data:e,error:t,count:s}=await st.from("transactions").select(`
          id,
          created_at,
          total_amount,
          customer_age,
          customer_gender,
          payment_method,
          store_location,
          transaction_items!inner(
            quantity,
            price,
            products!inner(
              category,
              brands!inner(name)
            )
          )
        `,{count:"exact"}).gte("created_at",ye(r.dateRange.from)).lte("created_at",ye(r.dateRange.to)).limit(5e4);if(t)throw t;console.log(`👥 Consumer Insights: ${(e==null?void 0:e.length)||0} transactions fetched, total count: ${s}`);let n=e||[];((b=r.brands)==null?void 0:b.length)>0&&(n=n.filter(j=>j.transaction_items.some(x=>r.brands.includes(x.products.brands.name)))),((_=r.barangays)==null?void 0:_.length)>0&&(n=n.filter(j=>r.barangays.includes(j.store_location))),((w=r.categories)==null?void 0:w.length)>0&&(n=n.filter(j=>j.transaction_items.some(x=>r.categories.includes(x.products.category))));const i=new Map;n.forEach(j=>{if(j.customer_age){let x="55+";j.customer_age>=18&&j.customer_age<=24?x="18-24":j.customer_age>=25&&j.customer_age<=34?x="25-34":j.customer_age>=35&&j.customer_age<=44?x="35-44":j.customer_age>=45&&j.customer_age<=54&&(x="45-54");const k=i.get(x)||{count:0,value:0};i.set(x,{count:k.count+1,value:k.value+j.total_amount})}});const o=n.length,l=Array.from(i.entries()).map(([j,x])=>({name:j,value:o>0?Math.round(x.count/o*100):0,count:x.count})),c=new Map;n.forEach(j=>{if(j.customer_gender){const x=j.customer_gender==="M"?"Male":"Female",k=c.get(x)||{count:0,value:0};c.set(x,{count:k.count+1,value:k.value+j.total_amount})}});const u=Array.from(c.entries()).map(([j,x])=>({name:j,value:o>0?Math.round(x.count/o*100):0,count:x.count})),d=new Map;n.forEach(j=>{const x=new Date(j.created_at).getHours();let k="9-12 AM";x>=6&&x<9?k="6-9 AM":x>=9&&x<12?k="9-12 PM":x>=12&&x<15?k="12-3 PM":x>=15&&x<18?k="3-6 PM":x>=18&&x<21?k="6-9 PM":k="9-12 AM",d.set(k,(d.get(k)||0)+1)});const h=Array.from(d.entries()).map(([j,x])=>({hour:j,value:o>0?Math.round(x/o*100):0})),g=new Map;n.forEach(j=>{if(j.payment_method){const x=g.get(j.payment_method)||{count:0,amount:0};g.set(j.payment_method,{count:x.count+1,amount:x.amount+j.total_amount})}});const v=Array.from(g.entries()).map(([j,x])=>({name:j,value:o>0?Math.round(x.count/o*100):0,amount:x.amount})),y=n.reduce((j,x)=>j+x.total_amount,0),f=n.reduce((j,x)=>j+x.transaction_items.reduce((k,C)=>k+C.quantity,0),0),m={avgItemsPerBasket:o>0?+(f/o).toFixed(1):0,avgBasketValue:o>0?Math.round(y/o):0,repeatCustomerRate:67,customerLifetimeValue:12400};return{ageDistribution:l,genderDistribution:u,shoppingTimes:h,paymentMethods:v,basketAnalysis:m}},staleTime:5*60*1e3})};function ld(){const{data:r,isLoading:e,error:t}=nd(),s=da();if(e)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Pr,{className:"h-8 w-8 animate-spin"})});if(t||!r)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600",children:"Error loading data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})});const n=[{name:"Nestle Milo",value:285e4,change:12.5,category:"Beverages"},{name:"Coca-Cola Classic",value:21e5,change:8.3,category:"Beverages"},{name:"Lucky Me Instant",value:175e4,change:-2.1,category:"Food"},{name:"Unilever Dove",value:165e4,change:15.7,category:"Personal Care"},{name:"San Miguel Beer",value:12e5,change:6.4,category:"Beverages"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Executive Overview"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time retail analytics dashboard"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(pr,{title:"Total Revenue",value:r.revenue,format:"currency",trend:r.revenueTrend,subtitle:"Last 30 days",icon:a.jsx(bi,{className:"h-5 w-5"}),onClick:()=>s("/transaction-trends")}),a.jsx(pr,{title:"Transactions",value:r.transactions,format:"number",trend:r.transactionsTrend,subtitle:"Total count",icon:a.jsx(xi,{className:"h-5 w-5"}),onClick:()=>s("/transaction-trends")}),a.jsx(pr,{title:"Avg Basket",value:r.avgBasketSize,format:"currency",trend:r.basketTrend,subtitle:"Per transaction",icon:a.jsx(We,{className:"h-5 w-5"})}),a.jsx(pr,{title:"Active Customers",value:r.activeCustomers,format:"number",trend:r.customersTrend,subtitle:"Unique buyers",icon:a.jsx(Er,{className:"h-5 w-5"}),onClick:()=>s("/consumer-insights")})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(Ju,{data:r.revenueTrendData,title:"Revenue Trend",value:At(r.revenue),trend:r.revenueTrend,onClick:()=>s("/transaction-trends")}),a.jsx(Yu,{data:n,title:"Top Performing Products",onItemClick:i=>s(`/product-mix?category=${encodeURIComponent(i.category)}`)}),a.jsx(sd,{className:"lg:row-span-1"})]}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-sm text-gray-500",children:"💡 Click any metric or chart above to dive deeper into the data"})})]})}const An=()=>{const r=new Date,e=new Date;return e.setDate(e.getDate()-30),[e,r]},cd=Ni()(Pi(Ei((r,e)=>({dateRange:An(),brands:[],locations:[],categories:[],setDateRange:t=>{r({dateRange:t}),e().updateURL()},setBrands:t=>{r({brands:t}),e().updateURL()},setLocations:t=>{r({locations:t}),e().updateURL()},setCategories:t=>{r({categories:t}),e().updateURL()},resetFilters:()=>{r({dateRange:An(),brands:[],locations:[],categories:[]}),e().updateURL()},syncWithURL:()=>{if(typeof window>"u")return;const t=new URLSearchParams(window.location.search),s={},n=t.get("startDate"),i=t.get("endDate");n&&i&&(s.dateRange=[new Date(n),new Date(i)]);const o=t.get("brands");o&&(s.brands=o.split(",").filter(Boolean));const l=t.get("locations");l&&(s.locations=l.split(",").filter(Boolean));const c=t.get("categories");c&&(s.categories=c.split(",").filter(Boolean)),Object.keys(s).length>0&&r(s)},updateURL:()=>{if(typeof window>"u")return;const t=e(),s=new URLSearchParams;s.set("startDate",t.dateRange[0].toISOString().split("T")[0]),s.set("endDate",t.dateRange[1].toISOString().split("T")[0]),t.brands.length>0&&s.set("brands",t.brands.join(",")),t.locations.length>0&&s.set("locations",t.locations.join(",")),t.categories.length>0&&s.set("categories",t.categories.join(","));const n=`${window.location.pathname}?${s.toString()}`;window.history.replaceState({},"",n)}}),{name:"filter-storage",partialize:r=>({dateRange:r.dateRange,brands:r.brands,locations:r.locations,categories:r.categories})}),{name:"filter-store"}));function jr(r){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(r)}function it(r){if(r===null||r===!0||r===!1)return NaN;var e=Number(r);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function te(r,e){if(e.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+e.length+" present")}function be(r){te(1,arguments);var e=Object.prototype.toString.call(r);return r instanceof Date||jr(r)==="object"&&e==="[object Date]"?new Date(r.getTime()):typeof r=="number"||e==="[object Number]"?new Date(r):((typeof r=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ud(r,e){te(2,arguments);var t=be(r).getTime(),s=it(e);return new Date(t+s)}var dd={};function Ur(){return dd}function hd(r){var e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return e.setUTCFullYear(r.getFullYear()),r.getTime()-e.getTime()}function fd(r){return te(1,arguments),r instanceof Date||jr(r)==="object"&&Object.prototype.toString.call(r)==="[object Date]"}function md(r){if(te(1,arguments),!fd(r)&&typeof r!="number")return!1;var e=be(r);return!isNaN(Number(e))}function gd(r,e){te(2,arguments);var t=it(e);return ud(r,-t)}var pd=864e5;function vd(r){te(1,arguments);var e=be(r),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var s=e.getTime(),n=t-s;return Math.floor(n/pd)+1}function kr(r){te(1,arguments);var e=1,t=be(r),s=t.getUTCDay(),n=(s<e?7:0)+s-e;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function ra(r){te(1,arguments);var e=be(r),t=e.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(t+1,0,4),s.setUTCHours(0,0,0,0);var n=kr(s),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var o=kr(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function yd(r){te(1,arguments);var e=ra(r),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var s=kr(t);return s}var bd=6048e5;function xd(r){te(1,arguments);var e=be(r),t=kr(e).getTime()-yd(e).getTime();return Math.round(t/bd)+1}function Sr(r,e){var t,s,n,i,o,l,c,u;te(1,arguments);var d=Ur(),h=it((t=(s=(n=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=be(r),v=g.getUTCDay(),y=(v<h?7:0)+v-h;return g.setUTCDate(g.getUTCDate()-y),g.setUTCHours(0,0,0,0),g}function sa(r,e){var t,s,n,i,o,l,c,u;te(1,arguments);var d=be(r),h=d.getUTCFullYear(),g=Ur(),v=it((t=(s=(n=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:g.firstWeekContainsDate)!==null&&s!==void 0?s:(c=g.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(h+1,0,v),y.setUTCHours(0,0,0,0);var f=Sr(y,e),m=new Date(0);m.setUTCFullYear(h,0,v),m.setUTCHours(0,0,0,0);var b=Sr(m,e);return d.getTime()>=f.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function wd(r,e){var t,s,n,i,o,l,c,u;te(1,arguments);var d=Ur(),h=it((t=(s=(n=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),g=sa(r,e),v=new Date(0);v.setUTCFullYear(g,0,h),v.setUTCHours(0,0,0,0);var y=Sr(v,e);return y}var _d=6048e5;function jd(r,e){te(1,arguments);var t=be(r),s=Sr(t,e).getTime()-wd(t,e).getTime();return Math.round(s/_d)+1}function B(r,e){for(var t=r<0?"-":"",s=Math.abs(r).toString();s.length<e;)s="0"+s;return t+s}var Ne={y:function(e,t){var s=e.getUTCFullYear(),n=s>0?s:1-s;return B(t==="yy"?n%100:n,t.length)},M:function(e,t){var s=e.getUTCMonth();return t==="M"?String(s+1):B(s+1,2)},d:function(e,t){return B(e.getUTCDate(),t.length)},a:function(e,t){var s=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(e,t){return B(e.getUTCHours()%12||12,t.length)},H:function(e,t){return B(e.getUTCHours(),t.length)},m:function(e,t){return B(e.getUTCMinutes(),t.length)},s:function(e,t){return B(e.getUTCSeconds(),t.length)},S:function(e,t){var s=t.length,n=e.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,s-3));return B(i,t.length)}},ht={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kd={G:function(e,t,s){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){var n=e.getUTCFullYear(),i=n>0?n:1-n;return s.ordinalNumber(i,{unit:"year"})}return Ne.y(e,t)},Y:function(e,t,s,n){var i=sa(e,n),o=i>0?i:1-i;if(t==="YY"){var l=o%100;return B(l,2)}return t==="Yo"?s.ordinalNumber(o,{unit:"year"}):B(o,t.length)},R:function(e,t){var s=ra(e);return B(s,t.length)},u:function(e,t){var s=e.getUTCFullYear();return B(s,t.length)},Q:function(e,t,s){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return B(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return B(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){var n=e.getUTCMonth();switch(t){case"M":case"MM":return Ne.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return B(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){var i=jd(e,n);return t==="wo"?s.ordinalNumber(i,{unit:"week"}):B(i,t.length)},I:function(e,t,s){var n=xd(e);return t==="Io"?s.ordinalNumber(n,{unit:"week"}):B(n,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ne.d(e,t)},D:function(e,t,s){var n=vd(e);return t==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):B(n,t.length)},E:function(e,t,s){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){var i=e.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return B(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){var i=e.getUTCDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return B(o,t.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,s){var n=e.getUTCDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return B(i,t.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){var n=e.getUTCHours(),i=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,s){var n=e.getUTCHours(),i;switch(n===12?i=ht.noon:n===0?i=ht.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,s){var n=e.getUTCHours(),i;switch(n>=17?i=ht.evening:n>=12?i=ht.afternoon:n>=4?i=ht.morning:i=ht.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){var n=e.getUTCHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return Ne.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ne.H(e,t)},K:function(e,t,s){var n=e.getUTCHours()%12;return t==="Ko"?s.ordinalNumber(n,{unit:"hour"}):B(n,t.length)},k:function(e,t,s){var n=e.getUTCHours();return n===0&&(n=24),t==="ko"?s.ordinalNumber(n,{unit:"hour"}):B(n,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ne.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ne.s(e,t)},S:function(e,t){return Ne.S(e,t)},X:function(e,t,s,n){var i=n._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return In(o);case"XXXX":case"XX":return Ke(o);case"XXXXX":case"XXX":default:return Ke(o,":")}},x:function(e,t,s,n){var i=n._originalDate||e,o=i.getTimezoneOffset();switch(t){case"x":return In(o);case"xxxx":case"xx":return Ke(o);case"xxxxx":case"xxx":default:return Ke(o,":")}},O:function(e,t,s,n){var i=n._originalDate||e,o=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Dn(o,":");case"OOOO":default:return"GMT"+Ke(o,":")}},z:function(e,t,s,n){var i=n._originalDate||e,o=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Dn(o,":");case"zzzz":default:return"GMT"+Ke(o,":")}},t:function(e,t,s,n){var i=n._originalDate||e,o=Math.floor(i.getTime()/1e3);return B(o,t.length)},T:function(e,t,s,n){var i=n._originalDate||e,o=i.getTime();return B(o,t.length)}};function Dn(r,e){var t=r>0?"-":"+",s=Math.abs(r),n=Math.floor(s/60),i=s%60;if(i===0)return t+String(n);var o=e;return t+String(n)+o+B(i,2)}function In(r,e){if(r%60===0){var t=r>0?"-":"+";return t+B(Math.abs(r)/60,2)}return Ke(r,e)}function Ke(r,e){var t=e||"",s=r>0?"-":"+",n=Math.abs(r),i=B(Math.floor(n/60),2),o=B(n%60,2);return s+i+t+o}var Mn=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},na=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Sd=function(e,t){var s=e.match(/(P+)(p+)?/)||[],n=s[1],i=s[2];if(!i)return Mn(e,t);var o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Mn(n,t)).replace("{{time}}",na(i,t))},Cd={p:na,P:Sd},Td=["D","DD"],Nd=["YY","YYYY"];function Pd(r){return Td.indexOf(r)!==-1}function Ed(r){return Nd.indexOf(r)!==-1}function $n(r,e,t){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Od={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Rd=function(e,t,s){var n,i=Od[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function Zr(r){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):r.defaultWidth,s=r.formats[t]||r.formats[r.defaultWidth];return s}}var Ad={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dd={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Id={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Md={date:Zr({formats:Ad,defaultWidth:"full"}),time:Zr({formats:Dd,defaultWidth:"full"}),dateTime:Zr({formats:Id,defaultWidth:"full"})},$d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ld=function(e,t,s,n){return $d[e]};function qt(r){return function(e,t){var s=t!=null&&t.context?String(t.context):"standalone",n;if(s==="formatting"&&r.formattingValues){var i=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):i;n=r.formattingValues[o]||r.formattingValues[i]}else{var l=r.defaultWidth,c=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[c]||r.values[l]}var u=r.argumentCallback?r.argumentCallback(e):e;return n[u]}}var Ud={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hd=function(e,t){var s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Gd={ordinalNumber:Hd,era:qt({values:Ud,defaultWidth:"wide"}),quarter:qt({values:Fd,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:qt({values:qd,defaultWidth:"wide"}),day:qt({values:Bd,defaultWidth:"wide"}),dayPeriod:qt({values:Wd,defaultWidth:"wide",formattingValues:zd,defaultFormattingWidth:"wide"})};function Bt(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;var o=i[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?Qd(l,function(h){return h.test(o)}):Kd(l,function(h){return h.test(o)}),u;u=r.valueCallback?r.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;var d=e.slice(o.length);return{value:u,rest:d}}}function Kd(r,e){for(var t in r)if(r.hasOwnProperty(t)&&e(r[t]))return t}function Qd(r,e){for(var t=0;t<r.length;t++)if(e(r[t]))return t}function Vd(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=e.match(r.matchPattern);if(!s)return null;var n=s[0],i=e.match(r.parsePattern);if(!i)return null;var o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;var l=e.slice(n.length);return{value:o,rest:l}}}var Jd=/^(\d+)(th|st|nd|rd)?/i,Yd=/\d+/i,Xd={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zd={any:[/^b/i,/^(a|c)/i]},eh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},th={any:[/1/i,/2/i,/3/i,/4/i]},rh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ih={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ah={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lh={ordinalNumber:Vd({matchPattern:Jd,parsePattern:Yd,valueCallback:function(e){return parseInt(e,10)}}),era:Bt({matchPatterns:Xd,defaultMatchWidth:"wide",parsePatterns:Zd,defaultParseWidth:"any"}),quarter:Bt({matchPatterns:eh,defaultMatchWidth:"wide",parsePatterns:th,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Bt({matchPatterns:rh,defaultMatchWidth:"wide",parsePatterns:sh,defaultParseWidth:"any"}),day:Bt({matchPatterns:nh,defaultMatchWidth:"wide",parsePatterns:ih,defaultParseWidth:"any"}),dayPeriod:Bt({matchPatterns:ah,defaultMatchWidth:"any",parsePatterns:oh,defaultParseWidth:"any"})},ch={code:"en-US",formatDistance:Rd,formatLong:Md,formatRelative:Ld,localize:Gd,match:lh,options:{weekStartsOn:0,firstWeekContainsDate:1}},uh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hh=/^'([^]*?)'?$/,fh=/''/g,mh=/[a-zA-Z]/;function Ln(r,e,t){var s,n,i,o,l,c,u,d,h,g,v,y,f,m;te(2,arguments);var b=String(e),_=Ur(),w=(s=(n=void 0)!==null&&n!==void 0?n:_.locale)!==null&&s!==void 0?s:ch,j=it((i=(o=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:_.firstWeekContainsDate)!==null&&o!==void 0?o:(u=_.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=it((h=(g=(v=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&v!==void 0?v:_.weekStartsOn)!==null&&g!==void 0?g:(f=_.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&h!==void 0?h:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var k=be(r);if(!md(k))throw new RangeError("Invalid time value");var C=hd(k),N=gd(k,C),L={firstWeekContainsDate:j,weekStartsOn:x,locale:w,_originalDate:k},R=b.match(dh).map(function(W){var O=W[0];if(O==="p"||O==="P"){var oe=Cd[O];return oe(W,w.formatLong)}return W}).join("").match(uh).map(function(W){if(W==="''")return"'";var O=W[0];if(O==="'")return gh(W);var oe=kd[O];if(oe)return Ed(W)&&$n(W,e,String(r)),Pd(W)&&$n(W,e,String(r)),oe(N,W,w.localize,L);if(O.match(mh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return W}).join("");return R}function gh(r){var e=r.match(hh);return e?e[1].replace(fh,"'"):r}function ph({value:r,onChange:e,className:t}){const[s,n]=r,i=l=>{const c=new Date(l.target.value);e([c,n])},o=l=>{const c=new Date(l.target.value);e([s,c])};return a.jsx("div",{className:ae("grid gap-2",t),children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"grid gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),a.jsx("input",{type:"date",value:Ln(s,"yyyy-MM-dd"),onChange:i,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),a.jsxs("div",{className:"grid gap-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"End Date"}),a.jsx("input",{type:"date",value:Ln(n,"yyyy-MM-dd"),onChange:o,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})})}const Un=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Fn=Yn,vh=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return Fn(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,o=Object.keys(n).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const g=Un(d)||Un(h);return n[u][g]}),l=t&&Object.entries(t).reduce((u,d)=>{let[h,g]=d;return g===void 0||(u[h]=g),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:g,...v}=d;return Object.entries(v).every(y=>{let[f,m]=y;return Array.isArray(m)?m.includes({...i,...l}[f]):{...i,...l}[f]===m})?[...u,h,g]:u},[]);return Fn(r,o,c,t==null?void 0:t.class,t==null?void 0:t.className)},yh=vh("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ws=U.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const o=s?ia:"button";return a.jsx(o,{className:ae(yh({variant:e,size:t,className:r})),ref:i,...n})});Ws.displayName="Button";function es({options:r,value:e,onChange:t,placeholder:s="Select items...",className:n}){const[i,o]=U.useState(!1),l=u=>{e.includes(u)?t(e.filter(d=>d!==u)):t([...e,u])},c=u=>{t(e.filter(d=>d!==u))};return a.jsxs("div",{className:"relative",children:[a.jsxs(Ws,{variant:"outline",role:"combobox","aria-expanded":i,className:ae("justify-between w-full",n),onClick:()=>o(!i),children:[a.jsxs("div",{className:"flex flex-wrap gap-1 max-w-full",children:[e.length===0&&a.jsx("span",{className:"text-muted-foreground",children:s}),e.slice(0,3).map(u=>{const d=r.find(h=>h.value===u);return a.jsxs("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 mr-1 mb-1 bg-secondary text-secondary-foreground",children:[d==null?void 0:d.label,a.jsx("button",{className:"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:h=>{h.key==="Enter"&&c(u)},onMouseDown:h=>{h.preventDefault(),h.stopPropagation()},onClick:()=>c(u),children:a.jsx(Oe,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},u)}),e.length>3&&a.jsxs("div",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 mr-1 mb-1 bg-secondary text-secondary-foreground",children:["+",e.length-3," more"]})]}),a.jsx(ys,{className:"h-4 w-4 shrink-0 opacity-50"})]}),i&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 max-h-64 overflow-auto rounded-md border bg-popover p-0 text-popover-foreground shadow-md",children:[a.jsx("div",{className:"p-1",children:a.jsx("input",{placeholder:"Search...",className:"flex h-8 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 px-2"})}),a.jsxs("div",{className:"p-1",children:[r.length===0&&a.jsx("div",{className:"py-6 text-center text-sm",children:"No options found."}),r.map(u=>a.jsxs("div",{className:"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:()=>l(u.value),children:[a.jsx($o,{className:ae("mr-2 h-4 w-4",e.includes(u.value)?"opacity-100":"opacity-0")}),u.label]},u.value))]})]})]})}const bh=[{value:"nestle",label:"Nestle"},{value:"unilever",label:"Unilever"},{value:"pg",label:"Procter & Gamble"},{value:"coca-cola",label:"Coca-Cola"},{value:"pepsi",label:"PepsiCo"},{value:"jollibee",label:"Jollibee"},{value:"san-miguel",label:"San Miguel"},{value:"urc",label:"Universal Robina"}],xh=[{value:"ncr",label:"National Capital Region"},{value:"region-1",label:"Region 1 (Ilocos)"},{value:"region-2",label:"Region 2 (Cagayan Valley)"},{value:"region-3",label:"Region 3 (Central Luzon)"},{value:"region-4a",label:"Region 4A (CALABARZON)"},{value:"region-4b",label:"Region 4B (MIMAROPA)"},{value:"region-5",label:"Region 5 (Bicol)"},{value:"region-6",label:"Region 6 (Western Visayas)"},{value:"region-7",label:"Region 7 (Central Visayas)"},{value:"region-8",label:"Region 8 (Eastern Visayas)"},{value:"region-9",label:"Region 9 (Zamboanga Peninsula)"},{value:"region-10",label:"Region 10 (Northern Mindanao)"},{value:"region-11",label:"Region 11 (Davao)"},{value:"region-12",label:"Region 12 (SOCCSKSARGEN)"}],wh=[{value:"beverages",label:"Beverages"},{value:"snacks",label:"Snacks & Confectionery"},{value:"personal-care",label:"Personal Care"},{value:"household",label:"Household Products"},{value:"dairy",label:"Dairy Products"},{value:"frozen",label:"Frozen Foods"},{value:"bakery",label:"Bakery & Bread"},{value:"condiments",label:"Condiments & Sauces"},{value:"instant",label:"Instant Foods"},{value:"health",label:"Health & Wellness"}];function zs(){const{dateRange:r,brands:e,locations:t,categories:s,setDateRange:n,setBrands:i,setLocations:o,setCategories:l,resetFilters:c}=cd();return ta(),a.jsxs(D,{className:"p-4 mb-6 bg-white shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date Range"}),a.jsx(ph,{value:r,onChange:n,className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Brands"}),a.jsx(es,{value:e,onChange:i,options:bh,placeholder:"Select brands...",className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Locations"}),a.jsx(es,{value:t,onChange:o,options:xh,placeholder:"Select locations...",className:"w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Categories"}),a.jsx(es,{value:s,onChange:l,options:wh,placeholder:"Select categories...",className:"w-full"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Active filters: ",[e.length>0&&`${e.length} brand${e.length>1?"s":""}`,t.length>0&&`${t.length} location${t.length>1?"s":""}`,s.length>0&&`${s.length} categor${s.length>1?"ies":"y"}`].filter(Boolean).join(", ")||"None"]}),a.jsxs(Ws,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-2",children:[a.jsx(zo,{className:"h-4 w-4"}),"Reset Filters"]})]})]})}function _h({data:r,dataKey:e="value",color:t="#3b82f6",height:s=300,formatValue:n="number"}){const i=l=>typeof l!="number"?l:n==="currency"?At(l):Nr(l),o=l=>typeof l!="number"?l:n==="currency"?l>=1e6?`₱${(l/1e6).toFixed(1)}M`:l>=1e3?`₱${(l/1e3).toFixed(1)}K`:`₱${l}`:l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toString();return a.jsx(Tr,{width:"100%",height:s,children:a.jsxs(Xn,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(ei,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(ts,{dataKey:"date",className:"text-xs",tickFormatter:l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(yr,{className:"text-xs",tickFormatter:o}),a.jsx(Es,{labelFormatter:l=>new Date(l).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),formatter:l=>[i(l),e],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),a.jsx(Zn,{type:"monotone",dataKey:e,stroke:t,strokeWidth:2,dot:{fill:t,strokeWidth:2,r:4},activeDot:{r:6,stroke:t,strokeWidth:2}})]})})}function Cr({data:r,dataKey:e="value",color:t="#10b981",height:s=300,formatValue:n="number",layout:i="vertical"}){const o=c=>typeof c!="number"?c:n==="currency"?At(c):Nr(c),l=c=>typeof c!="number"?c:n==="currency"?c>=1e6?`₱${(c/1e6).toFixed(1)}M`:c>=1e3?`₱${(c/1e3).toFixed(1)}K`:`₱${c}`:c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(1)}K`:c.toString();return a.jsx(Tr,{width:"100%",height:s,children:a.jsxs(ma,{data:r,layout:i,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(ei,{strokeDasharray:"3 3",className:"stroke-muted"}),i==="vertical"?a.jsxs(a.Fragment,{children:[a.jsx(ts,{type:"number",className:"text-xs",tickFormatter:l}),a.jsx(yr,{type:"category",dataKey:"name",className:"text-xs",width:100})]}):a.jsxs(a.Fragment,{children:[a.jsx(ts,{type:"category",dataKey:"name",className:"text-xs"}),a.jsx(yr,{type:"number",className:"text-xs",tickFormatter:l})]}),a.jsx(Es,{formatter:c=>[o(c),e],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),a.jsx(ga,{dataKey:e,fill:t,radius:i==="vertical"?[0,4,4,0]:[4,4,0,0]})]})})}function jh(){const{data:r,isLoading:e,error:t}=id();return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Pr,{className:"h-8 w-8 animate-spin"})}):t||!r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600",children:"Error loading data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transaction Trends"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Detailed transaction analytics and patterns"})]}),a.jsx(zs,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(We,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.dailyVolume.reduce((s,n)=>s+n.value,0).toLocaleString()}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Transactions"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(yi,{className:"h-8 w-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:Math.round(r.dailyVolume.reduce((s,n)=>s+n.value,0)/r.dailyVolume.length)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Daily Volume"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(bi,{className:"h-8 w-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:"₱847"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Transaction Value"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Daily Transaction Volume"})}),a.jsx($,{children:a.jsx(_h,{data:r.dailyVolume,dataKey:"value",color:"#3b82f6",height:300,formatValue:"number"})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Transaction Value Distribution"})}),a.jsx($,{children:a.jsx(Cr,{data:r.valueDistribution.map(s=>({name:s.date,value:s.value})),dataKey:"value",color:"#10b981",height:300,formatValue:"number",layout:"vertical"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Peak Hours Analysis"})}),a.jsx($,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Morning (6-12)"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:a.jsx("div",{className:"w-8 h-2 bg-blue-500 rounded-full"})}),a.jsx("span",{className:"text-sm font-medium",children:"25%"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Afternoon (12-18)"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:a.jsx("div",{className:"w-12 h-2 bg-green-500 rounded-full"})}),a.jsx("span",{className:"text-sm font-medium",children:"45%"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Evening (18-24)"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:a.jsx("div",{className:"w-8 h-2 bg-purple-500 rounded-full"})}),a.jsx("span",{className:"text-sm font-medium",children:"30%"})]})]})]})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Weekly Patterns"})}),a.jsx($,{children:a.jsx("div",{className:"space-y-3",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((s,n)=>{const i=[85,78,82,88,95,100,72][n];return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:s}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:a.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${i}%`}})}),a.jsxs("span",{className:"text-sm font-medium",children:[i,"%"]})]})]},s)})})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Transaction Insights"})}),a.jsxs($,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Busiest Day"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Saturday (avg 285 transactions)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Peak Hour"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"2:00 PM - 3:00 PM"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Growth Trend"}),a.jsx("div",{className:"text-sm text-green-600",children:"+12.5% vs last month"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Seasonal Pattern"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Higher on weekends"})]})]})]})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Transaction Volume Heatmap"})}),a.jsxs($,{children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Transaction intensity by day of week and hour of day"}),a.jsx("div",{className:"grid grid-cols-24 gap-1",children:r.hourlyHeatmap.slice(0,168).map((s,n)=>{const i=Math.min(s.value/100,1);return a.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:`rgba(59, 130, 246, ${i})`},title:`${s.day} ${s.hour}:00 - ${s.value} transactions`},n)})}),a.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:"12 AM"}),a.jsx("span",{children:"6 AM"}),a.jsx("span",{children:"12 PM"}),a.jsx("span",{children:"6 PM"}),a.jsx("span",{children:"11 PM"})]})]})]})]})}const kh=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"];function Ps({data:r,dataKey:e="value",height:t=300,formatValue:s="number",showLegend:n=!0,colors:i=kh,innerRadius:o=60}){const l=d=>{if(typeof d!="number")return d;switch(s){case"currency":return At(d);case"percentage":return vi(d);default:return Nr(d)}},c=r.reduce((d,h)=>d+h[e],0),u=d=>{const h=(d[e]/c*100).toFixed(1);return`${d.name}: ${h}%`};return a.jsx(Tr,{width:"100%",height:t,children:a.jsxs(pa,{children:[a.jsx(va,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:u,outerRadius:80,innerRadius:o,fill:"#8884d8",dataKey:e,children:r.map((d,h)=>a.jsx(ya,{fill:i[h%i.length]},`cell-${h}`))}),a.jsx(Es,{formatter:(d,h)=>[l(d),h],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),n&&a.jsx(ba,{verticalAlign:"bottom",height:36,formatter:d=>`${d}`})]})})}function Sh(){var s,n,i,o,l,c;const{data:r,isLoading:e,error:t}=ad();return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Pr,{className:"h-8 w-8 animate-spin"})}):t||!r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600",children:"Error loading data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Product Mix Analysis"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Product performance and category insights"})]}),a.jsx(zs,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx($s,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.productLifecycle.reduce((u,d)=>u+d.products,0)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Products"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(We,{className:"h-8 w-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:((s=r.productLifecycle.find(u=>u.stage==="Growth"))==null?void 0:s.products)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Growth Stage"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(Go,{className:"h-8 w-8 text-yellow-600 mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[(n=r.brandPerformance[0])==null?void 0:n.marketShare.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Top Brand Share"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(wi,{className:"h-8 w-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:"6"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Category Performance"})}),a.jsx($,{children:a.jsx(Cr,{data:r.categoryPerformance,dataKey:"value",color:"#3b82f6",height:300,formatValue:"currency",layout:"vertical"})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Brand Market Share"})}),a.jsx($,{children:a.jsx(Ps,{data:r.brandPerformance.map(u=>({name:u.name,value:u.marketShare})),height:300,showLegend:!0})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Category Growth Rates"})}),a.jsx($,{children:a.jsx("div",{className:"space-y-3",children:r.categoryPerformance.map(u=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:u.name}),a.jsxs("span",{className:`text-sm font-medium ${u.growth>=0?"text-green-600":"text-red-600"}`,children:[u.growth>=0?"+":"",u.growth.toFixed(1),"%"]})]},u.name))})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Product Lifecycle"})}),a.jsx($,{children:a.jsx("div",{className:"space-y-4",children:r.productLifecycle.map(u=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:u.stage}),a.jsxs("span",{className:"font-medium",children:[u.products," products"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${u.products/r.productLifecycle.reduce((d,h)=>d+h.products,0)*100}%`}})}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Revenue: ",(u.revenue/1e6).toFixed(1),"M"]})]},u.stage))})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Top Performers"})}),a.jsxs($,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Highest Revenue Category"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[(i=r.categoryPerformance[0])==null?void 0:i.name," - ₱",(((o=r.categoryPerformance[0])==null?void 0:o.value)/1e6).toFixed(1),"M"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Fastest Growing"}),a.jsxs("div",{className:"text-sm text-green-600",children:[r.categoryPerformance.reduce((u,d)=>d.growth>u.growth?d:u).name," (+",r.categoryPerformance.reduce((u,d)=>d.growth>u.growth?d:u).growth.toFixed(1),"%)"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Market Leader"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[(l=r.brandPerformance[0])==null?void 0:l.name," (",(c=r.brandPerformance[0])==null?void 0:c.marketShare.toFixed(1),"% share)"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Total SKUs"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.productLifecycle.reduce((u,d)=>u+d.products,0)," active products"]})]})]})]})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Detailed Brand Performance"})}),a.jsx($,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left p-2",children:"Brand"}),a.jsx("th",{className:"text-right p-2",children:"Revenue"}),a.jsx("th",{className:"text-right p-2",children:"Market Share"}),a.jsx("th",{className:"text-right p-2",children:"Performance"})]})}),a.jsx("tbody",{children:r.brandPerformance.map((u,d)=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2 font-medium",children:u.name}),a.jsxs("td",{className:"p-2 text-right",children:["₱",(u.value/1e6).toFixed(1),"M"]}),a.jsxs("td",{className:"p-2 text-right",children:[u.marketShare.toFixed(1),"%"]}),a.jsx("td",{className:"p-2 text-right",children:a.jsxs("div",{className:"flex items-center justify-end",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mr-2",children:a.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${u.marketShare*5}%`}})}),a.jsxs("span",{className:"text-xs",children:["#",d+1]})]})})]},u.name))})]})})})]})]})}function Ch(){const{data:r,isLoading:e,error:t}=od();return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Pr,{className:"h-8 w-8 animate-spin"})}):t||!r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600",children:"Error loading data"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Please try again later"})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Consumer Insights"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Customer behavior and demographic analysis"})]}),a.jsx(zs,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(Er,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.ageDistribution.reduce((s,n)=>s+n.count,0).toLocaleString()}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Customers"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(xi,{className:"h-8 w-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.basketAnalysis.avgItemsPerBasket}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Items/Basket"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(Uo,{className:"h-8 w-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["₱",r.basketAnalysis.avgBasketValue]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Basket Value"})]})]})}),a.jsx(D,{children:a.jsxs($,{className:"flex items-center p-6",children:[a.jsx(yi,{className:"h-8 w-8 text-orange-600 mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[r.basketAnalysis.repeatCustomerRate,"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Repeat Customers"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Age Distribution"})}),a.jsx($,{children:a.jsx(Ps,{data:r.ageDistribution,height:300,showLegend:!0,colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Gender Distribution"})}),a.jsx($,{children:a.jsx(Ps,{data:r.genderDistribution,height:300,showLegend:!0,colors:["#ec4899","#06b6d4"]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Shopping Time Preferences"})}),a.jsx($,{children:a.jsx(Cr,{data:r.shoppingTimes.map(s=>({name:s.hour,value:s.value})),dataKey:"value",color:"#10b981",height:300,formatValue:"number",layout:"horizontal"})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Payment Method Usage"})}),a.jsx($,{children:a.jsx(Cr,{data:r.paymentMethods.map(s=>({name:s.name,value:s.value})),dataKey:"value",color:"#3b82f6",height:300,formatValue:"number",layout:"vertical"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Customer Segments"})}),a.jsx($,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Premium Shoppers"}),a.jsx("span",{className:"text-sm font-medium",children:"22%"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"w-5/12 bg-purple-500 h-2 rounded-full"})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"High value, frequent purchases"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Regular Customers"}),a.jsx("span",{className:"text-sm font-medium",children:"45%"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"w-9/12 bg-blue-500 h-2 rounded-full"})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Consistent purchasing behavior"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Occasional Buyers"}),a.jsx("span",{className:"text-sm font-medium",children:"33%"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"w-8/12 bg-green-500 h-2 rounded-full"})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Sporadic purchase patterns"})]})]})})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Purchase Patterns"})}),a.jsxs($,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Peak Shopping Day"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Saturday (28% of weekly sales)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Most Popular Time"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"12-3 PM (35% of daily sales)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Preferred Payment"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Cash (45% of transactions)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Avg Visit Duration"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"23 minutes"})]})]})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Customer Lifetime Value"})}),a.jsxs($,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Average CLV"}),a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₱",r.basketAnalysis.customerLifetimeValue.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Customer Retention"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.basketAnalysis.repeatCustomerRate,"% return within 30 days"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Purchase Frequency"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"2.3 visits per month"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Churn Rate"}),a.jsx("div",{className:"text-sm text-red-600",children:"8.5% monthly"})]})]})]})]}),a.jsxs(D,{children:[a.jsx(G,{children:a.jsx(K,{children:"Detailed Demographics"})}),a.jsx($,{children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-3",children:"Age Groups"}),a.jsx("div",{className:"space-y-2",children:r.ageDistribution.map(s=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm",children:[s.name," years"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium",children:s.count.toLocaleString()}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.value,"%)"]})]})]},s.name))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-3",children:"Payment Methods by Amount"}),a.jsx("div",{className:"space-y-2",children:r.paymentMethods.map(s=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:s.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-medium",children:["₱",(s.amount/1e6).toFixed(1),"M"]}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.value,"%)"]})]})]},s.name))})]})]})})]})]})}const Th=new $a({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!1}}});function Nh(){return a.jsx(Ba,{client:Th,children:a.jsx(ha,{children:a.jsx(fa,{children:a.jsxs($t,{path:"/",element:a.jsx(Ku,{}),children:[a.jsx($t,{index:!0,element:a.jsx(ld,{})}),a.jsx($t,{path:"trends",element:a.jsx(jh,{})}),a.jsx($t,{path:"products",element:a.jsx(Sh,{})}),a.jsx($t,{path:"insights",element:a.jsx(Ch,{})})]})})})})}rs.createRoot(document.getElementById("root")).render(a.jsx(Jn.StrictMode,{children:a.jsx(Nh,{})}));
